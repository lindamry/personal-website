<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title>GT.M Acculturation Workshop</title>
	<meta name="generator" content="LibreOffice 4.3.4.1 (Linux)"/>
	<meta name="author" content="K.S. Bhaskar"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2014-12-17T10:59:20.595043889"/>
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-16T18:30:46.154674426">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-16T13:41:00.762860642">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-11T07:27:53.610024232">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-06T14:16:25.039734207">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-05T06:31:08.420702288">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-03T21:42:17.216152571">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-02T14:38:16.509269506">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-02T14:09:35.380052652">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-02T11:27:00.775947015">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-12-02T11:24:19.672964955">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-11-20T17:16:27.396004927">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2014-11-18T16:57:08.136030406">
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="K.S. Bhaskar">
	<meta name="changed" content="2014-11-17T18:10:43.919100799">
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="K.S. Bhaskar">
	<meta name="changed" content="2014-11-17T16:50:04.886783741">
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="K.S. Bhaskar">
	<meta name="changed" content="2014-11-13T13:43:14.232414990">
	<meta name="created" content="2009-10-19T00:00:00.017232000">
	<meta name="changedby" content="K.S. Bhaskar">
	<meta name="changed" content="2014-11-12T16:35:32.980190175">
	<meta name="CHANGEDBY" content="K.S. Bhaskar">
	<meta name="CHANGEDBY" content="K.S. Bhaskar">
	<meta name="CHANGEDBY" content="K.S. Bhaskar">
	<style type="text/css">
		@page { size: landscape }
		td p { margin-top: 0.14in; margin-bottom: 0.14in; color: #000000; font-family: "Ubuntu", "DejaVu Sans", sans-serif; font-size: 10pt }
		h1 { font-variant: normal; color: #000000; font-family: "Ubuntu", "DejaVu Sans", sans-serif; font-size: 16pt }
		p { margin-top: 0.14in; margin-bottom: 0.14in; color: #000000; font-family: "Ubuntu", "DejaVu Sans", sans-serif; font-size: 10pt }
		h2 { font-variant: normal; color: #000000; font-family: "Ubuntu", "DejaVu Sans", sans-serif; font-size: 16pt }
		h3 { font-family: "Ubuntu", "DejaVu Sans", sans-serif; font-size: 13pt }
		h4 { font-family: "Ubuntu", "DejaVu Sans", sans-serif }
		pre { color: #000000 }
		pre.western { font-family: "Ubuntu Mono", "Inconsolata", "Consolas", monospace; font-weight: normal }
		pre.cjk { font-family: "Ubuntu Mono", "Inconsolata", "Consolas", monospace; font-size: 11pt; font-weight: normal }
		pre.ctl { font-family: "Ubuntu Mono", "Inconsolata", "Consolas", monospace; font-size: 11pt; font-weight: normal }
	</style>
</head>
<body lang="en-US" text="#000000" dir="ltr" style="background: transparent">
<h1 align="left">Welcome to the FIS GT.M Acculturation Workshop</h1>
<p>Copyright © 2014 Fidelity National Information Services, Inc.
and/or its subsidiaries. All Rights Reserved.</p>
<p>Permission is granted to copy, distribute and/or modify this
document under the terms of the <a href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU
Free Documentation License</a>, Version 1.3 or any later version
published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts and no Back-Cover Texts.</p>
<p>GT.M™ is a trademark of Fidelity National Information Services,
Inc. Other trademarks are the property of their respective owners.</p>
<p>This document contains a description of FIS GT.M and the operating
instructions pertaining to the various functions that comprise the
system. This document does not contain any commitment of FIS. FIS
believes the information in this publication is accurate as of its
publication date; such information is subject to change without
notice. FIS is not responsible for any errors or defects.</p>
<h1>Contents – Navigation</h1>
<p><a href="#Acculturation Workshop Expectations">Acculturation
Workshop Expectations</a><br><a href="#GTM">GT.M</a><br><a href="#Packaging">Packaging</a><br><a href="#Getting">Getting
Started</a><br><a href="#Basics">The
Basics</a><br><a href="#Security">Security</a><br><a href="#Journaling">Journaling</a><br><a href="#Replication">Database
Replication</a><br><a href="#Backup">Backup</a><br><a href="#ReplicationR">Replication
Briefly Revisited</a><br><a href="#Unicode">Unicode
(ISO/IEC-10646)</a><br><a href="#Encryption">Database
Encryption</a><br><a href="#Pulling">Pulling it together</a></p>
<h1>Overview</h1>
<h2><a name="Acculturation Workshop Expectations"></a>Acculturation
Workshop Expectations</h2>
<p>The GT.M Acculturation Workshop is a hands-on GT.M “boot camp”
for those interested in the configuration, administration and
operation of applications on GT.M. This file is the script, or
workbook, for the workshop, and consists of the exercises below.</p>
<p>At the end of these exercises, you will have a basic working
knowledge of the essential aspects of GT.M administration and
operations. While this workshop alone will not make you a GT.M expert
by any means, the basic working knowledge will help you quickly
understand the concepts explained in the user documentation and put
you on the path to becoming an expert.</p>
<p>The workshop is not a course in M programming. Familiarity with
Linux<sup>®</sup> (or at least UNIX<sup>®</sup>) will allow you to
move faster through the material, but is not absolutely required. If
you have no experience whatsoever with Linux or UNIX, supplementary
tutorial material on the side will increase your level of comfort.</p>
<p>As the differences between GT.M and other M implementations are
more in the area of configuration and systems administration rather
than M language features, the former topic is the major thrust of the
workshop.</p>
<h2><a name="GTM"></a>GT.M</h2>
<p><a href="http://fis-gtm.com/" target="_blank">FIS GT.M™</a> is
an implementation of the ISO standard scripting &amp; application
development language M, commonly known as MUMPS, developed and
released by <a href="http://fisglobal.com/" target="_blank">FIS</a>.
As the platform for the <a href="http://fis-profile.com/" target="_blank">FIS
Profile</a> application, GT.M is the most widely used M
implementation in banking and finance, including several of the
largest real time core processing systems we know of that are live at
any bank anywhere in the world. GT.M is increasingly used in
healthcare. The implementation of GT.M on the GNU/Linux operating
system on industry standard x86_64 architecture hardware is the M
implementation used for the <a href="http://en.wikipedia.org/wiki/Free_open_source_software" target="_blank">FOSS</a>
(Free / Open Source Software) stack for <a href="http://worldvista.org/AboutVistA" target="_blank">VistA</a>.</p>
<p>GT.M is architected with the following objectives:</p>
<ul>
	<li/>
<p>Without compromise, the robustness, security and integrity
	of the information entrusted to it.</p>
	<li/>
<p>Open architecture, with easy, standards based access to the
	information in the database.</p>
	<li/>
<p>Continuity of business – GT.M has unique functionality
	for the deployment of mission-critical applications that must be
	available 24 hours a day, 365 days a year, with no down time even
	for planned events.</p>
	<li/>
<p>Throughput, performance and scalability to meet the needs
	of the largest institutions in the world.</p>
</ul>
<p>Free support for GT.M is available from the community on various
mailing lists and forums. Support with assured service levels is
available from FIS on a commercial basis.</p>
<p>GT.M provides:</p>
<ul>
	<li/>
<p>full <a href="http://en.wikipedia.org/wiki/ACID" target="_blank">ACID
	(Atomic, Consistent, Isolated, Durable)</a> transaction semantics,</p>
	<li/>
<p>throughput that scales to the needs of enterprise wide
	applications, and</p>
	<li/>
<p>unique functionality for creating logical multi site
	configurations for mission critical applications that must always be
	available; including during upgrades, and even upgrades involving
	changes to the database schema.</p>
</ul>
<p>With the exception of Structured System Variable Names (SSVNs),
GT.M mostly implements ISO standard M (ISO/IEC 11756:1999), including
a full implementation of transaction processing (TP) that provides
ACID (Atomic, Consistent, Isolated, Durable) transactions. As with
any M implementation, there are extensions. IO parameters are
implementation specific, as are parameters of the VIEW command, and
commands &amp; variables starting with the letter Z.</p>
<p>Despite the fact that the dialect of M implemented by GT.M shares
so much in common with other M implementations, operationally, GT.M
is unlike any other M implementation.</p>
<p>This Acculturation Workshop is based on GT.M <span style="background: #00ff00">V6.2-000</span>,
but any more recent version of GT.M should also work well.</p>
<h2><a name="Packaging"></a>Packaging</h2>
<p>The exercises are carried out by booting guest virtual machines
(also called software appliances) on your host computer. Think of a
virtual machine as a “computer within a computer”. A guest
virtual machine can run a different operating system from that of the
host computer. The host computer might itself run Linux, Windows, OS
X, or any other operating system and the guest can run Linux with
GT.M as well as other applications. &quot;Emulation&quot; or
&quot;virtualization&quot; software helps you set up a guest system
on a host computer. On the host computer, the disk images of the GT.M
Acculturation Workshop guest look like ordinary files in the file
system.</p>
<h3>Linux</h3>
<p>Linux is the common name for the GNU/Linux operating system,
consisting of the GNU utilities and libraries on the Linux kernel,
available across the broadest range of hardware of any operating
system. It is most widely used on industry standard architecture
x86_64 hardware (i.e., based on popular CPUs from Intel, AMD and
other vendors), and is increasingly popular around the world for
applications that include embedded computing (appliances); personal
desktops; file, print &amp; web servers; supercomputing; and to
deploy mission critical software. Linux is the operating system for
the VistA FOSS stack.</p>
<p>Free support for Linux is available on numerous mailing lists and
electronic forums. Commercial support is widely available from
multiple vendors.</p>
<p>The GT.M Acculturation Workshop is virtual machine which starts
with the disk image of a minimal <a href="http://www.ubuntu.com/" target="_blank">Ubuntu</a>
12.04 LTS (“Precise Pangolin”) Linux distribution, with
<a href="https://help.ubuntu.com/12.04/index.html" target="_blank">additional
documentation resources</a>.</p>
<p>For other documentation resources, although dated, <a href="http://rute.2038bug.com/index.html.gz" target="_blank">Linux:
Rute User's Tutorial and Exposition</a> is still a very useful and
usable tutorial for anyone getting started with Linux. The <a href="http://debian.org/">Debian
Project</a> maintains <a href="http://www.debian.org/doc/books" target="_blank">a
page of books</a> on Linux. The <a href="http://wiki.debian.org/" target="_blank">Debian
Wiki</a> has useful reference information and a having handy a paper
copy of the <a href="http://www.debian.org/doc/manuals/refcard/" target="_blank">Debian
Reference Card</a> (available in several languages) would be useful
for anyone not entirely comfortable with Linux.</p>
<h3>Conventions</h3>
<p>Text in <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">light
blue monospace font</span></font></font> is intended to be typed in
at a GT.M prompt (including the main <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">GTM&gt;</span></font>
prompt as well as utility programs such as GDE). Text in <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">red
monospace font</span></font></font> is intended to be typed in at a
shell prompt, as input to a command executed from the shell, or
elsewhere in Linux – but not to GT.M. Commands to be executed on
the host are in <font color="#008000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">green
monospace font</span></font></font>.</p>
<p><span style="background: #00ff00">Light green highlighting</span>
shows software version numbers that are current as of the date of
this document, but for which subsequent newer releases are likely.
Check for and use any newer versions, as you go through the
exercises.</p>
<h3>Control of the Keyboard &amp; Mouse</h3>
<p>When you boot a guest virtual machine, booting it “headless”
(i.e., without a console), means that the host always has control of
the keyboard and mouse. If it is not headless, ownership of the
keyboard or mouse may need to toggle between the host and guest. The
software you use for virtualization determines how to transfer
control.</p>
<p>With kvm / QEMU, use the Ctrl-Alt key combination to toggle
ownership of the mouse and keyboard between host and guest. Even if
the host owns the keyboard, you can type into the guest console when
it has focus, but not the other way around. Mouse clicks are visible
to only the machine, host or guest, that owns the mouse.</p>
<h3>Terminal Emulation</h3>
<p>Even when running with a console, we recommend that you boot and
minimize the virtual machine, and connect to your virtual machines
with terminal sessions from a terminal emulator. On Windows, you can
use a terminal emulator such as <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank">putty</a>.
Linux distributions include terminal emulation. Terminal emulators
are available for, and frequently included with, other computer
platforms.</p>
<p>For the Unicode exercises, you will either need a terminal
emulator that can be switched between UTF-8 and single-byte
characters, or you will need two emulators. If you intend to use
languages that write right to left, you will need a terminal emulator
with bidirectional capabilities.</p>
<h3>Virtualization</h3>
<p>The software used for virtualization and used in the examples
herein is <a href="http://www.qemu.org/" target="_blank">QEMU</a>
which is available for many popular computing platforms, including
Linux, Windows, and more. Instructions are provided below for Windows
and Linux hosts. On Linux hosts, <a href="http://www.linux-kvm.org/" target="_blank">kvm</a>
may be the preferred choice (kvm and QEMU provide a very similar user
interface). <a href="http://www.virtualbox.org/" target="_blank">VirtualBox</a>
is another popular FOSS virtualization application. There is also
proprietary virtualization software. Even though the examples herein
are kvm/QEMU, you should be able to use the virtualization software
of your choice.</p>
<p>You are at liberty to use a Linux host, or any Linux virtual
machine of your choice. The virtual machine used to develop the
exercises is a 64-bit Ubuntu Linux 14.04 LTS, using kvm on a 64-bit
Ubuntu Linux 14.10 host.</p>
<h4>Disk Formats</h4>
<p>The GT.M Acculturation Workshop is distributed as a <a href="http://en.wikipedia.org/wiki/VMDK" target="_blank">vmdk
format</a> disk image file (e.g., <font color="#000000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><b>ubuntu-14.04_gtmworkshop9.vmdk</b></font></font><font color="#000000">)</font>
that should work with most virtualization software, both FOSS and
proprietary.</p>
<h4>Virtual Machine Configuration</h4>
<p>Virtualization software configures virtual machines either with
their own IP addresses where the network connection (wired or
wireless) of the host has multiple IP addresses, or, more commonly
using network address translation (NAT). In the latter case, the
network connection of the host has one IP address that it presents to
the outside world, but each virtual machine has an IP address in a
subnet within the host (the host acts just like a home Wifi access
point / router).</p>
<p>You will need to configure your virtual machine for outbound and
inbound network access. While outbound access should require no
configuration to work with either type of virtual machine network
connection, inbound network access in a NAT'd environment will
require a TCP port on the host to be forwarded to the virtual machine
for each port at which a service on the virtual machine needs to
respond. For example each virtual machine has a secure shell (ssh)
server listening at port 22 for incoming connections, and you might
choose to forward port 2222 on the host to port 22 on your virtual
machine.</p>
<p>Refer to the user documentation for your virtualization software
to set up virtual machine networking. For example, using kvm on a
Linux host, the following command boots the vmdk image with port 2222
on the host forwarded to port 22 on the guest for ssh sessions:</p>
<pre class="western" style="margin-top: 0.14in; margin-bottom: 0.2in"><font color="#008000">kvm -enable-kvm -cpu host -m 256 -display none -net nic -net user,hostfwd=tcp::2222-:22 -hda ubuntu-14.04_gtmworkshop9.vmdk &amp;</font></pre><h3>
Legal Stuff</h3>
<p>GT.M is owned and copyrighted by <a href="http://www.fisglobal.com/" target="_blank">Fidelity
Information Services, LLC</a>, and is available for the x86_64
GNU/Linux platform under the terms of the <a href="http://www.gnu.org/licenses/agpl.txt" target="_blank">GNU
Affero General Public License version 3</a>. Source and binary can be
downloaded from the <a href="http://sourceforge.net/projects/fis-gtm" target="_blank">GT.M
project page at Source Forge</a>.</p>
<p>The core of VistA (so called “FOIA VistA”) is in the public
domain through the US Freedom of Information Act. Source and object
code are available on one of the hard drive images. As noted above,
no understanding of VistA itself is required or assumed for the
workshop.</p>
<p>The Linux kernel, GNU utilities, the WorldVistA EHR extensions to
VistA and all other software on the CD-ROM and hard drive images are
FOSS and available under their respective FOSS licenses. Copyrights
and trademarks of all content are hereby acknowledged as being held
by their owners.</p>
<h2><a name="Getting"></a>Getting Started</h2>
<p>With a terminal emulator initiate an ssh connection to port 2222
on localhost and login with userid <font color="#008000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtmuser</span></font></font>,
password <font color="#008000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">GT.M
Rocks!</span></font></font> (including a space and an exclamation
point). For example, on Linux, you can use the command: <font color="#008000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">ssh
-p 2222 -X gtmuser@localhost</span></font></font> to connect as user
gtmuser to port 2222 on the host which is forwarded to port 22 on the
guest.</p>
<pre class="western">$ <font color="#008000">ssh -p 2222 -X gtmuser@localhost</font>
Welcome to Ubuntu 14.04.1 LTS (GNU/Linux 3.13.0-39-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Wed Nov 12 18:08:22 EST 2014

  System load: 0.48              Memory usage: 52%   Processes:       81
  Usage of /:  12.3% of 9.99GB   Swap usage:   0%    Users logged in: 0

  Graph this data and manage this system at:
    https://landscape.canonical.com/

Last login: Tue Nov 11 16:51:37 2014 from 10.0.2.2
gtmuser@gtmworkshop:~$ </pre><h3>
Download and install GT.M</h3>
<h4>Using the package manager</h4>
<p>If you are using Ubuntu Linux 14.04 LTS or later; or Debian
Jessie, Testing, or Unstable; or other Linux distributions that may
already have GT.M packages accessed using their normal package
managers, you may be able to install GT.M using the package manager,
e.g., <font color="#008000"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><span style="background: transparent">apt-get
install fis-gtm</span></font></font>. However, as this workshop is
intended to teach GT.M Administration and Operations, we will not use
this approach here.</p>
<h4>Using gtminstall</h4>
<p>gminstall is a script that downloads and installs the current GT.M
release. From
<a href="http://sourceforge.net/projects/fis-gtm/files/GT.M%20Installer">http://sourceforge.net/projects/fis-gtm/files/GT.M%20Installer</a>,
download the latest version of the GT.M installer (currently version
<span style="background: #00ff00">0.13</span>) into a temporary
directory, either using a browser, or a program such as wget, and
execute it.</p>
<p>Depending on your network configuration the wget command may need
environment variables to be set to go through proxy servers, and the
sudo command may require the -E option to pass your shell environment
to root process invoked by the sudo.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mkdir /tmp/tmp</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">cd /tmp/tmp</font>
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">wget http://sourceforge.net/projects/fis-gtm/files/GT.M%20Installer/v0.13/gtminstall</font>

...

gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">chmod +x gtminstall</font>
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">sudo ./gtminstall --utf8 default</font>
[sudo] password for gtmuser: 
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">ls -l /usr/lib/fis-gtm</font>
total 12
dr-xr-xr-x 5 root root 8192 Nov 13 10:57 V6.2-000_x86_64
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">cd</font>
gtmuser@gtmworkshop:~$ </pre><h4>
Traditional Technique</h4>
<p>First download GT.M for 64-bit GNU/Linux on the x86_64 platform
from Source Forge. This Acculturation Workshop is based on <span style="background: #00ff00">V6.2-000</span>;
you can use it or any more recent GT.M release. Download it to a
temporary directory, e.g., <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">/tmp</span></font>,
with the wget program: <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">wget
-P /tmp
http://sourceforge.net/projects/fis-gtm/files/GT.M-amd64-Linux/V6.2-000/gtm_V62000_linux_x8664_pro.tar.gz</span></font></font></p>
<p>Then create a temporary directory and unpack the contents of the
tarball into it. If you installed GT.M using the gtminstall
technique, you should already have a /tmp/tmp directory.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000"><span style="font-weight: normal">mkdir /tmp/tmp</span></font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">cd /tmp/tmp</font>
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">tar zxf ../gtm_V62000_linux_x8664_pro.tar.gz</font>
gtmuser@gtmworkshop:/tmp/tmp$ </pre><p>
Then install GT.M in <font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><span style="font-weight: normal">/usr/local/lib/fis-gtm/V6.2-000_x86_64</span></font>
– since the gtminstall script would have already installed a GT.M
in <font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><span style="font-weight: normal">/usr/lib/fis-gtm/V6.2-000_x86_64</span></font>.
Note that this must be done as root.</p>
<pre class="western">gtmuser@gtmworkshop:/tmp/tmp$ <font color="#ff0000">sudo ./configure</font>
[sudo] password for gtmuser: 
                     GT.M Configuration Script
Copyright 2009, 2014 Fidelity Information Services, Inc. Use of this
software is restricted by the provisions of your license agreement.

What user account should own the files? (bin) <font color="#0000ff">root</font>
What group should own the files? (bin) <font color="#0000ff">root</font>
Should execution of GT.M be restricted to this group? (y or n) <font color="#0000ff">n</font>
In what directory should GT.M be installed? <font color="#0000ff">/usr/local/lib/fis-gtm/V6.2-000_x86_64</font>

Directory /usr/local/lib/fis-gtm/V6.2-000_x86_64 does not exist. Do you wish to create it as part of
this installation? (y or n) <font color="#0000ff">y</font>

Installing GT.M....

Should UTF-8 support be installed? (y or n) <font color="#0000ff">y</font>
Should an ICU version other than the default be used? (y or n) <font color="#0000ff">n</font>

All of the GT.M MUMPS routines are distributed with uppercase names.
You can create lowercase copies of these routines if you wish, but
to avoid problems with compatibility in the future, consider keeping
only the uppercase versions of the files.

Do you want uppercase and lowercase versions of the MUMPS routines? (y or n)<font color="#0000ff">y</font>

Creating lowercase versions of the MUMPS routines.
./CHK2LEV.m ---&gt;  ./chk2lev.m
./CHKOP.m ---&gt;  ./chkop.m
./GENDASH.m ---&gt;  ./gendash.m

...

./_UCASE.m ---&gt;  ./_ucase.m
./_UTF2HEX.m ---&gt;  ./_utf2hex.m
./_XCMD.m ---&gt;  ./_xcmd.m

Compiling all of the MUMPS routines. This may take a moment.


Object files of M routines placed in shared library /usr/local/lib/fis-gtm/V6.2-000_x86_64/libgtmutil.so
Keep original .o object files (y or n)? <font color="#0000ff">n</font>


Installation completed. Would you like all the temporary files
removed from this directory? (y or n) <font color="#0000ff">y</font>
gtmuser@gtmworkshop:/tmp/tmp$ <font color="#0000ff">cd</font>
gtmuser@gtmworkshop:/tmp/tmp$ </pre><p>
GT.M is now installed and operational.</p>
<h3>Run GT.M</h3>
<h4>Default Environment</h4>
<p>GT.M needs several environment variables to be set up. GT.M
provides a script that sets up reasonable defaults and allows you to
start using GT.M immediately. When you set up environments in GT.M,
you should set up your own scripting, but the default is a good place
to start. You can source the file
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">/usr/lib/fis&nbsp;gtm/V6.2</span></font>&nbsp;<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">000_x86_64/gtmprofile</span></font>
to set up reasonable defaults or simply execute the script <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtm</span></font></font>
to execute GT.M. A default environment is created only if it does not
exist already.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">source /usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</font>
%GDE-I-GDUSEDEFS, Using defaults for Global Directory 
        /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld

GDE&gt; 
%GDE-I-EXECOM, Executing command file /usr/lib/fis-gtm/V6.2-000_x86_64/gdedefaults

GDE&gt; 
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file 
        /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld
Created file /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.dat
%GTM-I-JNLCREATE, Journal file /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
gtmuser@gtmworkshop:~$ </pre><p>
Sourcing gtmprofile also defines <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtm</span></font>
as an alias to the script <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtm</span></font>
that runs GT.M (but more on that later).</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">alias gtm</font>
gtm='/usr/lib/fis-gtm/V6.2-000_x86_64/gtm'
gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>
GTM&gt;</pre><p>
Now you are in the GT.M “direct mode” where you can execute
commands interactively. For example:</p>
<pre class="western">GTM&gt;<font color="#0000ff">set ^Capital(&quot;USA&quot;)=&quot;Washington&quot;</font>

GTM&gt;<font color="#0000ff">set ^Capital(&quot;India&quot;)=&quot;New Delhi&quot;</font>

GTM&gt;<font color="#0000ff">set ^Capital(&quot;Jordan&quot;)=&quot;Amman&quot;</font></pre><p>
The commands perform database updates, which are shared between
processes. You can see this if you start a new terminal session,
start a new GT.M process and ask it to dump the “global variable”
(a key-value association) <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">^Capital</span></font>.
The halt command takes you back to the Linux shell.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zwrite ^Capital</font>
^Capital(&quot;India&quot;)=&quot;New Delhi&quot;
^Capital(&quot;Jordan&quot;)=&quot;Amman&quot;
^Capital(&quot;USA&quot;)=&quot;Washington&quot;
GTM&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~$</pre><p>
The operation of GT.M is controlled by a number of environment
variables. In our exercise, the <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtmprofile</span></font>
script automatically sets a number of environment variables:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">env | grep ^gtm</font>
gtm_repl_instance=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.repl
gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
gtm_prompt=GTM&gt;
gtm_retention=42
gtmver=V6.2-000_x86_64
gtm_icu_version=5.2
gtmgbldir=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld
gtmroutines=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr/lib/fis-gtm/V6.2-000_x86_64/plugin/o(/usr/lib/fis-gtm/V6.2-000_x86_64/plugin/r) /usr/lib/fis-gtm/V6.2-000_x86_64/libgtmutil.so /usr/lib/fis-gtm/V6.2-000_x86_64
gtmdir=/home/gtmuser/.fis-gtm
gtm_etrap=Write:(0=$STACK) &quot;Error occurred: &quot;,$ZStatus,!
gtm_principal_editing=EDITING
gtm_tmp=/tmp/fis-gtm/V6.2-000_x86_64
gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
gtmuser@gtmworkshop:~$ </pre><p>
GT.M databases can also be configured so that they can be recovered
after a system crash. Simulate a crash right now by either clicking
on the “X” in the top right corner of your virtual machine
console window to instantly “power down” your virtual machine, or
if you started it headless, then performing a hard power-down using a
command on the host (in the case of virtualization using qemu/kvm on
Linux, a kill -9 of the virtual machine process). Then boot it, run
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtm</span></font>
and use a <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">zwrite
^Capital</span></font></font> command to confirm that the data in the
database is still intact.</p>
<p>The tree program shows the default environment GT.M creates in
your home directory. In this case, the output bolding and colors are
as displayed by the tree program, and not according to the
conventions of this document.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">tree .fis-gtm/</font>
.fis-gtm/
├── <font color="#0000ff"><b>r</b></font>
└── <font color="#0000ff"><b>V6.2-000_x86_64</b></font>
    ├── <font color="#0000ff"><b>g</b></font>
    │ ├── gtm.dat
    │ ├── gtm.gld
    │ ├── gtm.mjl
    │ ├── gtm.mjl_2014317131528
    │ ├── gtm.mjl_2014317131909
    │ └── gtm.mjl_2014317134042
    ├── <font color="#0000ff"><b>o</b></font>
    │ └── <font color="#0000ff"><b>utf8</b></font>
    └── <font color="#0000ff"><b>r</b></font>

6 directories, 6 files
gtmuser@gtmworkshop:~$ </pre><p>
We will get into this in more detail below.</p>
<h4>UTF-8 Mode</h4>
<p>With GT.M, you can write applications that implement international
character sets using Unicode or ISO/IEC-10646 (the two standards
track each other). Connect to the virtual machine with your terminal
emulator configured to support the UTF-8 character set. In a fresh
terminal session execute the following (the non-printable characters
may look different on your session from the screen here, depending on
how your terminal emulator renders them):</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">export gtm_chset=UTF-8 LC_CTYPE=en_US.utf8</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">source /usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>
GTM&gt;<font color="#0000ff">write $zchset</font>
UTF-8
GTM&gt;<font color="#0000ff">for i=1040:16:1072 write ! for j=0:1:15 write $char(i+j),&quot; &quot;</font>

А Б В Г Д Е Ж З И Й К Л М Н О П
Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я
а б в г д е ж з и й к л м н о п
GTM&gt;</pre><p>
Note that Unicode support requires additional infrastructure, such as
Unicode enabled terminal emulators, and is likely to require custom
collation modules to be written to ensure that strings such as names
are sorted in linguistically and culturally correct order.</p>
<p>In the exercises below, we will set up environments for use with
Unicode.</p>
<h2><a name="Basics"></a>The Basics</h2>
<p>To use GT.M, at a minimum you need:</p>
<ul>
	<li/>
<p>User documentation.</p>
	<li/>
<p>To specify the location of GT.M on your computer, in the
	<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtm_dist</span></font>
	environment variable.</p>
	<li/>
<p>To provide a search path for a GT.M process to routines –
	the <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtmroutines</span></font>
	environment variable and the $zroutines intrinsic special variable
	(or “ISV” - all ISVs are case insensitive, as are GT.M
	commands).</p>
	<li/>
<p>To map its global variables to database files – the
	<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">gtmgbldir</span></font>
	environment variable and the $zgbldir ISV point to a global
	directory file with the mapping.</p>
</ul>
<h3>User Documentation</h3>
<p>GT.M user documentation consists of manuals and technical
bulletins. Manuals are updated periodically, and technical bulletins
serve as user documentation updates that are available in a more
timely manner. Current GT.M documentation is available online at the
GT.M documentation site as well as a local copy on this CD. All
current GT.M documentation is accessible on the Internet Go to the
<a href="http://fis-gtm.com/" target="_blank">GT.M home page</a> and
click on the User Documentation tab.</p>
<p>GT.M documentation is organized into manuals, technical bulletins,
suggested practices and advisories:</p>
<ul>
	<li/>
<p>Manuals are published periodically. Every user manual
	incorporates information that is current as of the date of
	publication, i.e., in principle, a new manual obsoletes technical
	bulletins older than its publication date.</p>
	<li/>
<p>Technical bulletins contain information that is more timely
	than manuals.</p>
	<li/>
<p>Suggested practices are document what we think are
	wholesome approaches to ways of using GT.M.</p>
	<li/>
<p>Advisories are information that you should read and act on
	in a timely fashion – such as security alerts.</p>
</ul>
<h3>Routines in the File System</h3>
<p>Routines in GT.M are simply files in the file system; they do not
reside in databases. You can edit routines from the <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">GTM&gt;</span></font>
prompt. Start GT.M and at the <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">GTM&gt;</span></font>
prompt, type <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">zedit
&quot;hello&quot;</span></font></font> and hit ENTER. This starts the
vi editor editing the source routine for ^hello,
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r/hello.m</span></font>.
Use the five key sequence <font color="#ff0000">ESCAPE</font> <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><b>:</b></font></font>
<font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">q
</span></font></font><font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><b>!</b></font></font>
<font color="#ff0000">ENTER</font> to exit vi without changing the
file.</p>
<p><i>Note: although vi always puts a newline at the end of your
file; other editors may not. A GT.M program file should always end
with a newline.</i></p>
<p>The philosophy of GT.M is to focus on what it does well, providing
a robust, scalable, transaction processing database and a compiler
for the M language, and to leverage tools and capabilities of the
underlying operating system for the rest. This is powerful because
whenever there are enhancements to the underlying operating
environment, GT.M can benefit from them. It can also be a little
uncomfortable for M programmers migrating to GT.M, because
traditional M implementations carry their environments around with
them, like the shell on a snail's back.</p>
<p>As you saw when executing M commands interactively, even though
GT.M is a true compiler it still provides an interactive direct mode
– GT.M simply compiles and executes each line.</p>
<h4>Exercise – Compiling and Linking</h4>
<p>The purpose of this exercise is to understand compiling and
linking routines. Use the command <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">find
.fis-gtm -iname hello.[mo]</font></font><font color="#ff0000"> </font><font color="#000000">to
confirm that your default GT.M environment does not have a program
called hello.</font></p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">find .fis-gtm -iname hello.[mo]</font>
gtmuser@gtmworkshop:~$ </pre><p>
You can also perform the same operation from inside GT.M.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zsystem &quot;find .fis-gtm -iname hello.[mo]&quot;</font>
GTM&gt;

or

GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;) zwrite %ZR</font>
%ZR=0

GTM&gt;</pre><p>
Had there been a routine, the response might look like this:</p>
<pre class="western">GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;) zwrite %ZR</font>    
%ZR=1
%ZR(&quot;hello&quot;)=&quot;/home/gtmuser/.fis-gtm/r/&quot;

GTM&gt;</pre><p>
If you are not comfortable with the terse commands of the default <i>vi</i>
editor, you can install your preferred editor. Other editors that are
installed on the virtual machine are fte, jed, joe and nano. Nano may
be the easiest editor for you to use if you are not familiar with any
editor included with the virtual machine. In nano Ctrl-G provides a
screen with keyboard shortcuts.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">export EDITOR=`which nano`</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>
GTM&gt;</pre><p>
Instruct GT.M to run the routine ^hello and note that it reports an
error:</p>
<pre class="western">GTM&gt;<font color="#0000ff">do ^hello</font>
%GTM-E-ZLINKFILE, Error while zlinking &quot;hello&quot;
%GTM-E-FILENOTFND, File hello not found
GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;) zwrite %ZR</font>
%ZR=0
GTM&gt;</pre><p>
Within GT.M, use <font color="#0000ff">zedit &quot;hello&quot;</font>
to start the editor. Create a simple “Hello, World” program,save
it and return to GT.M. Now notice that the source file exists (you
can use the arrow key to recall the previous command within GT.M) but
there is no object file.</p>
<pre class="western">GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;) zwrite %ZR</font>
%ZR=1
%ZR(&quot;hello&quot;)=&quot;/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r/&quot;

GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;,&quot;OBJ&quot;) zwrite %ZR</font>
%ZR=0

GTM&gt;</pre><p>
Now run the program – it runs as expected.</p>
<pre class="western">GTM&gt;<font color="#0000ff">do ^hello</font>
Hello, World

GTM&gt;</pre><p>
Now you now also have an object file. GT.M dynamically, and
automatically, compiles the source program into the object program
when you execute <font color="#0000ff">do ^hello</font>.</p>
<pre class="western">GTM&gt;<font color="#0000ff">do SILENT^%RSEL(&quot;hello&quot;,&quot;OBJ&quot;) zwrite %ZR</font>
%ZR=1
%ZR(&quot;hello&quot;)=&quot;/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o/&quot;

GTM&gt;</pre><p>
[Note that since GT.M is a compiler, it can generate error messages
at compile time as well as at run time. Indeed when compiling an
application such as VistA, there may be hundreds of lines of error
messages triggered by lines of code that are legal for other M
implementations but not for GT.M. These lines are protected in VistA
and are inside conditional statements that are executed only on the
appropriate M implementation, so they are nothing to be concerned
about.]</p>
<p>Let's also get the time stamps of the files; notice that the
source code file is older than the object code file:</p>
<pre class="western"><font color="#000000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">GTM&gt;</font></font><font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">zsystem &quot;find .fis-gtm -name hello.[mo] -exec ls -l {} \;&quot;</font></font>
-rw-rw-r-- 1 gtmuser gtmuser 1048 Nov 14 11:15 .fis-gtm/V6.2-000_x86_64/o/hello.o
-rw-rw-r-- 1 gtmuser gtmuser 35 Nov 14 11:14 .fis-gtm/V6.2-000_x86_64/r/hello.m

GTM&gt;</pre><p>
Now edit the program with <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">zedit
&quot;hello&quot;</span></font></font> then change it, e.g., make it
print <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">&quot;Aloha,
World&quot;</span></font> instead and save it. 
</p>
<p>Again execute <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">do
^hello</span></font></font> and note that GT.M still prints <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">&quot;Hello,
World&quot;</span></font>. This is because GT.M already has an hello
module linked in its address space, and does not go out every time to
check if there is a new version. This is “clobber protection” and
a GT.M feature.</p>
<p>Execute <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">zLink
&quot;hello&quot;</span></font></font> which tells GT.M to re-link
hello even if it already has one linked in its address space,
followed by <font color="#0000ff"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">do
^hello</span></font></font> and note that it now prints <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">&quot;Aloha,
World&quot;</span></font> . Verify that the source file is newer and
that GT.M has created a new object file.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zedit &quot;hello&quot;</font>

GTM&gt;<font color="#0000ff">do ^hello</font>
Hello,world

GTM&gt;<font color="#0000ff">zlink &quot;hello&quot;</font>

GTM&gt;<font color="#0000ff">do ^hello</font>
Aloha, world

GTM&gt;<font color="#0000ff">zsystem &quot;find .fis-gtm -name hello.[mo] -exec ls -l {} \;&quot;</font>
-rw-rw-r-- 1 gtmuser gtmuser 1048 Nov 14 11:20 .fis-gtm/V6.2-000_x86_64/o/hello.o
-rw-rw-r-- 1 gtmuser gtmuser 35 Nov 14 11:20 .fis-gtm/V6.2-000_x86_64/r/hello.m

GTM&gt;</pre><p>
<i>To avoid being surprised by running an old version of a routine
that you have just edited, it is important to understand how dynamic
compilation and linking work on GT.M.</i></p>
<p>The $zroutines ISV tells GT.M where to find routines:</p>
<pre class="western">GTM&gt;<font color="#0000ff">write $zroutines</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr/lib/fis-gtm/V6.2-000_x86_64/plugin/o(/usr/lib/fis-gtm/V6.2-000_x86_64/plugin/r) /usr/lib/fis-gtm/V6.2-000_x86_64/libgtmutil.so /usr/lib/fis-gtm/V6.2-000_x86_64
GTM&gt;</pre><p>
<span style="background: #00ff00">V6.2-000</span>, the latest GT.M
release as of the date of this document, is used in this release of
the Acculturation Workshop. Future GT.M releases may by default
suffix one or more directories with an askerisk, e.g., instead of
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o</font>,
you may see <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o*</font>.
More on this below.</p>
<p>At process startup, $zroutines is initialized from the environment
variable $gtmroutines, but it can be altered from within the GT.M
process.</p>
<pre class="western">GTM&gt;<font color="#0000ff">set $zroutines=&quot;. &quot;_$ztrnlnm(&quot;gtm_dist&quot;)</font>

GTM&gt;<font color="#0000ff">write $zroutines</font>
. /usr/lib/fis-gtm/V6.2-000_x86_64
GTM&gt;<font color="#0000ff">write $ztrnlnm(&quot;gtmroutines&quot;)</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr/lib/fis-gtm/V6.2-000_x86_64
GTM&gt;</pre><p>
The ZEDIT command always puts new routines in the first source
directory in the search path. Use it to create a new routine to print
the current date and time at the Universal Time Coordinate. After the
change to $zroutines above, notice how a newly created program and
object file are created in the current directory (<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><b>.</b></font>).</p>
<pre class="western">GTM&gt;<font color="#0000ff">zedit &quot;UTC&quot;</font>
GTM&gt;<font color="#0000ff">zprint ^UTC</font>
UTC     zsystem &quot;TZ=UTC date&quot;
        quit

GTM&gt;<font color="#0000ff">do ^UTC</font>
Fri Nov 14 16:25:28 UTC 2014

GTM&gt;<font color="#0000ff">zsystem &quot;find . -name UTC\* -exec ls -l {} \;&quot;</font>
-rw-rw-r-- 1 gtmuser gtmuser 32 Nov 14 11:24 ./UTC.m
-rw-rw-r-- 1 gtmuser gtmuser 1000 Nov 14 11:25 ./UTC.o

GTM&gt;</pre><p>
GT.M also provides a mechanism for processes to indicate that instead
of explicitly relinking newer versions of routines, they would like
to “subscribe” to and automatically execute the latest updated
(“published”) object code of routines. Processes indicate this
interest by appending an asterisk (“<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*”</font>)
to each directory name from which they wish to execute the latest
object code.</p>
<p>Start a new session of GT.M (so that you don't have any routines
linked the old way), and modify $zroutines to append an asterisk (in
<font color="#ff00ff"><b>bolded light magenta</b></font> below) to
the object directory from which your routines are executed. If you
are using a version of GT.M newer than V6.2-000, the gtmprofile
script may already have appended the requisite asterisk. Then execute
the “hello” program to make the process link the object code:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>

GTM&gt;<font color="#0000ff">write $zroutines</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr/
lib/fis-gtm/V6.2-000_x86_64/plugin/o(/usr/lib/fis-gtm/V6.2-000_x86_64/plugin/r) /usr/lib/fis-gtm/V6.2-000_x86_64/
libgtmutil.so /usr/lib/fis-gtm/V6.2-000_x86_64
GTM&gt;<font color="#0000ff">set $zroutines=$piece($zroutines,&quot;4/o&quot;,1)_&quot;4/o*&quot;_$piece($zroutines,&quot;4/o&quot;,2)</font>

GTM&gt;<font color="#0000ff">write $zroutines</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o<font color="#ff00ff"><b>*</b></font>(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr
/lib/fis-gtm/V6.2-000_x86_64/plugin/o(/usr/lib/fis-gtm/V6.2-000_x86_64/plugin/r) /usr/lib/fis-gtm/V6.2-000_x86_64
/libgtmutil.so /usr/lib/fis-gtm/V6.2-000_x86_64
GTM&gt;<font color="#0000ff">do ^hello</font>
Aloha, world

GTM&gt;</pre><p>
In different GT.M process in a different shell session, after
appending the asterisk to the object directory, modify the “hello”
program to say “Aloha, Universe”. Note the use of the environment
variable gtm_prompt to differentiate it from the original session.
After editing it, run the routine, which will compile the new
version. They use the ZRUPDATE command to publish the new object
file:</p>
<pre class="western">GTM2&gt;<font color="#0000ff">set $zroutines=$piece($zroutines,&quot;4/o&quot;,1)_&quot;4/o*&quot;_$piece($zroutines,&quot;4/o&quot;,2)</font>

GTM2&gt;<font color="#0000ff">zedit &quot;hello&quot; ; modify it to print Aloha, universe</font>

GTM2&gt;<font color="#0000ff">do ^hello ; this ensures that the new version is compiled</font>
Aloha, universe

GTM2&gt;<font color="#0000ff">zrupdate $piece($zroutines,&quot;*&quot;,1)_&quot;/hello.o&quot; ; publish the object code</font>

GTM2&gt;</pre><p>
In the original session, again run the hello program, and notice that
even without an explicit zlink, it has the latest version of the
program:</p>
<pre class="western">GTM&gt;<font color="#0000ff">do ^hello</font>
Aloha, universe

GTM&gt;</pre><p>
The Programmers Guide explains the use of $ZROUTINES in more detail.</p>
<h4>Exercise – Default Directory Structure for An Application</h4>
<p>Use the <font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="font-weight: normal">tree
-d .fis-gtm</span></font></font> command from the shell to look at
the default directory structure under .fis-gtm. What is the purpose
of each directory?</p>
<h3>Global Directories Point to Global Variables</h3>
<p>Routines in GT.M reside in the file system rather than in the
database, whereas global variables reside in databases. Routines are
completely independent of global variables. In this respect, GT.M may
be different from other M implementations.</p>
<p>Given a person's name, a telephone directory helps you find the
person by giving you the phone number, and sometimes their address as
well. Analogously, given an M global variable name, a global
directory helps a GT.M process find the variable by giving it the
database file where that variable resides, as well as other pertinent
information.</p>
<p>The global directory is a binary file pointed to by the ISV
$zgbldir. The GDE utility program (invoked with do ^GDE inside GT.M
or mumps -run ^GDE from the shell) is used to manage global
directories. [Note that the input to GDE can be a text file. In a
production environment, FIS recommends that text files be used to
define database configurations, and that these text files be put
under version control.] 
</p>
<p>In GT.M, sets of M global variables (Names or Name spaces) are
mapped to Regions that define properties relating to the M global.
Each Region is mapped to a Segment that defines properties relating
to the file system. Consider the example in the figure below:</p>
<p><img src="data:image/png;base64,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" name="graphics3" align="left" width="932" height="621" border="0"><br clear="left"><br/>
<br/>

</p>
<p>In this example, there are four M global variables that we would
like to separate from the rest (e.g., for purposes of sharing globals
between applications, or for reasons of protection – perhaps they
contain special information, so that only herpetologists are to have
access to globals <b>^Gharial</b> and <b>^Jacare</b>, and only
ornithologists are to have access to globals <b>^Hoopoe</b> and
<b>^Trogon</b>). This is accomplished by creating five <i>Name Spaces</i>
(note that a name space can contain a single variable, as in this
example, or a range of global variables, e.g., everything starting
with <b>^A</b> through <b>^Gharial</b>). There is always a default
(<b>*</b>) name space.</p>
<p>One or more name spaces are mapped to a <i>Region</i>. All global
variables in a region share a common set of M global variable
properties, such as the maximum record length, whether null
subscripts are permitted, etc. In this case <b>^Gharial</b> and
<b>^Jacare</b> are mapped to the region <b>REPTILES</b>, whereas
<b>^Hoopoe</b> and <b>^Trogon</b> are mapped to the region <b>BIRDS</b>.
The default name space <b>*</b> is mapped to a region called <b>DEFAULT</b>.</p>
<p>Each region is mapped to a <i>Segment</i>. Just as a region
defines properties pertaining to M global variables, the segment
defines properties pertaining to the database file for that region,
such as the file name, the initial allocation, number of global
buffers, etc. The database file is just an ordinary file in the file
system of the underlying operating system.</p>
<p>Each database file can have a single active journal file. A
journal file can be linked to a previous journal files to form a
chain of journal files.</p>
<p>The ISV $zgbldir points a GT.M process to the global directory.
$zgbldir is initialized from <b>$gtmgbldir</b> at process startup,
but it can be modified by the process during execution.</p>
<pre class="western">GTM&gt;<font color="#0000ff">write $ztrnlnm(&quot;gtmgbldir&quot;)</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld
GTM&gt;<font color="#0000ff">write $zgbldir</font>
/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld
GTM&gt;</pre><p>
GDE, the Global Directory Editor, is a program used to manipulate
global directories. GDE is itself written in M, and you can invoke it
from the shell with <b>mumps -run GDE</b> (or, with the <b>gtm</b>
alias, <b>gtm -run GDE</b>) or from inside the direct mode with <font color="#0000ff"><b>do
^GDE</b></font>.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">$gtm_dist/mumps -run GDE</font>
%GDE-I-LOADGD, Loading Global Directory file
        <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld</font>
%GDE-I-VERIFY, Verification OK


GDE&gt;</pre><p>
You can use the show command to examine name spaces, regions and
segments.</p>
<pre class="western">GDE&gt; <font color="#0000ff">show -name</font>

         <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** NAMES ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Global                             Region</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*                                  DEFAULT</font>
GDE&gt;</pre><p>
In this case, there is only one name space, the default. There is
also only one region, DEFAULT. Region and segment names are case
insensitive, but name spaces are case sensitive, since M variable
names are case sensitive.</p>
<pre class="western">GDE&gt; <font color="#0000ff">show -region</font>

                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** REGIONS ***</font>
                                                                                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Std      Inst</font>
                                 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">--------------------------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED</font>

                          <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** JOURNALING INFORMATION ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">--------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.mjl</font>
                                                           <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Y      2308       2048       2048      8386560</font>

GDE&gt;</pre><p>
Notice the region parameters – review them in the Administration
and Operations Guide. Since there is one region, there is also one
segment, also called DEFAULT (the region and segment names can be
different; it is good practice to keep them the same).</p>
<pre class="western">GDE&gt; <font color="#0000ff">show -segment</font>

                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** SEGMENTS ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.dat</font>
                                                     <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BG  DYN  4096       5000 10000 GLOB=1000</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCK=  40</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">RES =   0</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">ENCR=OFF</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MSLT=1024</font>
GDE&gt;</pre><p>
Notice how the database file is defined using the environment
variables <b>$gtmdir</b> and <b>$gtmver</b>. This means that, as long
as the environment variables are defined, one global directory can
point to a database file wherever it happens to be on the system.
This can allow two processes to share a global directory, but to have
different database files.</p>
<p><i>Important: the parameters in the global directory are used only
by mupip create to create a new database file. At other times, the
global directory is used only to map global variable names to
database files. So, if you change the global directory, existing
database files are not changed. If you change a parameter in a
database file, unless you also change the global directory used to
create the database file, the next time you create that file, it will
use old parameters in the global directory.</i></p>
<p>The show map command gives a good visualization of mapping of
names to database files in the global directory.</p>
<pre class="western">GDE&gt; <font color="#0000ff">show -map</font>

                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** MAP ***</font>
   <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-  -  -  -  -  -  -  -  -  - Names -  -  - -  -  -  -  -  -  -</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">From                            Up to                            Region / Segment / File(def ext: .dat)</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">--------------------------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%                               ...                              REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = $gtmdir/$gtmver/g/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCAL LOCKS                                                      REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = $gtmdir/$gtmver/g/gtm.dat</font>
GDE&gt;</pre><h4>
Exercise – Set up the Global Directory for Herpetologists and
Ornithologists</h4>
<p>Start from the shell. Assign a value to <b>$gtmgbldir</b> so as to
not overwrite any existing global directory in the Acculturation
Workshop and then invoke GDE.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">export gtmgbldir=/home/gtmuser/gtm.gld</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-GDUSEDEFS, Using defaults for Global Directory
        <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/gtm.gld</font>

GDE&gt;</pre><p>
While not essential, it may be conceptually helpful to build the
global directory from the bottom up – first create the segments,
then the regions, and then the name spaces. First edit the default to
make the parameters more useful – the out-of-box defaults are
suitable for experimentation but not real use. Using a template
reduces the work needed to create multiple regions and segments.
Notice the use of different access methods for BIRDS and REPTILES.</p>
<pre class="western">GDE&gt; <font color="#0000ff">change -segment DEFAULT -block_size=4096 -allocation=1000 -extension=1000 -global_buffer_count=1000 -file_name=/home/gtmuser/gtm.dat</font>
GDE&gt; <font color="#0000ff">template -segment -access_method=bg -block_size=4096 -allocation=1000 -extension=1000 -global_buffer_count=1000</font>
GDE&gt; <font color="#0000ff">template -segment -access_method=mm -block_size=4096 -allocation=1000 -extension=1000 -global_buffer_count=1000</font>
GDE&gt; <font color="#0000ff">add -segment BIRDS -access_method=mm -file_name=/home/gtmuser/flap.dat</font>
GDE&gt; <font color="#0000ff">add -segment REPTILES -access_method=bg -file_name=/home/gtmuser/creep.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** SEGMENTS ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BIRDS                           /home/gtmuser/flap.dat</font>
                                                     <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MM  DYN  4096       1000  1000 DEFER</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCK=  40</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">RES =   0</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">ENCR=OFF</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MSLT=1024</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         /home/gtmuser/gtm.dat</font>
                                                     <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BG  DYN  4096       1000  1000 GLOB=1000</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCK=  40</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">RES =   0</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">ENCR=OFF</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MSLT=1024</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">REPTILES                        /home/gtmuser/creep.dat</font>
                                                     <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BG  DYN  4096       1000  1000 GLOB=1000</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCK=  40</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">RES =   0</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">ENCR=OFF</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MSLT=1024</font>
GDE&gt;
Then we can map the regions to the segments. Notice that the segment names (specified with the -dynamic qualifier) are converted to and displayed in upper case.
GDE&gt; <font color="#0000ff">change -region DEFAULT -stdnull -key_size=255 -record_size=4080 -journal=(before,file=&quot;/home/gtmuser/gtm.mjl&quot;)</font>
GDE&gt; <font color="#0000ff">template -region -stdnull -key_size=255 -record_size=4080 -journal=nobefore</font>
GDE&gt; <font color="#0000ff">add -region BIRDS -dynamic=birds -journal=(nobefore,file=&quot;/home/gtmuser/flap.mjl&quot;)</font>
GDE&gt; <font color="#0000ff">add -region REPTILES -dynamic=reptiles -journal=(before,file=&quot;/home/gtmuser/creep.mjl&quot;)</font>
GDE&gt; <font color="#0000ff">show -region</font>

                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** REGIONS ***</font>
                                                                                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Std      Inst</font>
                                 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">--------------------------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BIRDS                           BIRDS                              0     4080   255 NEVER      Y    Y   DISABLED DISABLED</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">REPTILES                        REPTILES                           0     4080   255 NEVER      Y    Y   DISABLED DISABLED</font>

                          <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** JOURNALING INFORMATION ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">--------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BIRDS                           /home/gtmuser/flap.mjl    N      2308       2048       2048      8386560</font>

 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         /home/gtmuser/gtm.mjl     Y      2308       2048       2048      8386560</font>

 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">REPTILES                        /home/gtmuser/creep.mjl   Y      2308       2048       2048      8386560</font>

GDE&gt;</pre><p>
Now map the name spaces to the regions.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">add -name Gharial -region=reptiles</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">add -name Jacare -region=reptiles</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">add -name Hoopoe -region=birds</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">add -name Trogon -region=birds</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">show -name</font></font>

         <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** NAMES ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Global                             Region</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*                                  DEFAULT</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Gharial                            REPTILES</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Hoopoe                             BIRDS</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Jacare                             REPTILES</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Trogon                             BIRDS</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt;</font></pre><p>
You can examine the entire map, and ask GDE to perform a check for
consistency.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">show -map</font></font>

                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** MAP ***</font>
   <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-  -  -  -  -  -  -  -  -  - Names -  -  - -  -  -  -  -  -  -</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">From                            Up to                            Region / Segment / File(def ext: .dat)</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-----------------------------------------------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%                               Gharial                          REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Gharial                         Gharial0                         REG = REPTILES</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = REPTILES</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/creep.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Gharial0                        Hoopoe                           REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Hoopoe                          Hoopoe0                          REG = BIRDS</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = BIRDS</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/flap.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Hoopoe0                         Jacare                           REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Jacare                          Jacare0                          REG = REPTILES</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = REPTILES</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/creep.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Jacare0                         Trogon                           REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Trogon                          Trogon0                          REG = BIRDS</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = BIRDS</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/flap.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Trogon0                         ...                              REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCAL LOCKS                                                      REG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">SEG = DEFAULT</font>
                                                                  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">FILE = /home/gtmuser/gtm.dat</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">verify</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GDE-I-VERIFY, Verification OK</font>


<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt;</font></pre><p>
Exiting GDE creates the global directory. You can then use a mupip
create command to create the database files. Notice that journal
files must be separately created.</p>
<pre class="western">GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file
        <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">/home/gtmuser/gtm.gld</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000"><span style="background: transparent">ls -l *.dat *.mjl</span></font>
ls: cannot access *.dat: No such file or directory
ls: cannot access *.mjl: No such file or directory
gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip create</font>
Created file /home/gtmuser/flap.dat
Created file /home/gtmuser/gtm.dat
Created file /home/gtmuser/creep.dat
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l *.dat *.mjl</font>
ls: cannot access *.mjl: No such file or directory
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:20 creep.dat
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:20 flap.dat
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:20 gtm.dat
<a href="mailto:gtmuser@gtmworkshop7">gtmuser@gtmworkshop</a>:~$</pre><p>
Then you can turn on journaling. As GT.M requires you to explicitly
specify the type of journaling to be used, you need separate commands
depending on the type of journaling – before image and no-before
image journaling.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -journal=nobefore -region BIRDS</font>
%GTM-I-JNLCREATE, Journal file /home/gtmuser/flap.mjl created for region BIRDS with NOBEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region BIRDS is now ON
gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -journal=before -region REPTILES,DEFAULT</font>
%GTM-I-JNLCREATE, Journal file /home/gtmuser/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
%GTM-I-JNLCREATE, Journal file /home/gtmuser/creep.mjl created for region REPTILES with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region REPTILES is now ON
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l *.dat *.mjl</font>
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:24 creep.dat
-rw-rw-rw- 1 gtmuser gtmuser   69632 Nov 17 17:24 creep.mjl
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:22 flap.dat
-rw-rw-rw- 1 gtmuser gtmuser   69632 Nov 17 17:22 flap.mjl
-rw-rw-rw- 1 gtmuser gtmuser 4366848 Nov 17 17:24 gtm.dat
-rw-rw-rw- 1 gtmuser gtmuser   69632 Nov 17 17:24 gtm.mjl
gtmuser@gtmworkshop:~$</pre><p>
For production environments, we suggest that you put your GDE
commands in a text file and invoke them with a heredoc or using GDE's
@ command. Put the text file under version control.</p>
<h3>$zroutines and $zgbldir vs. UCI &amp; Volume set</h3>
<p>The GT.M environment is defined by $ZROUTINES (initialized from
<b>$gtmroutines</b>) and $zgbldir (initialized from <b>$gtmgbldir</b>).
Concepts from other M implementations such as UCI and volume set do
not exist on GT.M.</p>
<p>The GT.M separation between routines and the database is very
powerful, especially in real-world environments. Apart from the
flexibility this offers, it enables the practice of “defensive
programming”, not unlike defensive driving. We are human beings who
are prone to err, and defensive practices reduce the probability of
errors.</p>
<h3>Exercise – Set up a Simulated ASP Environment</h3>
<p>In an Application Service Provider (ASP) environment, the same
application code can be used for a number of sites, but each site has
its own database. Sometimes parts of the database may also be common
and used on a read-only basis for normal operation, such as a data
dictionary, an approved drug formulary, or a table of sales tax rates
for location. Each site may also have a small set of custom routines.
Let us consider an ASP serving two institutions, called gh (for
General Hospital) and cc (for Cancer Center).</p>
<p>The majority of routines are shared, with:</p>
<ul>
	<li/>
<p>source routines that are independent of the GT.M version in
	<b>/opt/EHR/VOE10/r</b>,</p>
	<li/>
<p>source routines that are dependent on the GT.M version in
	<b>/opt/EHR/VOE10/V6.2-000_x86_64/r</b> (note that in the typical
	case, this directory will be empty, but if a release of GT.M has a
	new feature that a routine <b>XYZ.m</b> can take advantage of, you
	would put the new <b>XYZ.m</b> in this directory and leave the old
	<b>XYZ.m</b> in the previous directory), and</p>
	<li/>
<p>object files in <b>/opt/EHR/VOE10/V6.2-000_x86_64/o</b>.</p>
</ul>
<p>Custom routines for General Hospital in <b>/var/opt/EHR/VOE10/gh/r</b>
and <b>/var/opt/EHR/VOE10/gh/V6.2-000_x86_64/r</b> with object code
in <b>/var/opt/EHR/VOE10/gh/V6.2-000_x86_64/o</b>.</p>
<p>Similarly, custom routines for the Cancer Center are in
<b>/var/opt/EHR/VOE10/cc/r</b> and
<b>/var/opt/EHR/VOE10/cc/V6.2-000_x86_64/r</b> with object code in
<b>/var/opt/EHR/VOE10/cc/V6.2-000_x86_64/o</b>. 
</p>
<p><i>What should </i><i><b>$gtmroutines</b></i> <i>be for a GH user
and what should it be for a CC user? Create a shell script to be
sourced by a GH user and another to be sourced by a CC user.</i> <span style="font-variant: normal"><span style="font-style: normal">[The
shell scripts can reside in </span></span><span style="font-variant: normal"><span style="font-style: normal"><b>/var/opt/EHR/VOE10/cc/V6.2-000_x86_64</b></span></span>
<span style="font-variant: normal"><span style="font-style: normal">and
</span></span><span style="font-variant: normal"><span style="font-style: normal"><b>/var/opt/EHR/VOE10/gh/V6.2-000_x86_64</b></span></span><span style="font-variant: normal"><span style="font-style: normal">.]</span></span></p>
<p>The approved National Drug File is in the global variable <b>^PSNDF</b>
and is shared by both institutions with read only access to users.
The National Drug File is in the database file
<b>/opt/EHR/VOE10/V6.2-000_x86_64/g/psndf.dat</b>. All other globals
are in database files that are specific to GH and CC, in
<b>/var/opt/EHR/VOE10/gh/V6.2-000_x86_64/g/main.dat</b> and
<b>/var/opt/EHR/VOE10/cc/V6.2-000_x86_64/g/main.dat</b>.</p>
<p>First, create the directory structure.</p>
<pre class="western"><font color="#000000">gtmuser@gtmworkshop:~$ </font><font color="#ff0000">sudo mkdir -p /opt/EHR/VOE10</font>
<font color="#000000">gtmuser@gtmworkshop:~$ </font><font color="#ff0000">sudo chown -R gtmuser.users /opt/EHR/VOE10</font>
<font color="#000000">gtmuser@gtmworkshop:~$ </font><font color="#ff0000">cd /opt/EHR/VOE10 ; mkdir -p r V6.2-000_x86_64/r V6.2-000_x86_64/o V6.2-000_x86_64/g</font>
<font color="#000000">gtmuser@gtmworkshop:/opt/EHR/VOE10$ </font><font color="#ff0000">sudo mkdir -p /var/opt/EHR/VOE10</font>
<font color="#000000">gtmuser@gtmworkshop:/var/opt/EHR/VOE10$ </font><font color="#ff0000">sudo chown -R gtmuser.users /var/opt/EHR/VOE10</font>
<font color="#000000">gtmuser@gtmworkshop:/var/opt/EHR/VOE10$ </font><font color="#ff0000">cd /var/opt/EHR/VOE10 ; mkdir -p gh/r gh/V6.2-000_x86_64/r gh/V6.2-000_x86_64/o gh/V6.2-000_x86_64/g</font>
<font color="#000000">gtmuser@gtmworkshop:/var/opt/EHR/VOE10$ </font><font color="#ff0000">mkdir -p cc/r cc/V6.2-000_x86_64/r cc/V6.2-000_x86_64/o cc/V6.2-000_x86_64/g</font>
gtmuser@gtmworkshop:/var/opt/EHR/VOE10$ <font color="#ff0000">tree -d</font>
.
├── cc
│ ├── r
│ └── V6.2-000_x86_64
│     ├── g
│     ├── o
│     └── r
└── gh
 ├── r
 └── V6.2-000_x86_64
     ├── g
     ├── o
     └── r
12 directories
gtmuser@gtmworkshop:~$</pre><p>
<i>What should </i><i><b>$gtmgbldir</b></i> <i>be for a GH user and
what should it be for a CC user? Add these to the command files you
created earlier. Create a file of commands to be fed to GDE either
with a heredoc or with GDE's @ command that will create the global
directories and then create the global directories.</i></p>
<p><i>Create the three database files with mupip create (remember
that the database file <b>/opt/EHR/VOE10/V6.2-000_x86_64/ g/psndf.dat</b>
will be created by the first mupip create, and the second mupip
create will only create the institution specific database file.</i></p>
<p><i>In one environment assign values to the global variables <b>^PSNDF</b>
and <b>^X</b>. In the other environment, confirm that you are able to
read the value of <b>^PSNDF</b> (i.e., it is shared), but the not the
value in <b>^X</b> (i.e., it is not shared).</i></p>
<p><i>Set a value for <b>^X</b> in the second environment, and in the
first environment confirm that you still see the original value of <b>^X</b>
that you set up in that environment.</i></p>
<p><i>Create a program <b>ABC.m</b> to write “Hello, World” in
<b>/opt/EHR/VOE10/r</b> and two programs with the same name <b>DEF.m</b>
in <b>/var/opt/EHR/VOE10/gh</b> to write “Hello, General Hospital”
and in <b>/var/opt/EHR/VOE10/cc</b> to say “Hello, Cancer Center”.
Verify that a process in either environment gets “Hello, World”
when it executes <b>ABC.m</b> and either “Hello, General Hospital”
or “Hello, Cancer Center” depending on its environment when it
executes <b>DEF.m</b>.</i></p>
<h3>No Special Startup or Shut Down</h3>
<p>The first process to open a database file sets up all the shared
memory control structures needed. The last one out tears it down.
There is no daemon that must run with elevated provileges, that can
be a single point of failure, a performance bottleneck, or a
potential security vulnerability. Note that if replication is in use,
then at least one Source Server process (see below) must be brought
up first, but that is not a database daemon.</p>
<p>Upon bringing the system back up, if the system crashes, or is
forcibly brought down: if journaling is in use, mupip journal
-recover (or mupip journal -rollback if replication is in use) will
recover the database. If journaling is not in use, mupip rundown
-region &quot;*&quot; will clean up the database control structures
in the file header, but cannot fix any integrity errors resulting
from shutting down a computer without cleanly terminating GT.M
processes.</p>
<p>[Note: Do not use mupip rundown if journaling is in use and you
plan to recover the database after a crash with a mupip journal
operation.]</p>
<h3>GT.M Environment Variables</h3>
<p>The operation of GT.M is controlled by a number of environment
variables. The most important ones are <b>gtm_dist</b>, <b>gtmroutines</b>
and <b>gtmgbldir</b>, which are discussed above. The file <b>gtmprofile</b>
(for sh type shells) that is supplied with GT.M, and which must be
sourced rather than executed, attempts to provide reasonable default
values. By setting environment variables either before sourcing it or
after (the former is preferred, because <b>gtmprofile</b> can attempt
to deal with interactions), you can provide your own values instead
of using the defaults.</p>
<p>Review the file <b>/usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</b>
to see how the environment variables are set. Study the order in
which they are set and see if you can understand why.</p>
<p>The following environment variable is explicitly set by
<b>gtmprofile</b>:</p>
<ul>
	<li/>
<p><b>gtm_dist</b> – points to the directory where GT.M is
	installed.</p>
</ul>
<p>The following must be set before <b>gtmprofile</b> is sourced if
you want to run GT.M in UTF-8 mode:</p>
<ul>
	<li/>
<p><b>gtm_chset</b> – when it has the value <b>&quot;UTF-8&quot;</b>,
	GT.M operates in UTF-8 mode.</p>
</ul>
<p>Where possible, <b>gtmprofile</b> provides reasonable defaults for
any of the following that are not set:</p>
<ul>
	<li/>
<p><b>gtmdir</b> (not used by GT.M directly) – part of a
	default GT.M environment set by <b>gtmprofile</b>. <b>gtmprofile</b>
	uses this to create a default directory structure underneath, and
	sets other environment variables relative to <b>$gtmdir</b> and
	assuming a default directory structure underneath.</p>
	<li/>
<p><b>gtmgbldir</b> – points to the global directory.</p>
	<li/>
<p><b>gtm_icu_version</b> – this is meaningful only when
	<b>$gtm_chset</b> is <b>&quot;UTF-8&quot;</b>. GT.M requires libicu
	version <span style="background: #00ff00">3.6</span> or higher. If
	libicu has been compiled with symbol renaming enabled (as is the
	case with Ubuntu Linux), GT.M requires <b>gtm_icu_version</b> to be
	explictly set (see the release notes for your GT.M release). Note
	that ICU changed its version numbering system so that the version
	after 4.8 was 49. As GT.M retains the old numbering scheme, for ICU
	versions after 4.8, please set <b>gtm_icu_version</b> using the old
	scheme, e.g., if your Linux system has ICU version 52, set
	gtm_icu_version to 5.2.</p>
	<li/>
<p><b>gtm_log</b> – this is where the gtmsecshr process
	creates log files and all processes that use an installation of GT.M
	(from one directory) should have the same value of this environment
	variable. In conformance with the <a href="http://www.pathname.com/fhs/" target="_blank">Filesystem
	Hierarchy Standard</a> <b>/var/log/fis-gtm/$gtmver</b> is suggested
	(unless the same version of GT.M is installed in multiple
	directories).</p>
	<li/>
<p><b>gtm_principal_editing</b> – determines whether the
	previous input to a Read command can be recalled and edited before
	ENTER is pressed to submit it. Note: direct mode commands have a
	more extensive capability in this regard, independent of the value
	of this environment variable.</p>
	<li/>
<p><b>gtm_prompt</b> – if set, this is the GT.M direct mode
	prompt. If not set, the direct mode prompt is <b>&quot;GTM&gt;&quot;</b>.
	If you routinely work in different environments, you can use this to
	remind yourself which environment you are in, e.g., <b>&quot;DEV&gt;&quot;</b>
	for development, <b>&quot;TEST&gt;&quot;</b> for testing and <b>&quot;PROD&gt;&quot;</b>
	for production.</p>
	<li/>
<p><b>gtm_repl_instance</b> specifies the path to the
	replication instance file when database replication is in use. We
	suggest putting this file in the same directory as your global
	directory.</p>
	<li/>
<p><b>gtm_retention</b> (not used by GT.M directly) – used
	by the <b>gtm</b> script to delete old journal files and old
	temporary files it creates.</p>
	<li/>
<p><b>gtmroutines</b> – routine search path.</p>
	<li/>
<p><b>gtm_tmp</b> – socket files used for communication
	between gtmsecshr and GT.M processes go here. All processes that use
	an installation of GT.M should have the same value of this
	environment variable. We suggest <b>/tmp/fis-gtm/$gtmver</b> or
	<b>/var/tmp/fis-gtm/$gtmver</b> depending on your operating system
	and your local standards.</p>
	<li/>
<p><b>gtmver</b> (not used by GT.M directly) – part of a
	default GT.M environment set by <b>gtmprofile</b>.</p>
	<li/>
<p><b>LC_CTYPE</b> – a standard system environment variable
	used to specify a locale. When <b>$gtm_chset</b> has the value
	<b>&quot;UTF-8&quot;</b>, <b>$LC_CTYPE</b> must specify a UTF-8
	locale (e.g., <b>&quot;en_US.utf8&quot;</b>).</p>
</ul>
<p>GT.M directly or indirectly uses a number of other environment
variables that are not touched by <b>gtmprofile</b> (they can be set
before or after <b>gtmprofile</b> is sourced). These are documented
in the GT.M Administration and Operations Guide. Some worth noting
are:</p>
<ul>
	<li/>
<p><b>gtm_badchar</b> is used to initialize the setting of the
	VIEW command that determines whether GT.M should raise an error when
	it encounters an illegal UTF-8 character sequence.</p>
	<li/>
<p><b>gtm_baktmpdir</b> is used by mupip as the directory
	where it is to create temporary files for backup. Mupip online integ
	also creates temporary files in this directory if <b>gtm_snaptmpdir</b>
	is not defined.</p>
</ul>
<ul>
	<li/>
<p><b>gtm_dbkeys</b> (not used by GT.M directly) – used by
	the encryption reference plugin for the name of a file providing a
	list of database files and their corresponding key files.</p>
	<li/>
<p><b>gtm_fullblockwrites</b> specifies whether a GT.M process
	should write a full database block worth of bytes when writing a
	database block that is not full. Depending on your IO subsystem,
	writing a full block worth of bytes (even when there are unused
	garbage bytes at the end) may result in better database IO
	performance by replacing a read-modify-write low level IO operation
	with a single write operation.</p>
	<li/>
<p><b>gtm_nocenable</b> is used to specify that a Control-C on
	a terminal $Principal device should not cause the process to enter
	direct mode.</p>
	<li/>
<p><b>gtm_passwd</b> (not used by GT.M directly) – used by
	the encryption reference plugin to store the obfuscated (not
	encrypted) password to the GNU Privacy Guard key ring.</p>
	<li/>
<p><b>EDITOR</b> – a standard system environment variable
	that specifies the editor invoked by GT.M in response to the ZEDIT
	command (defaults to vi, if <b>$EDITOR</b> is not set).</p>
	<li/>
<p><b>TZ</b> – a standard system environment variable that
	specifies the timezone to be used by GT.M processes, if they are not
	to use the default system timezone (GT.M assumes the system clock is
	set to UTC).</p>
</ul>
<p>Here are the environment variables set by the default <b>gtmprofile</b>
file (which the <b>gtm</b> script sources).</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">env | grep ^gtm # No gtm environment variables defined initially</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">source /usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">env | grep ^gtm</font>
gtm_repl_instance=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.repl
gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
gtm_prompt=GTM&gt;
gtm_retention=42
gtmver=V6.2-000_x86_64
gtm_icu_version=5.2
gtmgbldir=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.gld
gtmroutines=/home/gtmuser/.fis-gtm/V6.2-000_x86_64/o(/home/gtmuser/.fis-gtm/V6.2-000_x86_64/r /home/gtmuser/.fis-gtm/r) /usr/lib/fis-gtm/V6.2-000_x86_64/plugin/o(/usr/lib/fis-gtm/V6.2-000_x86_64/plugin/r) /usr/lib/fis-gtm/V6.2-000_x86_64/libgtmutil.so /usr/lib/fis-gtm/V6.2-000_x86_64
gtmdir=/home/gtmuser/.fis-gtm
gtm_etrap=Write:(0=$STACK) &quot;Error occurred: &quot;,$ZStatus,!
gtm_principal_editing=EDITING
gtm_tmp=/tmp/fis-gtm/V6.2-000_x86_64
gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
gtmuser@gtmworkshop:~$ </pre><p>
While gtmprofile and gtm are good resources when you initially start
with GT.M, once you get to a certain level of expertise, you may
prefer to create your own scripting instead of <b>gtmprofile</b> and
<b>gtm</b>. 
</p>
<h2><a name="Security"></a>Security</h2>
<p>GT.M was designed from the very beginning to be secure. [Caveat:
absolute security does not exist in this universe. For a discussion
that bridges philosophy and technology, we highly recommend <a href="http://www.schneier.com/book-sandl.html" target="_blank">Bruce
Schneier's Secrets and Lies, ISBN 0-471-25311-1</a>.]A GT.M process
can access a database file only if the file ownership and permissions
allow. Under normal operation, there is only one small component of
GT.M that operates as the super user (root) – the <i>gtmsecshr</i>
helper process. The GT.M security model is simple, well understood
and documented.</p>
<p>Review the GT.M Security Philosophy and Implementation technical
bulletin.</p>
<h3>Exercise – Access Controls with Ownership and Permissions</h3>
<p>Start with a fresh session to discard environment variables from
the last exercise. In the following, notice how Linux file
permissions are used to allow user gtmuser full access to the
database, preventing another user from updating a database, while
allowing that user to read from it. 
</p>
<p>Verify that you can read and write your default database and
change the permissions to make it not accessible to the world, and to
make it read-only by others in the group.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l .fis-gtm/V6.2-000_x86_64/g/gtm.dat</font>
-rw-rw-rw- 1 gtmuser gtmuser 20783616 Nov 17 16:51 .fis-gtm/V6.2-000_x86_64/g/gtm.dat
gtmuser@gtmworkshop:~$ <font color="#ff0000">chmod o-rw,g-w .fis-gtm/V6.2-000_x86_64/g/gtm.dat</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l .fis-gtm/V6.2-000_x86_64/g/gtm.dat</font>
-rw-r----- 1 gtmuser gtmuser 20783616 Nov 17 16:51 .fis-gtm/V6.2-000_x86_64/g/gtm.dat
gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>

GTM&gt;<font color="#0000ff">set ^X=1</font>

GTM&gt;<font color="#0000ff">zwrite ^X</font>
^X=1

GTM&gt;<font color="#0000ff">halt</font></pre><p>
Create another user who is also a member of the group users. See that
usersuser can read from the database owned by gtmuser, but cannot
update it.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo useradd -g gtmuser -m staffuser</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo su - staffuser</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">pwd</font>
/home/staffuser
staffuser@gtmworkshop:~$ <font color="#ff0000">export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">export gtmver=V6.2-000_x86_64</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">export gtmdir=/home/gtmuser/.fis-gtm</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">export gtmgbldir=$gtmdir/$gtmver/g/gtm.gld</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">$gtm_dist/mumps -dir</font>

GTM&gt;<font color="#0000ff">zwrite ^X</font>
^X=1

GTM&gt;<font color="#0000ff">set ^X=2</font>
%GTM-E-DBPRIVERR, No privilege for attempted update operation for file: /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.dat

GTM&gt;<font color="#0000ff">halt</font>
staffuser@gtmworkshop:~$ <font color="#ff0000">exit</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo userdel staffuser</font>
<font color="#000000">gtmuser@gtmworkshop:~$ </font><font color="#ff0000">grep staffuser /etc/passwd</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo rm -rf /home/staffuser</font></pre><p>
There is an installation option to restrict access to GT.M to a
group. If you use this option, only those in the specified group will
be able to use GT.M.</p>
<p>It is extremely straightforward to create a user id that can only
login, run an application and log out.</p>
<h3>Exercise – Simulated ASP Environment with Isolation</h3>
<p>For this exercise look at the <a href="http://tinyurl.com/yjgub6f" target="_blank">instructions
for the WorldVistA EHR Four Slice Toaster MSC Fileman 1034 edition</a>
(you may need to download the file and open it in your browser).
Alternatively go to the <a href="http://sourceforge.net/projects/worldvista" target="_blank">WorldVistA
project at Source Forge</a> click on “View all files”, open
WorldVistA EHR VOE_ 1.0 and then open 2008-06 Four Slice Toaster MSC
FM 1034 and download the file
<b>WVEHRVOE10Release6-08Toaster4SliceMSCFM1034Readme.html</b>. Also,
download the file <b>WVEHRVOE10Release6-08Toaster4SliceMSCFM1034.zip</b>,
unzip it and open it according to the instructions in the Readme.</p>
<p>Login as <i>vistaadmin</i> / <i>vistaadmin</i> for administrator
access. Note how Clinic P users are members of the <i>gtm</i> group
and also members of the <i>clinicp</i> group and Clinic Q users are
members of the <i>gtm</i> group and the <i>clinicq</i> group and
neither has access to the databases of the other.</p>
<h2><a name="Journaling"></a>Journaling</h2>
<p>You should journal any databases whose integrity you care about.
Conversely, you need not journal any database that you are prepared
to delete &amp; recreate anew in the event of an untoward event like
a system crash.</p>
<p>GT.M, like virtually all high performance databases, uses
journaling (called “logging” by some databases) to restore data
integrity and provide continuity of business after an unplanned event
such as a system crash.</p>
<p>There are two switches to turn on journaling – ENABLE / DISABLE
and ON/OFF. Enabling or disabling journaling requires stand alone
access to the database. Turning journaling on and off can be done
when the database is in use. 
</p>
<h3>Exercise – Journaling with the Existing Database</h3>
<p>In this exercise, we will crash your virtual machine and then
recover the database. First, we'll just do it on the existing
database; then we will set up journaling from scratch.</p>
<p>First, clean out old journal files. Verify that there are no
shared memory segments in use. Then go into GT.M and perform a
database operation and verify that there is now a new shared memory
segment.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">rm -f .fis-gtm/V6.2-000_x86_64/g/gtm.mjl_*</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">ipcs -m</font>

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status

gtmuser@gtmworkshop:~$ <font color="#ff0000">/usr/lib/fis-gtm/V6.2-000_x86_64/gtm</font>

GTM&gt;<font color="#0000ff">set ^X=$zdate($horolog,&quot;MON DD, YEAR&quot;) ; opens database file and creates a shared memory segment</font>

GTM&gt;<font color="#0000ff">zwrite ^X</font>
^X=&quot;DEC 01, 2014&quot;

GTM&gt;<font color="#0000ff">zsystem &quot;ipcs -m&quot;</font>

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x00000000 65536      gtmuser    660        7208960    1


GTM&gt;</pre><p>
Now kill the virtual machine by clicking on the “X” of the
console window, or with a kill -9 of the virtual machine process, and
then reboot it. Go back into GT.M and verify that the data is still
there. Instead of running the gtm script (which performs an automatic
recovery), run mumps and try to access the database. Note: you should
not run the gtm script for this exercise, since it performs a
recovery as part of its operation.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">source /usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -dir</font></font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">zwrite ^X</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GTM-E-REQRECOV, Error accessing database /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.dat.  Must be recovered on cluster node gtmworkshop.</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GTM-I-TEXT, Error with database control shmctl</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%SYSTEM-E-ENO22, Invalid argument</font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">zsystem &quot;ls -l $gtmdir/$gtmver/g&quot; ; notice the journal file</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">total 1008</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-rw-r----- 1 gtmuser gtmuser 20783616 Dec  1 11:48 gtm.dat</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-rw-rw-r-- 1 gtmuser gtmuser     1536 Nov 13 13:14 gtm.gld</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-rw-r----- 1 gtmuser gtmuser    69632 Dec  1 11:48 gtm.mjl</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-rw-r----- 1 gtmuser gtmuser    69632 Nov 20 17:29 gtm.mjl_2014335114732</font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">zsystem &quot;ipcs -m&quot; ; and there are no shared memory segments indicating an open database</font></font>


<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">------ Shared Memory Segments --------</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">key        shmid      owner      perms      bytes      nattch     status      </font>


<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">zsystem &quot;ls -lR $gtm_tmp&quot; ; and no log files from the gtm script</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/tmp/fis-gtm/V6.2-000_x86_64:</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">total 0</font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><font color="#000000">GTM&gt;</font><font color="#0000ff">halt</font></font></pre><p>
Now, try the <b>gtm</b> script instead of running the <b>mumps</b>
executable directly.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">gtm</font>

GTM&gt;<font color="#0000ff">zwrite ^X ; database access works</font>
^X=&quot;DEC 01, 2014&quot;

GTM&gt;<font color="#0000ff">zsystem &quot;ls -l $gtmdir/$gtmver/g&quot; ; there are two new journal files</font>
total 1144
-rw-r----- 1 gtmuser gtmuser 20783616 Dec  1 11:58 gtm.dat
-rw-rw-r-- 1 gtmuser gtmuser     1536 Nov 13 13:14 gtm.gld
-rw-r----- 1 gtmuser gtmuser    69632 Dec  1 11:58 gtm.mjl
-rw-r----- 1 gtmuser gtmuser    69632 Nov 20 17:29 gtm.mjl_2014335114732
-rw-r----- 1 gtmuser gtmuser    69632 Dec  1 11:58 gtm.mjl_2014335115831
-rw-r----- 1 gtmuser gtmuser    69632 Dec  1 11:58 gtm.mjl_2014335115832

GTM&gt;<font color="#0000ff">zsystem &quot;ipcs -m&quot; ; there is a shared memory segment for the open database file</font>

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x00000000 65536      gtmuser    660        7208960    1 


GTM&gt;<font color="#0000ff">zsystem &quot;ls -lR $gtm_tmp&quot; ; and log files from the commands in the gtm script</font>
/tmp/fis-gtm/V6.2-000_x86_64:
total 8
-rw-rw-r-- 1 gtmuser gtmuser 617 Dec  1 11:58 gtmuser_20141201165831UTC_mupip_recover
-rw-rw-r-- 1 gtmuser gtmuser 339 Dec  1 11:58 gtmuser_20141201165831UTC_mupip_set

GTM&gt;<font color="#0000ff">halt</font></pre><p>
How did the recovery happen? The answer is in the <b>gtm</b> script.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cat `which gtm`</font>
#!/bin/sh
#################################################################
#                                                               #
#       Copyright 2010,2013 Fidelity Information Services, Inc  #
#                                                               #
#       This source code contains the intellectual property     #
#       of its copyright holder(s), and is made available       #
#       under a license.  If you do not know the terms of       #
#       the license, please stop and do not read further.       #
#                                                               #
#################################################################
if [ ! -f &quot;/usr/lib/fis-gtm/V6.2-000_x86_64&quot;/gtmprofile ] ; then echo Cannot find file &quot;/usr/lib/fis-gtm/V6.2-000_x86_64&quot;/gtmprofile to source
else
    . &quot;/usr/lib/fis-gtm/V6.2-000_x86_64&quot;/gtmprofile
    timestamp=`date -u +%Y%m%d%H%M%S`&quot;UTC&quot;
    ( cd `dirname $gtmgbldir` ; \
        $gtm_dist/mupip journal -recover -backward &quot;*&quot; 2&gt;$gtm_tmp/&quot;$USER&quot;_$timestamp&quot;_mupip_recover&quot; &amp;&amp; \
        $gtm_dist/mupip set -journal=&quot;on,before&quot; -region &quot;*&quot; 2&gt;$gtm_tmp/&quot;$USER&quot;_$timestamp&quot;_mupip_set&quot; &amp;&amp; \
        find . -name \*.mjl_\* -mtime +$gtm_retention -exec rm -vf {} \; )
    if [ 0 = $# ] ; then
        $gtm_dist/mumps -direct
    elif [ &quot;-help&quot; = &quot;$1&quot; -o &quot;-h&quot; = &quot;$1&quot; -o &quot;-?&quot; = &quot;$1&quot; ] ; then
        echo &quot;gtm -dir[ect] to enter direct mode (halt returns to shell)&quot;
        echo &quot;gtm -run &lt;entryref&gt; to start executing at an entryref&quot;
        echo &quot;gtm -help / gtm -h / gtm -? to display this text&quot;
    else
        $gtm_dist/mumps $*
    fi
    ( cd `dirname $gtmgbldir` \
        $gtm_dist/mupip rundown -region &quot;*&quot; 2&gt;$gtm_tmp/&quot;$USER&quot;_$timestamp&quot;-&quot;`date -u +%Y%m%d%H%M%S`&quot;UTC_mupip_rundown&quot; )
    find $gtm_tmp -name &quot;$USER&quot;_\* -mtime +$gtm_retention -exec rm -f {} \;
fi
gtmuser@gtmworkshop:~$  </pre><p>
The mupip journal recover command performs the recovery. Review the
output of the mupip commands – as new journal files are created,
older journal files being renamed. Each journal file has a
back-pointer to its predecessor. The <b>gtm</b> script removes
non-current journal files and temporary files, those older than the
number of days specified by the <b>$gtm_retention</b> environment
variable.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cat $gtm_tmp/gtmuser_20111107223555UTC_mupip_recover</font>
%GTM-I-MUJNLSTAT, Initial processing started at Mon Dec  1 11:58:31 2014
%GTM-I-MUJNLSTAT, Backward processing started at Mon Dec  1 11:58:31 2014
%GTM-I-MUJNLSTAT, Before image applying started at Mon Dec  1 11:58:31 2014
%GTM-I-FILERENAME, File /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl is renamed to /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl_2014335115831
%GTM-I-MUJNLSTAT, Forward processing started at Mon Dec  1 11:58:32 2014
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Recover successful
%GTM-I-MUJNLSTAT, End processing at Mon Dec  1 11:58:32 2014
gtmuser@gtmworkshop:~$ <font color="#ff0000">cat $gtm_tmp/gtmuser_20111107223555UTC_mupip_set</font> 
%GTM-I-FILERENAME, File /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl is renamed to /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl_2014335115832
%GTM-I-JNLCREATE, Journal file /home/gtmuser/.fis-gtm/V6.2-000_x86_64/g/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
gtmuser@gtmworkshop:~$ </pre><p>
Look at the animation of journaling in action at the beginning of
Chapter 6 (GT.M Journaling) in the GT.M Administration and Operations
Guide UNIX Edition.</p>
<h4>Notes on File System Configuration</h4>
<p>Robust operation of GT.M recovery after a crash requires robust
recovery of the file system. If your file system requires an option
to ensure that meta-data is written to disk only after the
corresponding data is written, ensure that it is set.</p>
<h3>Exercise – Journaling from Scratch</h3>
<p><i>Create a directory (e.g., <b>myApp</b>) in your home directory.
In it create a global directory that maps all variables starting with
A or a in <b>aA.dat</b> and others in <b>others.dat</b>. Create the
database files. Then enable and turn on before image journaling for
both files. Start a process and update both databases. With the
process open, kill the virtual machine. Reboot the virtual machine,
see for yourself that you cannot access the database, then recover
the database (which consists of two database files) and demonstrate
that you can now access the database.</i></p>
<p>Hints:</p>
<ul>
	<li/>
<p>Start with an environment that does not have GT.M
	environment variables already defined, e.g., from sourcing the
	gtmprofile file. You can always logout and login to get a fresh
	session</p>
	<li/>
<p>Create an <b>gtmenv</b> file in the directory to set up the
	environment variables. You can then source it with a command such as
	<b>source ./gtmenv</b> to set up the environment. Set up the
	environment variables yourself and do not <b>source
	/usr/lib/fis-gtm/V6.2-000_x86_64/gtmprofile</b> because it will
	recover the database when you source it and you will miss the point
	of the exercise. At a minimum, the <b>env</b> file should specify
	values for the following environment variables: <b>gtm_dist</b> (set
	to <b>/usr/lib/fis-gtm/V6.2-000_x86_64</b>), <b>gtmgbldir</b> (set
	to <b>$HOME/myApp/gtm.gld</b>), <b>gtm_log</b> and <b>gtm_tmp</b>
	(set to <b>/tmp/fis-gtm/V6.2-000_x86_64</b>; make sure it exists),
	<b>gtm_principal_editing</b> (set to <b>EDITING</b>), <b>gtmroutines</b>
	(set to <b>&quot;$HOME/myApp* $gtm_dist/libgtmutil.so&quot;</b>).
	Make sure the directory <b>/tmp/fis-gtm/V6.2-000_x86_64</b> exists
	by creating it in the <b>gtmenv</b> file with a <b>mkdir -p</b>
	command. It may be convenient to alias <b>mumps</b> to
	<b>$gtm_dist/mumps</b> and <b>mupip</b> to <b>$gtm_dist/mupip</b>.
	[Hint: if you read a little further, you may find a <b>gtmenv</b>
	file that you can copy and paste into an editor.]</p>
	<li/>
<p>In GDE, source the commands in the file
	<b>/usr/lib/fis-gtm/V6.2-000_x86_64/gdedefaults</b> to set
	reasonable defaults for the global directory and then change the
	database file names in the segment and the journal file names in the
	region to place the database and journal files in
	<b>/home/gtmuser/myApp</b>.</p>
	<li/>
<p>Look at the example with herpetologists and ornithologists
	for commands to set up journaling.</p>
	<li/>
<p>You do not have to specify the journal file names for
	recovery – you can simply specify <b>&quot;*&quot;</b>.</p>
</ul>
<h2><a name="Replication"></a>Database Replication</h2>
<p>When an application must have the best possible continuity of
business, use database replication in addition to before image
journaling to create a logical multi site configuration. A major
restriction of GT.M replication today is the 20,000 kilometer
distance restriction on replication (since the circumference of
Planet Earth is approximately 40,000 kilometers, it is difficult to
place data centers more than 20,000 kilometers apart). In our
example, we will simulate data centers in Cape Town (34°S, 19°E),
Philadelphia (40°N, 75°W) and Shanghai (31°N, 122°E). Cape Town
to Philadelphia is 12,550 kilometers, Philadelphia to Shanghai is
11,900 kilometers, and Shanghai to Cape Town is 12,900 kilometers
(information courtesy <a href="http://gcmap.com/" target="_blank">Great
Circle Mapper</a>).</p>
<h3>Exercise - Replication</h3>
<p>Because replication builds on journaling, use the directory <b>myApp</b>
created above. Enhance the shell script <b>gtmenv</b> to assign
values to two more environment variables, <b>gtm_repl_instance</b>
and <b>gtm_repl_instname</b>. gtm_repl_instance is the name of a
replication instance file where a replicated instance stores
information about the state of replication and gtm_repl_instance is
the name of an instance – in this case, dummy, but we will change
it as we create copies of the instances.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cd myApp ; cat gtmenv</font>
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/myApp/gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/myApp/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$HOME/myApp* $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip</pre><p>
Turn on replication and journaling (remember to source <b>gtmenv</b>
to set the environment variables first)</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -replication=on -region &quot;*&quot;</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014335181257
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-PREVJNLLINKCUT, Previous journal file name link set to NULL in new journal file /home/gtmuser/myApp/aA.mjl created for database file /home/gtmuser/myApp/aA.dat
%GTM-I-JNLSTATE, Journaling state for region A is now ON
%GTM-I-REPLSTATE, Replication state for region A is now ON
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014335181257
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-PREVJNLLINKCUT, Previous journal file name link set to NULL in new journal file /home/gtmuser/myApp/others.mjl created for database file /home/gtmuser/myApp/others.dat
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
%GTM-I-REPLSTATE, Replication state for region DEFAULT is now ON</pre><p>
Create the following shell scripts inside <b>myApp</b> and make them
executable:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cat originating_stop</font> 
#!/bin/sh
$gtm_dist/mupip replicate -source -shutdown -timeout=0
$gtm_dist/mupip rundown -region &quot;*&quot;
gtmuser@gtmworkshop:~$ <font color="#ff0000">cat replicating_start</font> 
#!/bin/sh
$gtm_dist/mupip replicate -source -start -passive -instsecondary=dummy -buffsize=1048576 -log=$HOME/myApp/source_dummy.log
$gtm_dist/mupip replicate -receive -start -listenport=3000 -buffsize=1048576 -log=$HOME/myApp/receive.log
gtmuser@gtmworkshop:~$ <font color="#ff0000">cat replicating_stop</font>
#!/bin/sh
$gtm_dist/mupip replicate -receive -shutdown -timeout=0
$gtm_dist/mupip replicate -source -shutdown -timeout=0
$gtm_dist/mupip rundown -region &quot;*&quot;
gtmuser@gtmworkshop:~$ <font color="#ff0000">chmod +x {originating_stop,replicating_*}</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l {originating_stop,replicating_*}</font>
-rwxrwxr-x 1 gtmuser gtmuser  81 Dec  1 18:17 originating_stop
-rwxrwxr-x 1 gtmuser gtmuser 219 Dec  1 18:19 replicating_start
-rwxrwxr-x 1 gtmuser gtmuser 127 Dec  1 18:16 replicating_stop
gtmuser@gtmworkshop:~$ </pre><p>
You can delete the prior generation journal files, just to keep the
directory clean:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">rm *.mjl_*</font>
gtmuser@gtmworkshop:~$ </pre><p>
Shut down the Acculturation Workshop virtual machine and make three
copies of the Acculturation Workshop called <b>Philadelphia.vmdk</b>,
<b>Shanghai.vmdk</b> and <b>CapeTown.vmdk</b>. Alternatively, if your
host system is short of disk space, make two copies and rename the
original <b>ubuntu-14.04_gtmworkshop9.vmdk</b> file.</p>
<p>If you are using qcow2 or vmdk disk images with QEMU/kvm on Linux,
you can use a feature that allows a disk image to be created off a
base image so that the base image does not change and all changes go
to the new disk image. Check with your virtualization software to
determine whether it supports this feature. Execute commands such as
the following on the host (with the guest shut down) – depending on
the version of QEMU/kvm on your PC, the exact command may vary</p>
<pre class="western">$ <font color="#008000">qemu-img create -f vmdk -o zeroed_grain,backing_file=ubuntu-14.04_gtmworkshop9.vmdk Philadelphia.vmdk</font>
Formatting ' Philadelphia.vmdk', fmt=vmdk size=10737418240 backing_file='ubuntu-14.04_gtmworkshop9.vmdk' compat6=off zeroed_grain=on
$</pre><p>
Now boot the three virtual machines. Each virtual machine will need
two ports to be forwarded from the host, one for ssh access forwarded
to port 22 on each virtual machine and one for replication forwarded
to port 3000 on each virtual machine (i.e., a total of six ports on
the host for the three instances). The examples here use host ports
2221 &amp; 4000 for Cape Town, 2222 &amp; 5000 for Philadelphia, and
2223 &amp; 6000 for Shanghai. The commands given here use kvm on
Linux – use the commands appropriate to virtualization on your
host).</p>
<pre class="western"><font color="#008000">kvm -enable-kvm -cpu host -m 256 -display none -net nic -net user,hostfwd=tcp::2221-:22,hostfwd=tcp::4000-:3000 -hda CapeTown.vmdk &amp;</font>
<font color="#008000">kvm -enable-kvm -cpu host -m 256 -display none -net nic -net user,hostfwd=tcp::2222-:22,hostfwd=tcp::5000-:3000 -hda Philadelphia.vmdk &amp;</font>
<font color="#008000">kvm -enable-kvm -cpu host -m 256 -display none -net nic -net user,hostfwd=tcp::2223-:22,hostfwd=tcp::6000-:3000 -hda Shanghai.vmdk &amp;</font></pre><p>
To avoid confusion when you are working with multiple machine, change
the name of each machine from GT.M workshop to its location. The
examples here are from the Cape Town machine. You should do likewise
with Philadelphia and Shanghai. To effect a name change will need to
(as root) edit the files <b>/etc/hosts</b> and <b>/etc/hostname</b>
to change <b>gtmworkshop</b> to <b>capetown</b> and then reboot. 
</p>
<pre class="western">gtmuser@capetown:~$ <font color="#ff0000">cat /etc/hosts</font>
127.0.0.1       localhost
127.0.1.1       capetown

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
gtmuser@capetown:~$ <font color="#ff0000">cat /etc/hostname</font>
capetown
gtmuser@capetown:~$ </pre><p>
You may also want to change the window / tab labels on your terminal
emulator on the host to show which machine each session is connected
to, for example:</p>
<p><img src="data:image/png;base64,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" name="graphics2" align="left" width="852" height="503" border="0"><br clear="left"><br/>
<br/>

</p>
<p>To make it more realistic (and to reduce the probability of
operator error) on each machine, execute <font color="#ff0000"><span style="font-weight: normal">sudo
dpkg-reconfigure tzdata</span></font> to specify the “local” time
zone. Select New York for Philadelphia and Johannesburg for Cape
Town.</p>
<p>In each machine. Edit <b>myApp/env</b> in each instance and change
the line <b>export gtm_repl_instname=dummy</b> and the line <b>export
gtm_repl_instance=/home/gtmuser/myApp/gtm.repl</b> to an instance
file name for that instance. For example, on the Cape Town instance:</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">cat gtmenv</font> 
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/myApp/gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/myApp/gtm.repl
export gtm_repl_instname=CapeTown
export gtmroutines=&quot;$HOME/myApp* $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@capetown:~$</pre><p>
Then on each instance create a replication instance file.</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">ls -l *.repl</font>
ls: cannot access myApp/*.repl: No such file or directory
gtmuser@capetown:~/myApp$ <font color="#ff0000">source gtmenv </font>
gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip replicate -instance_create</font>
gtmuser@capetown:~/myApp$ <font color="#ff0000">ls -l *.repl</font>
-rw-rw-r-- 1 gtmuser gtmuser 1536 2011-11-10 00:47 myApp/capetown.repl
<font color="#000000">gtmuser@capetown:~/myApp$ </font><font color="#ff0000"> </font></pre><p>
Start the configuration with Philadelphia as the originating primary
instance, and Cape Town and Shanghai in replicating secondary roles.
The following commands, on the three instances can be executed in any
order.</p>
<p>Start Shanghai as a replicating instance.</p>
<pre class="western">gtmuser@shanghai:~<font color="#000000">/myApp</font>$ <font color="#ff0000">./replicating_start</font> 
Wed Dec  3 03:08:09 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@shanghai:~<font color="#000000">/myApp</font>$ </pre><p>
Start Cape Town as a replicating instance.</p>
<pre class="western">gtmuser@capetown:~<font color="#000000">/myApp</font>$ <font color="#ff0000">./replicating_start</font>
Tue Dec  2 21:08:01 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@capetown:~<font color="#000000">/myApp</font>$</pre><p>
Start Philadelphia as an originating instance replicating to Cape
Town and Shanghai (notice the use of ports on the host to reach the
different replicating instances in the virtual machines).</p>
<pre class="western">gtmuser@philadelphia:~<font color="#000000">/myApp</font>$ <font color="#ff0000">mupip replicate -source -start -instsecondary=CapeTown -secondary=10.0.2.2:4000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_CapeTown.log</font>
Tue Dec  2 14:12:25 2014 : Initiating START of source server for secondary instance [CapeTown]
gtmuser@philadelphia:~<font color="#000000">/myApp</font>$ <font color="#ff0000">mupip replicate -source -start -instsecondary=Shanghai -secondary=10.0.2.2:6000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_Shanghai.log</font>
Tue Dec  2 14:12:53 2014 : Initiating START of source server for secondary instance [Shanghai]
gtmuser@philadelphia:~<font color="#000000">/myApp</font>$</pre><p>
Start a GT.M process in Philadelphia and perform some database
updates:</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">set ^Weather(&quot;Philadelphia&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Rainy&quot;</font></pre><p>
Verify that the data is replicated at Cape Town and Shanghai. Execute
the following at both instances:</p>
<pre class="western">gtmuser@shanghai:~/myApp$ mumps -dir

GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;

GTM&gt;</pre><p>
Bring down Shanghai (simulating system maintenance, or a network
outage), but leave Cape Town untouched.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">./replicating_stop</font> 
Signalling immediate shutdown
Wed Dec  3 03:24:46 2014 : Initiating shut down
Wed Dec  3 03:24:47 2014 : Receive pool shared memory removed
Wed Dec  3 03:24:47 2014 : Receive pool semaphore removed
Wed Dec  3 03:24:47 2014 : Signalling shutdown immediate
Wed Dec  3 03:24:47 2014 : Initiating SHUTDOWN operation on source server pid [1009] for secondary instance [dummy]
Wed Dec  3 03:24:47 2014 : Waiting for upto [180] seconds for the source server to shutdown
Wed Dec  3 03:24:49 2014 : Journal pool shared memory removed
Wed Dec  3 03:24:49 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@shanghai:~/myApp$ </pre><p>
Create another update in Philadelphia.</p>
<pre class="western" style="margin-top: 0.14in; margin-bottom: 0.2in"><font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><font color="#000000">GTM&gt;</font><font color="#0000ff">set ^Weather(&quot;Philadelphia&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Sunny&quot;</font></font></font></pre><p>
Verify that this is updated in Cape Town.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51921)=&quot;Sunny&quot;

GTM&gt;</pre><p>
But it is not replicated in Shanghai.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;

GTM&gt;</pre><p>
Restart Shanghai as a replicating instance and notice that it catches
up with updates at the originating instance when replication was not
active in Shanghai.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">myApp/replicating_start </font>
Thu Nov 10 07:33:47 2011 : Initiating START of source server for secondary instance [dummy]
gtmuser@shanghai:~/myApp$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51921)=&quot;Sunny&quot;

GTM&gt;</pre><p>
Now, simulate an unplanned outage of Philadelphia by clicking on the
“X” of the virtual machine console window, <b>kill -9</b> of the
process on the host, or otherwise powering down the virtual machine.
Make Shanghai the new originating instance Cape Town its replicating
instance. [In a controlled switchover / planned outage, bringing down
the originating primary first helps to ensure that you do not have
two concurrently operating originating primary instances.]</p>
<p>Bring down Shanghai as a replicating instance and bring it up as
the originating instance. Notice that you can bring up the Source
Server process to replicate to Philadelphia – it will make the
connection when Philadelphia comes up.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">./replicating_stop</font>
Signalling immediate shutdown
Wed Dec  3 03:30:01 2014 : Initiating shut down
Wed Dec  3 03:30:02 2014 : Receive pool shared memory removed
Wed Dec  3 03:30:02 2014 : Receive pool semaphore removed
Wed Dec  3 03:30:02 2014 : Signalling shutdown immediate
Wed Dec  3 03:30:02 2014 : Initiating SHUTDOWN operation on source server pid [1025] for secondary instance [dummy]
Wed Dec  3 03:30:02 2014 : Waiting for upto [180] seconds for the source server to shutdown
Wed Dec  3 03:30:03 2014 : Journal pool shared memory removed
Wed Dec  3 03:30:03 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@shanghai:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=CapeTown -secondary=10.0.2.2:4000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_CapeTown.log</font>
Wed Dec  3 03:30:42 2014 : Initiating START of source server for secondary instance [CapeTown]
gtmuser@shanghai:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=Philadelphia -secondary=10.0.2.2:5000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_Philadelphia.log</font>
Wed Dec  3 03:31:06 2014 : Initiating START of source server for secondary instance [Philadelphia]
gtmuser@shanghai:~/myApp$ </pre><p>
Both Cape Town and Philadelphia should perform a rollback fetchresync
before they become secondary instances to Shanghai. First Cape Town
(since Philadelphia has crashed and is down; notice that the times
look very different because they show times in their local
timezones).</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">./replicating_stop</font>
Signalling immediate shutdown
Tue Dec  2 21:31:42 2014 : Initiating shut down
Tue Dec  2 21:31:43 2014 : Receive pool shared memory removed
Tue Dec  2 21:31:43 2014 : Receive pool semaphore removed
Tue Dec  2 21:31:43 2014 : Signalling shutdown immediate
Tue Dec  2 21:31:43 2014 : Initiating SHUTDOWN operation on source server pid [1024] for secondary instance [dummy]
Tue Dec  2 21:31:43 2014 : Waiting for upto [180] seconds for the source server to shutdown
Tue Dec  2 21:31:44 2014 : Journal pool shared memory removed
Tue Dec  2 21:31:44 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip journal -rollback -backward -fetchresync=3000 -losttrans=/home/gtmuser/myApp/Unreplic_Trans_Report_`date +%Y%m%d%H%M%S`.txt &quot;*&quot;</font>
%GTM-I-MUJNLSTAT, Initial processing started at Tue Dec  2 21:32:10 2014
%GTM-I-MUJNLSTAT, FETCHRESYNC processing started at Tue Dec  2 21:32:10 2014
Tue Dec  2 21:32:10 2014 : Assuming primary supports multisite functionality. Connecting using multisite communication protocol.
Tue Dec  2 21:32:10 2014 : Waiting for a connection...
Tue Dec  2 21:32:10 2014 : Connection established, using TCP send buffer size 87040 receive buffer size 374400
Tue Dec  2 21:32:10 2014 : Connection information:: Local: ::ffff:10.0.2.15:3000 Remote: ::ffff:10.0.2.2:48768
Tue Dec  2 21:32:10 2014 : Sending REPL_FETCH_RESYNC message with seqno 3 [0x3]
Tue Dec  2 21:32:10 2014 : Source and Receiver sides have same endianness
Tue Dec  2 21:32:10 2014 : Remote side source log file path is /home/gtmuser/myApp/source_CapeTown.log; Source Server PID = 1035
Tue Dec  2 21:32:10 2014 : Received REPL_NEED_INSTINFO message from primary instance [Shanghai]
Tue Dec  2 21:32:10 2014 : Sending REPL_INSTINFO message
Tue Dec  2 21:32:10 2014 : Received REPL_NEED_HISTINFO message for Seqno 3 [0x3]
Tue Dec  2 21:32:10 2014 : Sending REPL_HISTINFO message with seqno 1 [0x1]
Tue Dec  2 21:32:10 2014 : History sent : Start Seqno = 1 [0x1] : Stream Seqno = 0 [0x0] : Root Primary = [Philadelphia] : Cycle = [1] : Creator pid = 1007 : Created time = 1417547545 [0x547e0f19] : History number = 0 : Prev History number = -1 : Stream # = 0 : History type = 1
Tue Dec  2 21:32:10 2014 : Received REPL_RESYNC_SEQNO message
Tue Dec  2 21:32:10 2014 : Received RESYNC SEQNO is 3 [0x3]
%GTM-I-MUJNLSTAT, Backward processing started at Tue Dec  2 21:32:10 2014
%GTM-I-RESOLVESEQNO, Resolving until sequence number 3 [0x0000000000000003]
%GTM-I-MUJNLSTAT, Before image applying started at Tue Dec  2 21:32:10 2014
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336213210
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336213210
%GTM-I-MUJNLSTAT, Forward processing started at Tue Dec  2 21:32:10 2014
%GTM-I-FILECREATE, Lost transactions extract file /home/gtmuser/myApp/Unreplic_Trans_Report_20141202213210.txt created
%GTM-I-RLBKJNSEQ, Journal seqno of the instance after rollback is 3 [0x0000000000000003]
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Rollback successful
%GTM-I-MUJNLSTAT, End processing at Tue Dec  2 21:32:11 2014
gtmuser@capetown:~/myApp$ <font color="#ff0000">./replicating_start</font>
Tue Dec  2 21:33:22 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@capetown:~/myApp$ </pre><p>
Note that the Unreplicated Transaction File has no transactions
rolled back:</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">cat Unreplic_Trans_Report_20141202213210.txt </font>
GDSJEX07 ROLLBACK SECONDARY CapeTown
02\63523,77504\4\1024\0
03\63523,77504\4\1024\0\3
gtmuser@capetown:~/myApp$ </pre><p>
Now reboot Philadelphia to simulate its recovery. When the system
comes up (before performing any other database access), perform a
rollback fetchresync.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip journal -rollback -backward -fetchresync=3000 -losttrans=/home/gtmuser/myApp/Unreplic_Trans_Report_`date +%Y%m%d%H%M%S`.txt &quot;*&quot;</font>
%GTM-I-MUJNLSTAT, Initial processing started at Tue Dec  2 14:35:55 2014
%GTM-I-MUJNLSTAT, FETCHRESYNC processing started at Tue Dec  2 14:35:55 2014
Tue Dec  2 14:35:55 2014 : Assuming primary supports multisite functionality. Connecting using multisite communication protocol.
Tue Dec  2 14:35:55 2014 : Waiting for a connection...
Tue Dec  2 14:35:56 2014 : Connection established, using TCP send buffer size 87040 receive buffer size 374400
Tue Dec  2 14:35:56 2014 : Connection information:: Local: ::ffff:10.0.2.15:3000 Remote: ::ffff:10.0.2.2:49353
Tue Dec  2 14:35:56 2014 : Sending REPL_FETCH_RESYNC message with seqno 3 [0x3]
Tue Dec  2 14:35:56 2014 : Source and Receiver sides have same endianness
Tue Dec  2 14:35:56 2014 : Remote side source log file path is /home/gtmuser/myApp/source_Philadelphia.log; Source Server PID = 1037
Tue Dec  2 14:35:56 2014 : Received REPL_NEED_INSTINFO message from primary instance [Shanghai]
Tue Dec  2 14:35:56 2014 : Sending REPL_INSTINFO message
Tue Dec  2 14:35:56 2014 : Received REPL_NEED_HISTINFO message for Seqno 3 [0x3]
Tue Dec  2 14:35:56 2014 : Sending REPL_HISTINFO message with seqno 1 [0x1]
Tue Dec  2 14:35:56 2014 : History sent : Start Seqno = 1 [0x1] : Stream Seqno = 0 [0x0] : Root Primary = [Philadelphia] : Cycle = [1] : Creator pid = 1007 : Created time = 1417547545 [0x547e0f19] : History number = 0 : Prev History number = -1 : Stream # = 0 : History type = 1
Tue Dec  2 14:35:56 2014 : Received REPL_RESYNC_SEQNO message
Tue Dec  2 14:35:56 2014 : Received RESYNC SEQNO is 3 [0x3]
%GTM-I-MUJNLSTAT, Backward processing started at Tue Dec  2 14:35:56 2014
%GTM-I-RESOLVESEQNO, Resolving until sequence number 3 [0x0000000000000003]
%GTM-I-MUJNLSTAT, Before image applying started at Tue Dec  2 14:35:56 2014
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336143556
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336143556
%GTM-I-MUJNLSTAT, Forward processing started at Tue Dec  2 14:35:56 2014
%GTM-I-FILECREATE, Lost transactions extract file /home/gtmuser/myApp/Unreplic_Trans_Report_20141202143555.txt created
%GTM-I-RLBKJNSEQ, Journal seqno of the instance after rollback is 3 [0x0000000000000003]
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Rollback successful
%GTM-I-MUJNLSTAT, End processing at Tue Dec  2 14:35:57 2014
gtmuser@philadelphia:~/myApp$<font color="#ff0000"> ./replicating_start</font>
Tue Dec  2 14:37:14 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@philadelphia:~/myApp$ </pre><p>
Now, create a database update in Shanghai.</p>
<pre class="western" style="margin-top: 0.14in; margin-bottom: 0.2in">GTM&gt;<font color="#0000ff">set ^Weather(&quot;Shanghai&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Stormy&quot;</font></pre><p>
And confirm that it is replicated to both Cape Town and Philadelphia.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51921)=&quot;Sunny&quot;
^Weather(&quot;Shanghai&quot;,63524,13176)=&quot;Stormy&quot;</pre><p>
Shut down all three instances cleanly to end the exercise. On the
originating instance in Shanghai.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">./originating_stop</font>
Wed Dec  3 03:42:11 2014 : Signalling shutdown immediate
Wed Dec  3 03:42:11 2014 : Initiating SHUTDOWN operation on source server pid [1049] for secondary instance [CapeTown]
Wed Dec  3 03:42:11 2014 : Initiating SHUTDOWN operation on source server pid [1051] for secondary instance [Philadelphia]
Wed Dec  3 03:42:11 2014 : Waiting for upto [180] seconds for the source server to shutdown
Wed Dec  3 03:42:12 2014 : Journal pool shared memory removed
Wed Dec  3 03:42:12 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@shanghai:~/myApp$</pre><p>
And on the replicating instances in Cape Town and Philadelphia,
execute <b>replicating_stop</b> to stop the replication.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">./replicating_stop</font>
Signalling immediate shutdown
Tue Dec  2 14:42:53 2014 : Initiating shut down
Tue Dec  2 14:42:54 2014 : Receive pool shared memory removed
Tue Dec  2 14:42:54 2014 : Receive pool semaphore removed
Tue Dec  2 14:42:54 2014 : Signalling shutdown immediate
Tue Dec  2 14:42:54 2014 : Initiating SHUTDOWN operation on source server pid [1018] for secondary instance [dummy]
Tue Dec  2 14:42:54 2014 : Waiting for upto [180] seconds for the source server to shutdown
Tue Dec  2 14:42:55 2014 : Journal pool shared memory removed
Tue Dec  2 14:42:55 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@philadelphia:~/myApp$</pre><h3>
Replication and Backlogs</h3>
<p>In an ideal world, an originating instance never goes down with a
backlog. In the real world, it may well go down with a backlog of
updates that have not been replicated. Asynchronous replication is a
consequence of the fact that committing an update requires a remote
commit and a local commit, then l oss of the network between the
remote instance the local instance stops the local instance; and
network delays slow down the local instance.</p>
<p>In order to provide continuity of business, when an originating
primary instance goes down a former replicating secondary instance
can be brought up as a new originating primary instance to keep the
application available. When the former originating primary instance
comes up, it is in a secondary role, and the updates that were part
of the backlog must be handled. GT.M provides the hooks needed to
create applications that are continuously available, but the
application must take advantage of these hooks. Consider the
following two-instance example (the notation P: 100 means that the
site is operating as the primary and has committed update number
100):</p>
<center>
	<table width="80%" cellpadding="0" cellspacing="0">
		<col width="128*">
		<col width="128*">
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in"><u>Cape Town</u></p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in"><u>Shanghai</u></p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P:100</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">S: 95 (backlog of 5
				updates)</p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">Crashes</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P: 95 (becomes the
				originating instance, starts processing and keeps the
				organization operational)</p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">Repaired and brought back
				up</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P: 120 (processing has
				moved it ahead)</p>
			</td>
		</tr>
	</table>
</center>
<p><br/>
<br/>

</p>
<p>This situation needs to be remedied, because updates
(transactions) 96-100 on Cape Town are different from updates 96-100
on Shanghai. This has a GT.M part and an application software part.
The GT.M part is to rollback the transactions on the former
originating primary instance with the <b>mupip journal -rollback
-fetchresync</b> command. These rolled back updates (“unreplicated”
or “lost” transactions) are placed in a file and must be
transmitted to the new originating instance for reprocessing /
reconciliation by application logic.</p>
<center>
	<table width="80%" cellpadding="0" cellspacing="0">
		<col width="128*">
		<col width="128*">
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in"><u>Cape Town</u></p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in"><u>Shanghai</u></p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">S: 95 (database rolled
				back; updates 96-100 in unreplicated transaction file)</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P: 120</p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">S: 120 (catches up with
				Shanghai once replication resumes)</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P: 120 (receives
				unreplicated transaction file)</p>
			</td>
		</tr>
		<tr valign="top">
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">S: 125 (unreplicated
				transactions make it back after reprocessing)</p>
			</td>
			<td width="50%" style="border: none; padding: 0in">
				<p style="border: none; padding: 0in">P: 125 (processing
				unreplicated transactions moves it ahead)</p>
			</td>
		</tr>
	</table>
</center>
<p><br/>
<br/>

</p>
<p>Adding Philadelphia to the example above complicates it only
slightly. There are two cases to consider when Cape Town crashes:</p>
<ul>
	<li/>
<p>Philadelphia is at transaction 95 or less. In this case,
	Philadelphia simply becomes a replicating instance to Shanghai and
	there is no need for Philadelphia to rollback any transactions.</p>
	<li/>
<p>Philadelphia is at a transaction 96 or more. In this case,
	when Philadelphia becomes a replicating instance to Shanghai, it
	performs a rollback to transaction 95 before starting replication.
	These transactions in the unreplicated transaction file do not need
	to be sent to Shanghai for reprocessing because they will be in the
	unreplicated transaction file from Cape Town.</p>
</ul>
<h4>Exercise – Replication and Backlogs</h4>
<p>This exercise simulates a replication with a backlog (smaller than
the five updates in the example above). Start with Cape Town as the
originating instance replicating to Philadelphia and Shanghai as
replicating instances. Since Cape Town most recently was a secondary
instance, you should start with <b>mupip journal -rollback
-fetchresync</b> in Shanghai and Philadelphia.</p>
<p>Start Cape Town as the originating instance:</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=Philadelphia -secondary=10.0.2.2:5000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_Philadelphia.log</font>
Tue Dec  2 23:42:32 2014 : Initiating START of source server for secondary instance [Philadelphia]
gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=Shanghai -secondary=10.0.2.2:6000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_Shanghai.log</font>
Tue Dec  2 23:43:02 2014 : Initiating START of source server for secondary instance [Shanghai]
<font color="#000000">gtmuser@capetown:~/myApp$</font> </pre><p>
At Philadelphia (and also in Shanghai) perform the fetchresync
operation and then start replication. You can ask GT.M to tell you
the health of replication and also the replication backlog.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip journal -rollback -backward -fetchresync=3000 -losttrans=/home/gtmuser/myApp/Unreplic_Trans_Report_`date +%Y%m%d%H%M%S`.txt &quot;*&quot;</font>
%GTM-I-MUJNLSTAT, Initial processing started at Tue Dec  2 16:43:40 2014
%GTM-I-MUJNLSTAT, FETCHRESYNC processing started at Tue Dec  2 16:43:40 2014
Tue Dec  2 16:43:40 2014 : Assuming primary supports multisite functionality. Connecting using multisite communication protocol.
Tue Dec  2 16:43:40 2014 : Waiting for a connection...
Tue Dec  2 16:43:41 2014 : Connection established, using TCP send buffer size 87040 receive buffer size 374400
Tue Dec  2 16:43:41 2014 : Connection information:: Local: ::ffff:10.0.2.15:3000 Remote: ::ffff:10.0.2.2:49967
Tue Dec  2 16:43:41 2014 : Sending REPL_FETCH_RESYNC message with seqno 4 [0x4]
Tue Dec  2 16:43:41 2014 : Source and Receiver sides have same endianness
Tue Dec  2 16:43:41 2014 : Remote side source log file path is /home/gtmuser/myApp/source_Philadelphia.log; Source Server PID = 1063
Tue Dec  2 16:43:41 2014 : Received REPL_NEED_INSTINFO message from primary instance [CapeTown]
Tue Dec  2 16:43:41 2014 : Sending REPL_INSTINFO message
Tue Dec  2 16:43:41 2014 : Received REPL_NEED_HISTINFO message for Seqno 4 [0x4]
Tue Dec  2 16:43:41 2014 : Sending REPL_HISTINFO message with seqno 3 [0x3]
Tue Dec  2 16:43:41 2014 : History sent : Start Seqno = 3 [0x3] : Stream Seqno = 0 [0x0] : Root Primary = [Shanghai] : Cycle = [1] : Creator pid = 1035 : Created time = 1417548642 [0x547e1362] : History number = 1 : Prev History number = 0 : Stream # = 0 : History type = 1
Tue Dec  2 16:43:41 2014 : Received REPL_RESYNC_SEQNO message
Tue Dec  2 16:43:41 2014 : Received RESYNC SEQNO is 4 [0x4]
%GTM-I-MUJNLSTAT, Backward processing started at Tue Dec  2 16:43:41 2014
%GTM-I-RESOLVESEQNO, Resolving until sequence number 4 [0x0000000000000004]
%GTM-I-MUJNLSTAT, Before image applying started at Tue Dec  2 16:43:41 2014
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336164341
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336164341
%GTM-I-MUJNLSTAT, Forward processing started at Tue Dec  2 16:43:41 2014
%GTM-I-FILECREATE, Lost transactions extract file /home/gtmuser/myApp/Unreplic_Trans_Report_20141202164340.txt created
%GTM-I-RLBKJNSEQ, Journal seqno of the instance after rollback is 4 [0x0000000000000004]
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Rollback successful
%GTM-I-MUJNLSTAT, End processing at Tue Dec  2 16:43:41 2014
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">./replicating_start</font>
Tue Dec  2 16:47:50 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip replicate -receiver -checkhealth</font>
PID 1040 Receiver server is alive
PID 1041 Update process is alive
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip replicate -receiver -showbacklog</font>
0 : number of backlog transactions received by receiver server and yet to be processed by update process
3 : sequence number of last transaction received from Source Server and written to receive pool
3 : sequence number of last transaction processed by update process
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">gtmuser@philadelphia:~/myApp$ </font></pre><p>
You can also check replication health and the backlog on the
originating instance, Cape Town. Notice that if you do not specify
which replication connection you want details for, you get
information on all.</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip replicate -source -checkhealth</font>
Tue Dec  2 23:51:20 2014 : Initiating CHECKHEALTH operation on source server pid [1063] for secondary instance name [Philadelphia]
PID 1063 Source server is alive in ACTIVE mode
Tue Dec  2 23:51:20 2014 : Initiating CHECKHEALTH operation on source server pid [1065] for secondary instance name [Shanghai]
PID 1065 Source server is alive in ACTIVE mode
gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip replicate -source -showbacklog</font>
Tue Dec  2 23:51:35 2014 : Initiating SHOWBACKLOG operation on source server pid [1063] for secondary instance [Philadelphia]
0 : backlog number of transactions written to journal pool and yet to be sent by the source server
3 : sequence number of last transaction written to journal pool
3 : sequence number of last transaction sent by source server
Tue Dec  2 23:51:35 2014 : Initiating SHOWBACKLOG operation on source server pid [1065] for secondary instance [Shanghai]
0 : backlog number of transactions written to journal pool and yet to be sent by the source server
3 : sequence number of last transaction written to journal pool
3 : sequence number of last transaction sent by source server
gtmuser@capetown:~/myApp$ </pre><p>
Now create an update in Cape Town.</p>
<pre class="western" style="margin-top: 0.14in; margin-bottom: 0.2in"><font color="#ff0000"><font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><font color="#000000">GTM&gt;</font><font color="#0000ff">set ^Weather(&quot;Cape Town&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Snowing&quot;</font></font></font></pre><p>
Verify that it is replicated in Philadelphia and Shanghai.</p>
<pre class="western">GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Cape Town&quot;,63523,86064)=&quot;Snowing&quot;
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51921)=&quot;Sunny&quot;
^Weather(&quot;Shanghai&quot;,63524,13176)=&quot;Stormy&quot;</pre><p>
Now simulate a failure with a backlog by first shutting down
replication in Shanghai, and then making an update in Cape Town. In
Shanghai:</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">./replicating_stop</font>
Signalling immediate shutdown
Wed Dec  3 05:56:09 2014 : Initiating shut down
Wed Dec  3 05:56:10 2014 : Receive pool shared memory removed
Wed Dec  3 05:56:10 2014 : Receive pool semaphore removed
Wed Dec  3 05:56:10 2014 : Signalling shutdown immediate
Wed Dec  3 05:56:10 2014 : Initiating SHUTDOWN operation on source server pid [1075] for secondary instance [dummy]
Wed Dec  3 05:56:10 2014 : Waiting for upto [180] seconds for the source server to shutdown
Wed Dec  3 05:56:11 2014 : Journal pool shared memory removed
Wed Dec  3 05:56:11 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@shanghai:~/myApp$ </pre><p>
In Cape Town:</p>
<pre class="western">GTM&gt;<font color="#0000ff">set ^Weather(&quot;Cape Town&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Blizzards&quot;</font>

GTM&gt;<font color="#0000ff">zsystem &quot;$gtm_dist/mupip replicate -source -showbacklog&quot;</font>
Tue Dec  2 23:57:00 2014 : Initiating SHOWBACKLOG operation on source server pid [1063] for secondary instance [Philadelphia]
<span style="background: #ffff00">0</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
5 : sequence number of last transaction written to journal pool
5 : sequence number of last transaction sent by source server
Tue Dec  2 23:57:00 2014 : Initiating SHOWBACKLOG operation on source server pid [1065] for secondary instance [Shanghai]
<span style="background: #ffff00">1</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
5 : sequence number of last transaction written to journal pool
4 : sequence number of last transaction sent by source server

GTM&gt;</pre><p>
Notice that there is a backlog to Shanghai, but none to Philadelphia.
Now shut down replication in Philadelphia and make another update in
Cape Town. Verify that there is a backlog of 1 to Philadelphia and 2
to Shanghai.</p>
<p>In Philadelphia:</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">./replicating_stop</font>
Signalling immediate shutdown
Tue Dec  2 16:57:32 2014 : Initiating shut down
Tue Dec  2 16:57:33 2014 : Receive pool shared memory removed
Tue Dec  2 16:57:33 2014 : Receive pool semaphore removed
Tue Dec  2 16:57:33 2014 : Signalling shutdown immediate
Tue Dec  2 16:57:33 2014 : Initiating SHUTDOWN operation on source server pid [1038] for secondary instance [dummy]
Tue Dec  2 16:57:33 2014 : Waiting for upto [180] seconds for the source server to shutdown
Tue Dec  2 16:57:34 2014 : Journal pool shared memory removed
Tue Dec  2 16:57:34 2014 : Journal pool semaphore removed
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/aA.dat successfully rundown
%GTM-I-MUFILRNDWNSUC, File /home/gtmuser/myApp/others.dat successfully rundown
gtmuser@philadelphia:~/myApp$ </pre><p>
In Cape Town:</p>
<pre class="western">GTM&gt;<font color="#0000ff">set ^Weather(&quot;Cape Town&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Cloudy&quot;</font>

GTM&gt;<font color="#0000ff">zwrite ^Weather</font>
^Weather(&quot;Cape Town&quot;,63523,86064)=&quot;Snowing&quot;
^Weather(&quot;Cape Town&quot;,63523,86207)=&quot;Blizzards&quot;
^Weather(&quot;Cape Town&quot;,63523,86342)=&quot;Cloudy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51308)=&quot;Rainy&quot;
^Weather(&quot;Philadelphia&quot;,63523,51921)=&quot;Sunny&quot;
^Weather(&quot;Shanghai&quot;,63524,13176)=&quot;Stormy&quot;

GTM&gt;<font color="#0000ff">zsystem &quot;$gtm_dist/mupip replicate -source -showbacklog&quot;</font>
Tue Dec  2 23:59:27 2014 : Initiating SHOWBACKLOG operation on source server pid [1063] for secondary instance [Philadelphia]
<span style="background: #ffff00">1</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
5 : sequence number of last transaction sent by source server
Tue Dec  2 23:59:27 2014 : Initiating SHOWBACKLOG operation on source server pid [1065] for secondary instance [Shanghai]
<span style="background: #ffff00">2</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
4 : sequence number of last transaction sent by source server

GTM&gt;</pre><p>
Now crash Cape Town. You have a choice of bringing up Philadelphia or
Shanghai. If you don't have time to make decision as to which
replicating instance to make the new primary, just choose the most
convenient. If you have time to make a decision, you can see which
one is further ahead by looking at the “Region Seqno” field in
the database file header with DSE (in a multi-region database, you
need to look at all replicated regions and take the maximum).</p>
<p>In Philadelphia (note the use of the find -region DSE command):</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">$gtm_dist/dse</font>


File    /home/gtmuser/myApp/aA.dat
Region  A

DSE&gt; <font color="#0000ff">dump -fileheader</font>

File            /home/gtmuser/myApp/aA.dat
Region          A
Date/Time       02-DEC-2014 17:11:44 [$H = 63523,61904]
  Access method                          BG  Global Buffers                1000
  Reserved Bytes                          0  Block size (in bytes)         4096
  Maximum record size                  4080  Starting VBN                   513
  Maximum key size                      255  Total blocks            0x00001392
  Null subscripts                     NEVER  Free blocks             0x00001384
  Standard Null Collation              TRUE  Free space              0x00000000
  Last Record Backup     0x0000000000000001  Extension Count              10000
  Last Database Backup   0x0000000000000001  Number of local maps            10
  Last Bytestream Backup 0x0000000000000001  Lock space              0x00000028
  In critical section            0x00000000  Timers pending                   0
  Cache freeze id                0x00000000  Flush timer            00:00:01:00
  Freeze match                   0x00000000  Flush trigger                  938
  Current transaction    0x0000000000000002  No. of writes/flush              7
  Maximum TN             0xFFFFFFFF83FFFFFF  Certified for Upgrade to        V6
  Maximum TN Warn        0xFFFFFFFD93FFFFFF  Desired DB Format               V6
  Master Bitmap Size                    496  Blocks to Upgrade       0x00000000
  Create in progress                  FALSE  Modified cache blocks            0
  Reference count                         1  Wait Disk                        0
  Journal State               [inactive] ON  Journal Before imaging        TRUE
  Journal Allocation                   2048  Journal Extension             2048
  Journal Buffer Size                  2312  Journal Alignsize             4096
  Journal AutoSwitchLimit           8386560  Journal Epoch Interval         300
  Journal Yield Limit                     8  Journal Sync IO              FALSE
  Journal File: /home/gtmuser/myApp/aA.mjl
  Mutex Hard Spin Count                 128  Mutex Sleep Spin Count         128
  Mutex Queue Slots                    1024  KILLs in progress                0
  Replication State                      ON  Region Seqno    <span style="background: #ffff00">0x0000000000000004</span>
  Zqgblmod Seqno         0x0000000000000003  Zqgblmod Trans  0x0000000000000002
  Endian Format                      LITTLE  Commit Wait Spin Count          16
  Database file encrypted             FALSE  Inst Freeze on Error         FALSE
  Spanning Node Absent                 TRUE  Maximum Key Size Assured      TRUE
<font color="#000000">DSE&gt; </font><font color="#0000ff">find -region</font>
List of global directory:       


File    /home/gtmuser/myApp/aA.dat
Region  A

File    /home/gtmuser/myApp/gtm.dat
Region  DEFAULT
DSE&gt; <font color="#0000ff">find -region=DEFAULT</font>

File    /home/gtmuser/myApp/gtm.dat
Region  DEFAULT

DSE&gt; <font color="#0000ff">dump -fileheader</font>

File            /home/gtmuser/myApp/others.dat
Region          DEFAULT
Date/Time       02-DEC-2014 17:12:57 [$H = 63523,61977]
  Access method                          BG  Global Buffers                1000
  Reserved Bytes                          0  Block size (in bytes)         4096
  Maximum record size                  4080  Starting VBN                   513
  Maximum key size                      255  Total blocks            0x00001392
  Null subscripts                     NEVER  Free blocks             0x00001382
  Standard Null Collation              TRUE  Free space              0x00000000
  Last Record Backup     0x0000000000000001  Extension Count              10000
  Last Database Backup   0x0000000000000001  Number of local maps            10
  Last Bytestream Backup 0x0000000000000001  Lock space              0x00000028
  In critical section            0x00000000  Timers pending                   0
  Cache freeze id                0x00000000  Flush timer            00:00:01:00
  Freeze match                   0x00000000  Flush trigger                  938
  Current transaction    0x0000000000000007  No. of writes/flush              7
  Maximum TN             0xFFFFFFFF83FFFFFF  Certified for Upgrade to        V6
  Maximum TN Warn        0xFFFFFFFD93FFFFFF  Desired DB Format               V6
  Master Bitmap Size                    496  Blocks to Upgrade       0x00000000
  Create in progress                  FALSE  Modified cache blocks            0
  Reference count                         1  Wait Disk                        0
  Journal State               [inactive] ON  Journal Before imaging        TRUE
  Journal Allocation                   2048  Journal Extension             2048
  Journal Buffer Size                  2312  Journal Alignsize             4096
  Journal AutoSwitchLimit           8386560  Journal Epoch Interval         300
  Journal Yield Limit                     8  Journal Sync IO              FALSE
  Journal File: /home/gtmuser/myApp/others.mjl
  Mutex Hard Spin Count                 128  Mutex Sleep Spin Count         128
  Mutex Queue Slots                    1024  KILLs in progress                0
  Replication State                      ON  Region Seqno    <span style="background: #ffff00">0x0000000000000006</span>
  Zqgblmod Seqno         0x0000000000000003  Zqgblmod Trans  0x0000000000000004
  Endian Format                      LITTLE  Commit Wait Spin Count          16
  Database file encrypted             FALSE  Inst Freeze on Error         FALSE
  Spanning Node Absent                 TRUE  Maximum Key Size Assured      TRUE
DSE&gt; <font color="#0000ff">exit</font>
gtmuser@philadelphia:~/myApp$ </pre><p>
And in Shanghai:</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">$gtm_dist/dse</font>

File    /home/gtmuser/myApp/aA.dat
Region  A

DSE&gt; <font color="#0000ff">dump -fileheader</font>

File            /home/gtmuser/myApp/aA.dat
Region          A
Date/Time       03-DEC-2014 06:15:09 [$H = 63524,22509]
  Access method                          BG  Global Buffers                1000
  Reserved Bytes                          0  Block size (in bytes)         4096
  Maximum record size                  4080  Starting VBN                   513
  Maximum key size                      255  Total blocks            0x00001392
  Null subscripts                     NEVER  Free blocks             0x00001384
  Standard Null Collation              TRUE  Free space              0x00000000
  Last Record Backup     0x0000000000000001  Extension Count              10000
  Last Database Backup   0x0000000000000001  Number of local maps            10
  Last Bytestream Backup 0x0000000000000001  Lock space              0x00000028
  In critical section            0x00000000  Timers pending                   0
  Cache freeze id                0x00000000  Flush timer            00:00:01:00
  Freeze match                   0x00000000  Flush trigger                  938
  Current transaction    0x0000000000000002  No. of writes/flush              7
  Maximum TN             0xFFFFFFFF83FFFFFF  Certified for Upgrade to        V6
  Maximum TN Warn        0xFFFFFFFD93FFFFFF  Desired DB Format               V6
  Master Bitmap Size                    496  Blocks to Upgrade       0x00000000
  Create in progress                  FALSE  Modified cache blocks            0
  Reference count                         1  Wait Disk                        0
  Journal State               [inactive] ON  Journal Before imaging        TRUE
  Journal Allocation                   2048  Journal Extension             2048
  Journal Buffer Size                  2312  Journal Alignsize             4096
  Journal AutoSwitchLimit           8386560  Journal Epoch Interval         300
  Journal Yield Limit                     8  Journal Sync IO              FALSE
  Journal File: /home/gtmuser/myApp/aA.mjl
  Mutex Hard Spin Count                 128  Mutex Sleep Spin Count         128
  Mutex Queue Slots                    1024  KILLs in progress                0
  Replication State                      ON  Region Seqno    <span style="background: #ffff00">0x0000000000000004</span>
  Zqgblmod Seqno         0x0000000000000001  Zqgblmod Trans  0x0000000000000002
  Endian Format                      LITTLE  Commit Wait Spin Count          16
  Database file encrypted             FALSE  Inst Freeze on Error         FALSE
  Spanning Node Absent                 TRUE  Maximum Key Size Assured      TRUE
DSE&gt; find -region=DEFAULT

File    /home/gtmuser/myApp/gtm.dat
Region  DEFAULT

DSE&gt; <font color="#0000ff">dump -fileheader</font>

File            /home/gtmuser/myApp/others.dat
Region          DEFAULT
Date/Time       03-DEC-2014 06:16:12 [$H = 63524,22572]
  Access method                          BG  Global Buffers                1000
  Reserved Bytes                          0  Block size (in bytes)         4096
  Maximum record size                  4080  Starting VBN                   513
  Maximum key size                      255  Total blocks            0x00001392
  Null subscripts                     NEVER  Free blocks             0x00001382
  Standard Null Collation              TRUE  Free space              0x00000000
  Last Record Backup     0x0000000000000001  Extension Count              10000
  Last Database Backup   0x0000000000000001  Number of local maps            10
  Last Bytestream Backup 0x0000000000000001  Lock space              0x00000028
  In critical section            0x00000000  Timers pending                   0
  Cache freeze id                0x00000000  Flush timer            00:00:01:00
  Freeze match                   0x00000000  Flush trigger                  938
  Current transaction    0x0000000000000006  No. of writes/flush              7
  Maximum TN             0xFFFFFFFF83FFFFFF  Certified for Upgrade to        V6
  Maximum TN Warn        0xFFFFFFFD93FFFFFF  Desired DB Format               V6
  Master Bitmap Size                    496  Blocks to Upgrade       0x00000000
  Create in progress                  FALSE  Modified cache blocks            0
  Reference count                         1  Wait Disk                        0
  Journal State               [inactive] ON  Journal Before imaging        TRUE
  Journal Allocation                   2048  Journal Extension             2048
  Journal Buffer Size                  2312  Journal Alignsize             4096
  Journal AutoSwitchLimit           8386560  Journal Epoch Interval         300
  Journal Yield Limit                     8  Journal Sync IO              FALSE
  Journal File: /home/gtmuser/myApp/others.mjl
  Mutex Hard Spin Count                 128  Mutex Sleep Spin Count         128
  Mutex Queue Slots                    1024  KILLs in progress                0
  Replication State                      ON  Region Seqno    <span style="background: #ffff00">0x0000000000000005</span>
  Zqgblmod Seqno         0x0000000000000001  Zqgblmod Trans  0x0000000000000002
  Endian Format                      LITTLE  Commit Wait Spin Count          16
  Database file encrypted             FALSE  Inst Freeze on Error         FALSE
  Spanning Node Absent                 TRUE  Maximum Key Size Assured      TRUE
DSE&gt; <font color="#0000ff">exit</font>
gtmuser@shanghai:~/myApp$ </pre><p>
Since the largest Region Seqno is 6 (region DEFAULT in Philadelphia),
that is the preferred new originating primary instance. So, make it
the new originating primary.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=Shanghai -secondary=10.0.2.2:6000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_Shanghai.log</font>
Tue Dec  2 17:20:13 2014 : Initiating START of source server for secondary instance [Shanghai]
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip replicate -source -start -instsecondary=CapeTown -secondary=10.0.2.2:4000 -buffsize=1048576 -log=/home/gtmuser/myApp/source_CapeTown.log</font>
Tue Dec  2 17:20:39 2014 : Initiating START of source server for secondary instance [CapeTown]
gtmuser@philadelphia:~/myApp$ </pre><p>
On Shanghai, perform the mupip journal -rollback -fetchresync
operation and start operation as a replicating instance.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">mupip journal -rollback -backward -fetchresync=3000 -losttrans=/home/gtmuser/myApp/Unreplic_Trans_Report_`date +%Y%m%d%H%M%S`.txt &quot;*&quot;</font>
%GTM-I-MUJNLSTAT, Initial processing started at Wed Dec  3 06:21:18 2014
%GTM-I-MUJNLSTAT, FETCHRESYNC processing started at Wed Dec  3 06:21:18 2014
Wed Dec  3 06:21:18 2014 : Assuming primary supports multisite functionality. Connecting using multisite communication protocol.
Wed Dec  3 06:21:18 2014 : Waiting for a connection...
Wed Dec  3 06:21:19 2014 : Connection established, using TCP send buffer size 87040 receive buffer size 374400
Wed Dec  3 06:21:19 2014 : Connection information:: Local: ::ffff:10.0.2.15:3000 Remote: ::ffff:10.0.2.2:53668
Wed Dec  3 06:21:19 2014 : Sending REPL_FETCH_RESYNC message with seqno 5 [0x5]
Wed Dec  3 06:21:19 2014 : Source and Receiver sides have same endianness
Wed Dec  3 06:21:19 2014 : Remote side source log file path is /home/gtmuser/myApp/source_Shanghai.log; Source Server PID = 1057
Wed Dec  3 06:21:19 2014 : Received REPL_NEED_INSTINFO message from primary instance [Philadelphia]
Wed Dec  3 06:21:19 2014 : Sending REPL_INSTINFO message
Wed Dec  3 06:21:19 2014 : Received REPL_NEED_HISTINFO message for Seqno 5 [0x5]
Wed Dec  3 06:21:19 2014 : Sending REPL_HISTINFO message with seqno 4 [0x4]
Wed Dec  3 06:21:19 2014 : History sent : Start Seqno = 4 [0x4] : Stream Seqno = 0 [0x0] : Root Primary = [CapeTown] : Cycle = [1] : Creator pid = 1063 : Created time = 1417556552 [0x547e3248] : History number = 2 : Prev History number = 1 : Stream # = 0 : History type = 1
Wed Dec  3 06:21:19 2014 : Received REPL_RESYNC_SEQNO message
Wed Dec  3 06:21:19 2014 : Received RESYNC SEQNO is 5 [0x5]
%GTM-I-MUJNLSTAT, Backward processing started at Wed Dec  3 06:21:19 2014
%GTM-I-RESOLVESEQNO, Resolving until sequence number 5 [0x0000000000000005]
%GTM-I-MUJNLSTAT, Before image applying started at Wed Dec  3 06:21:19 2014
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014337062119
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014337062119
%GTM-I-MUJNLSTAT, Forward processing started at Wed Dec  3 06:21:20 2014
%GTM-I-FILECREATE, Lost transactions extract file /home/gtmuser/myApp/Unreplic_Trans_Report_20141203062118.txt created
%GTM-I-RLBKJNSEQ, Journal seqno of the instance after rollback is 5 [0x0000000000000005]
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Rollback successful
%GTM-I-MUJNLSTAT, End processing at Wed Dec  3 06:21:20 2014
gtmuser@shanghai:~/myApp$ <font color="#ff0000">./replicating_start</font>
Wed Dec  3 06:21:59 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@shanghai:~/myApp$ </pre><p>
Perform an update in Philadelphia and verify that there is a backlog
to Cape Town (the actual number may not be correct because Cape Town
was not recently a replicating instance to Philadelphia, but it shows
a non-zero value), but there is no backlog to Shanghai.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">set ^Weather(&quot;Philadelphia&quot;,$Piece($Horolog,&quot;,&quot;,1),$Piece($Horolog,&quot;,&quot;,2))=&quot;Heat Wave&quot;</font>

GTM&gt;<font color="#0000ff">zsystem &quot;$gtm_dist/mupip replicate -source -showbacklog&quot;</font> 
Tue Dec  2 17:24:09 2014 : Initiating SHOWBACKLOG operation on source server pid [1059] for secondary instance [CapeTown]
<span style="background: #ffff00">4</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
2 : sequence number of last transaction sent by source server
Tue Dec  2 17:24:09 2014 : Initiating SHOWBACKLOG operation on source server pid [1057] for secondary instance [Shanghai]
<span style="background: #ffff00">0</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server

GTM&gt;</pre><p>
Now boot the Cape Town machine and perform a <b>fetchresync</b>:</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">source gtmenv</font>
gtmuser@capetown:~/myApp$ <font color="#ff0000">mupip journal -rollback -backward -fetchresync=3000 -losttrans=/home/gtmuser/myApp/Unreplic_Trans_Report_`date +%Y%m%d%H%M%S`.txt &quot;*&quot;</font>
%GTM-I-MUJNLSTAT, Initial processing started at Wed Dec  3 00:27:54 2014
%GTM-I-MUJNLSTAT, FETCHRESYNC processing started at Wed Dec  3 00:27:54 2014
Wed Dec  3 00:27:54 2014 : Assuming primary supports multisite functionality. Connecting using multisite communication protocol.
Wed Dec  3 00:27:54 2014 : Waiting for a connection...
Wed Dec  3 00:27:55 2014 : Connection established, using TCP send buffer size 87040 receive buffer size 374400
Wed Dec  3 00:27:55 2014 : Connection information:: Local: ::ffff:10.0.2.15:3000 Remote: ::ffff:10.0.2.2:51387
Wed Dec  3 00:27:55 2014 : Sending REPL_FETCH_RESYNC message with seqno 7 [0x7]
Wed Dec  3 00:27:55 2014 : Source and Receiver sides have same endianness
Wed Dec  3 00:27:55 2014 : Remote side source log file path is /home/gtmuser/myApp/source_CapeTown.log; Source Server PID = 1059
Wed Dec  3 00:27:55 2014 : Received REPL_NEED_INSTINFO message from primary instance [Philadelphia]
Wed Dec  3 00:27:55 2014 : Sending REPL_INSTINFO message
Wed Dec  3 00:27:55 2014 : Received REPL_NEED_HISTINFO message for Seqno 7 [0x7]
Wed Dec  3 00:27:55 2014 : Sending REPL_HISTINFO message with seqno 4 [0x4]
Wed Dec  3 00:27:55 2014 : History sent : Start Seqno = 4 [0x4] : Stream Seqno = 0 [0x0] : Root Primary = [CapeTown] : Cycle = [1] : Creator pid = 1063 : Created time = 1417556552 [0x547e3248] : History number = 2 : Prev History number = 1 : Stream # = 0 : History type = 1
Wed Dec  3 00:27:55 2014 : Received REPL_RESYNC_SEQNO message
Wed Dec  3 00:27:55 2014 : Received RESYNC SEQNO is 6 [0x6]
%GTM-I-MUJNLSTAT, Backward processing started at Wed Dec  3 00:27:55 2014
%GTM-I-RESOLVESEQNO, Resolving until sequence number 6 [0x0000000000000006]
%GTM-I-MUJNLSTAT, Before image applying started at Wed Dec  3 00:27:55 2014
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014337002755
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014337002755
%GTM-I-MUJNLSTAT, Forward processing started at Wed Dec  3 00:27:55 2014
%GTM-I-FILECREATE, Lost transactions extract file /home/gtmuser/myApp/Unreplic_Trans_Report_20141203002754.txt created
%GTM-I-RLBKJNSEQ, Journal seqno of the instance after rollback is 6 [0x0000000000000006]
%GTM-S-JNLSUCCESS, Show successful
%GTM-S-JNLSUCCESS, Verify successful
%GTM-S-JNLSUCCESS, Rollback successful
%GTM-I-MUJNLSTAT, End processing at Wed Dec  3 00:27:56 2014
gtmuser@capetown:~/myApp$ <font color="#ff0000">cat /home/gtmuser/myApp/Unreplic_Trans_Report_20141203002754.txt</font> 
GDSJEX07 ROLLBACK PRIMARY CapeTown
05\63523,86342\7\1068\0\6\0\0\0\0\<span style="background: #ffff00">^Weather(&quot;Cape Town&quot;,63523,86342)=&quot;Cloudy&quot;</span>
02\63524,251\8\1068\0
gtmuser@capetown:~/myApp$ </pre><p>
Now, notice that the Unreplicated Transaction File has meaningful
content – the update that was made when Cape Town was an
originating instance, but which did not get replicated. This file
will now need to be processed by the new originating instance in
Philadelphia.</p>
<p>Cape Town can now start as a replicating instance:</p>
<pre class="western">gtmuser@capetown:~/myApp$ <font color="#ff0000">./replicating_start</font>
Wed Dec  3 00:31:44 2014 : Initiating START of source server for secondary instance [dummy]
gtmuser@capetown:~/myApp$ </pre><p>
Notice that Philadelphia now reports no backlog:</p>
<pre class="western">GTM&gt;<font color="#0000ff">zsystem &quot;$gtm_dist/mupip replicate -source -showbacklog&quot;</font>
Tue Dec  2 17:32:01 2014 : Initiating SHOWBACKLOG operation on source server pid [1059] for secondary instance [CapeTown]
<span style="background: #ffff00">0</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server
Tue Dec  2 17:32:01 2014 : Initiating SHOWBACKLOG operation on source server pid [1057] for secondary instance [Shanghai]
<span style="background: #ffff00">0</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
6 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server

GTM&gt; </pre><p>
If your application uses the $ZQGBLMOD() function to process
unreplicated transactions, read the logical multi site replication
technical bulletin for information about the <b>mupip replicate
source losttncomplete</b> command to be executed after processing
unreplicated transactions from all originating instances.</p>
<p>Shut down whichever were the replicating secondary instances -
CapeTown and Shanghai in the example above – and use the
originating primary instance (Philadelphia) for the backup exercises.</p>
<h2><a name="Backup"></a>Backup</h2>
<p>Backup <u>when an application is not running</u> is
straightforward – just copy the database files. [However, remember
that the copy will have the same journal file name in the database
file header and the system now potentially has two database files
pointing to the same journal file. Before using that file on the same
computer system as the original database file, disable journaling and
re-enable it if appropriate (do not simply switch journal files).]</p>
<p>Backup when an application is operating normally, without
impacting the application (except of course for the additional IO
load of the backup activity) is easy with GT.M, and can be
accomplished in two ways, one non-GT.M and other GT.M: 
</p>
<ul>
	<li/>
<p>The non-GT.M way is to use a disk mirror (e.g., RAID or
	SAN). Issue a mupip freeze to momentarily freeze updates and flush
	updates to disk, break the mirror; then release the freeze. After
	backing up the mirror, rebuild it, and let it “catch up.” This
	is not discussed further here.</p>
	<li/>
<p>The GT.M way: a transaction-consistent backup of an entire
	multi-region database can be accomplished with a single GT.M
	command: mupip backup. There are numerous options to satisfy
	virtually every type of backup need.</p>
</ul>
<h3>Exercise – Backup</h3>
<p>Work with whichever instance was your last originating instance
(although it does not really matter, since you can always bring the
others up as replicating instances no matter which was the last
originating instance because you will always start with a <b>mupip
journal rollback fetchresync</b> step; in this case the example shows
Philadelphia).</p>
<p>Create a directory where you can put your backups: <b>mkdir backup</b></p>
<p>In the myApp directory of that instance, create a GT.M program XYZ
in file XYZ.m that creates updates, e.g.:</p>
<pre class="western" style="margin-left: 0.79in">XYZ    Set (^a,^b)=0
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">For  Do</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">. Hang 0.1</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">. Tstart ()</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">.   Set r=$Random(2147483646)</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">.   Set ^a($horolog)=^a-r</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">.   Set ^b($horolog)=^b+r</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">. Tcommit</font>
       <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Quit</font></pre><p>
Note that the global variables <b>^a</b> and <b>^b</b> go into
different database files, but the use of transaction processing
provides ACID properties across regions.</p>
<p>Since the database is a replicated environment, if no Source
Servers are running, start at least one. [A replicated environment
needs at least one source server to be running before updates are
permitted. You can certainly start the second Source Server now –
or you can start it up later for the Replication Briefly Revisited
exercise below.]</p>
<p>Start the program as a background process from the shell: <font color="#ff0000"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><span style="font-weight: normal">mumps
-run XYZ &lt;/dev/null 1&gt;/dev/null 2&gt;&amp;1 &amp;</span></font></font></p>
<p>Notice that the journal files are growing, indicating that the
program is running:</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">ls -l *.mjl</font>
-rw-rw-rw- 1 gtmuser gtmuser 81920 Dec  2 17:52 aA.mjl
-rw-rw-rw- 1 gtmuser gtmuser 81920 Dec  2 17:52 others.mjl
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">ls -l *.mjl</font>
-rw-rw-rw- 1 gtmuser gtmuser 86016 Dec  2 17:52 aA.mjl
-rw-rw-rw- 1 gtmuser gtmuser 90112 Dec  2 17:52 others.mjl
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">ls -l *.mjl</font>
-rw-rw-rw- 1 gtmuser gtmuser 94208 Dec  2 17:53 aA.mjl
-rw-rw-rw- 1 gtmuser gtmuser 98304 Dec  2 17:53 others.mjl
gtmuser@philadelphia:~/myApp$ </pre><p>
Take a backup of the entire database (a “comprehensive backup”):</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip backup -nojournal &quot;*&quot; backup/</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336175401
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336175401
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for database file backup//aA.dat is now DISABLED
%GTM-I-JNLSTATE, Journaling state for database file backup//others.dat is now DISABLED
DB file /home/gtmuser/myApp/aA.dat backed up in file backup//aA.dat
Transactions up to 0x00000000000001E7 are backed up.
DB file /home/gtmuser/myApp/others.dat backed up in file backup//others.dat
Transactions up to 0x00000000000001ED are backed up.


BACKUP COMPLETED.

gtmuser@philadelphia:~/myApp$ </pre><p>
Take a backup of that part of the database that has changed (a
“bytestream” backup). Note</p>
<ul>
	<li/>
<p>The use of the -since=database qualifier to only backup
	those database blocks that have changed since the last backup of the
	entire database).</p>
	<li/>
<p>The fact that the backup files for others.dat have the name
	gtm*.bck – GT.M does not care what you name the files, but maps
	the targets in the alphabetic order of region name.</p>
</ul>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip backup -b</font><font color="#ff0000"><span style="background: #ffff00">ytestream</span></font><font color="#ff0000"> -since=</font><font color="#ff0000"><span style="background: #ffff00">database</span></font><font color="#ff0000"> &quot;*&quot; backup/aA`date +%Y%m%d%H%M%S`.bck,backup/gtm`date +%Y%m%d%H%M%S`.bck</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336175445
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336175445
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
MUPIP backup of database file /home/gtmuser/myApp/aA.dat to backup/aA20141202175445.bck
DB file /home/gtmuser/myApp/aA.dat incrementally backed up in file backup/aA20141202175445.bck
13 blocks saved.
Transactions from 0x00000000000001E7 to 0x00000000000002B7 are backed up.
MUPIP backup of database file /home/gtmuser/myApp/others.dat to backup/gtm20141202175445.bck
DB file /home/gtmuser/myApp/others.dat incrementally backed up in file backup/gtm20141202175445.bck
13 blocks saved.
Transactions from 0x00000000000001ED to 0x00000000000002BD are backed up.


BACKUP COMPLETED.

gtmuser@philadelphia:~/myApp$ ls -l backup/
total 2704
-rw-rw-rw- 1 gtmuser gtmuser   324608 Dec  2 17:54 aA20141202175445.bck
-rw-rw-rw- 1 gtmuser gtmuser 20783616 Dec  2 17:54 aA.dat
-rw-rw-rw- 1 gtmuser gtmuser   324608 Dec  2 17:54 gtm20141202175445.bck
-rw-rw-rw- 1 gtmuser gtmuser 20783616 Dec  2 17:54 others.dat
gtmuser@philadelphia:~/myApp$ </pre><p>
Take further bytestream backups of that part of the database that has
changed – as many as desired (note the use of the -since=bytestream
qualifier to backup only those blocks that have changed since the
last bytestream backup):</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip backup -bytestream -since=</font><font color="#ff0000"><span style="background: #ffff00">bytestream</span></font><font color="#ff0000"> &quot;*&quot; backup/aA`date +%Y%m%d%H%M%S`.bck,backup/gtm`date +%Y%m%d%H%M%S`.bck</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336175610
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336175610
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
MUPIP backup of database file /home/gtmuser/myApp/aA.dat to backup/aA20141202175610.bck
DB file /home/gtmuser/myApp/aA.dat incrementally backed up in file backup/aA20141202175610.bck
13 blocks saved.
Transactions from 0x00000000000002B7 to 0x0000000000000439 are backed up.
MUPIP backup of database file /home/gtmuser/myApp/others.dat to backup/gtm20141202175610.bck
DB file /home/gtmuser/myApp/others.dat incrementally backed up in file backup/gtm20141202175610.bck
13 blocks saved.
Transactions from 0x00000000000002BD to 0x000000000000043F are backed up.


BACKUP COMPLETED.

gtmuser@philadelphia:~/myApp$</pre><p>
Take as many additional bytestream backups as you want, in each case
specifying that the updates since the preceding bytestream backup
should be backed up.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip backup -bytestream -since=bytestream &quot;*&quot; backup/aA`date +%Y%m%d%H%M%S`.bck,backup/gtm`date +%Y%m%d%H%M%S`.bck</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336175650
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336175650
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
MUPIP backup of database file /home/gtmuser/myApp/aA.dat to backup/aA20141202175650.bck
DB file /home/gtmuser/myApp/aA.dat incrementally backed up in file backup/aA20141202175650.bck
15 blocks saved.
Transactions from 0x0000000000000439 to 0x00000000000004F3 are backed up.
MUPIP backup of database file /home/gtmuser/myApp/others.dat to backup/gtm20141202175650.bck
DB file /home/gtmuser/myApp/others.dat incrementally backed up in file backup/gtm20141202175650.bck
15 blocks saved.
Transactions from 0x000000000000043F to 0x00000000000004F9 are backed up.


BACKUP COMPLETED.

gtmuser@philadelphia:~/myApp$</pre><p>
When you are satisfied, terminate the mumps process updating the
database:</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ ps -ef | grep mumps | grep -v grep
gtmuser   <span style="background: #ffff00">1080</span>   988  0 17:52 pts/0    00:00:02 /usr/lib/fis-gtm/V6.2-000_x86_64/mumps -run XYZ
gtmuser@philadelphia:~/myApp$ mupip stop <span style="background: #ffff00">1080</span>
STOP issued to process 1080
gtmuser@philadelphia:~/myApp$ </pre><p>
Take a final backup, and note the values of the final nodes of <b>^a</b>
and <b>^b</b> (and verify that they still sum to zero). After the
final restore, we will verify that the values restored from the
backup is the same as these values.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip backup -bytestream -since=bytestream &quot;*&quot; backup/aA`date +%Y%m%d%H%M%S`.bck,backup/gtm`date +%Y%m%d%H%M%S`.bck</font>
%GTM-I-FILERENAME, File /home/gtmuser/myApp/aA.mjl is renamed to /home/gtmuser/myApp/aA.mjl_2014336175946
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/aA.mjl created for region A with BEFORE_IMAGES
%GTM-I-FILERENAME, File /home/gtmuser/myApp/others.mjl is renamed to /home/gtmuser/myApp/others.mjl_2014336175946
%GTM-I-JNLCREATE, Journal file /home/gtmuser/myApp/others.mjl created for region DEFAULT with BEFORE_IMAGES
MUPIP backup of database file /home/gtmuser/myApp/aA.dat to backup/aA20141202175946.bck
DB file /home/gtmuser/myApp/aA.dat incrementally backed up in file backup/aA20141202175946.bck
13 blocks saved.
Transactions from 0x00000000000004F3 to 0x0000000000000745 are backed up.
MUPIP backup of database file /home/gtmuser/myApp/others.dat to backup/gtm20141202175946.bck
DB file /home/gtmuser/myApp/others.dat incrementally backed up in file backup/gtm20141202175946.bck
13 blocks saved.
Transactions from 0x00000000000004F9 to 0x000000000000074B are backed up


BACKUP COMPLETED.

gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64737</span> -778521900 778521900 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~/myApp$ </pre><p>
Now it's time to work on restoring the backup. The first backup (the
database backup) provides a complete, ready-to-run database. The
subsequent bytestream backups can be applied to the database backup
using the mupip restore command.</p>
<p>Create an environment to restore the backup. It may be easiest if
you simply use the <b>backup</b> directory you created, and working
in a new shell session, copy <b>myApp/env</b> and <b>myApp/gtm.gld</b>
to the <b>backup</b> directory and edit them to reflect their new
locations. [Note that since global directories are used only to
create databases, there is no reason to change the default journal
file names in the regions of the global directory file in <b>backup</b>.
Nevertheless, it is good hygiene to keep global directories correct,
since that global directory may be used at a future time to create
new database files.]</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">cp gtmenv gtm.gld backup/</font>
gtmuser@philadelphia:~/myApp$ <font color="#ff0000">cd backup; jed backup/gtmenv # edit to point to backup directory</font>
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">cat gtmenv</font>
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/myApp/<span style="background: #ffff00">backup/</span>gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/myApp/<span style="background: #ffff00">backup/</span>gtm.repl
export gtm_repl_instname=Philadelphia
export gtmroutines=&quot;$HOME/myApp<span style="background: #ffff00">/backup</span>* $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">source gtmenv</font>
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-LOADGD, Loading Global Directory file 
        /home/gtmuser/myApp/backup/gtm.gld
%GDE-I-VERIFY, Verification OK


GDE&gt; <font color="#0000ff">show -segment</font>

                                *** SEGMENTS ***
 Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options
 -------------------------------------------------------------------------------------------
 A                               $HOME/myApp/aA.dat  BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
 DEFAULT                         $HOME/myApp/others.dat
                                                     BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
GDE&gt; <font color="#0000ff">change -segment A -file=$HOME/myApp/backup/aA.dat</font>
GDE&gt; <font color="#0000ff">change -segment DEFAULT -file=$HOME/myApp/backup/others.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                *** SEGMENTS ***
 Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options
 -------------------------------------------------------------------------------------------
 A                               $HOME/myApp/<span style="background: #ffff00">backup/</span>aA.dat
                                                     BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
 DEFAULT                         $HOME/myApp/<span style="background: #ffff00">backup/</span>others.dat
                                                     BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
GDE&gt; <font color="#0000ff">show -region</font>

                                *** REGIONS ***
                                                                                                Std      Inst
                                 Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb
 Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn
 --------------------------------------------------------------------------------------------------------------------------
 A                               A                                  0     4080   255 NEVER      Y    Y   DISABLED DISABLED
 DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED

                          *** JOURNALING INFORMATION ***
 Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch
 --------------------------------------------------------------------------------------------------------
 A                               $HOME/myApp/aA.mjl        Y      2308       2048       2048      8386560

 DEFAULT                         $HOME/myApp/others.mjl    Y      2308       2048       2048      8386560

GDE&gt; <font color="#0000ff">change -region A -journal=file=$HOME/myApp/backup/aA.mjl</font>
GDE&gt; <font color="#0000ff">change -region DEFAULT -journal=file=$HOME/myApp/backup/others.mjl</font>
GDE&gt; <font color="#0000ff">show -region</font>

                                *** REGIONS ***
                                                                                                Std      Inst
                                 Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb
 Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn
 --------------------------------------------------------------------------------------------------------------------------
 A                               A                                  0     4080   255 NEVER      Y    Y   DISABLED DISABLED
 DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED

                          *** JOURNALING INFORMATION ***
 Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch
 --------------------------------------------------------------------------------------------------------
 A                               $HOME/myApp/<span style="background: #ffff00">backup/</span>aA.mjl
                                                           Y      2308       2048       2048      8386560

 DEFAULT                         $HOME/myApp/<span style="background: #ffff00">backup/</span>others.mjl
                                                           Y      2308       2048       2048      8386560

GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDUPDATE, Updating Global Directory file 
        /home/gtmuser/myApp/backup/gtm.gld
gtmuser@philadelphia:~/myApp/backup$</pre><p>
Confirm the values of the last global nodes of ^a and ^b are equal
and opposite (demonstrating the value of transaction processing):</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64441</span> -910877047 910877047 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~/myApp/backup$ </pre><p>
Notice the file names of the bytestream backups that we will restore
one by one.</p>
<pre class="western">gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">ls -l backup/*.bck</font>
-rw-rw-rw- 1 gtmuser gtmuser 324608 Dec  2 17:54 aA20141202175445.bck
-rw-rw-rw- 1 gtmuser gtmuser 324608 Dec  2 17:56 aA20141202175610.bck
-rw-rw-rw- 1 gtmuser gtmuser 332800 Dec  2 17:56 aA20141202175650.bck
-rw-rw-rw- 1 gtmuser gtmuser 320512 Dec  2 17:59 aA20141202175946.bck
-rw-rw-rw- 1 gtmuser gtmuser 324608 Dec  2 17:54 gtm20141202175445.bck
-rw-rw-rw- 1 gtmuser gtmuser 324608 Dec  2 17:56 gtm20141202175610.bck
-rw-rw-rw- 1 gtmuser gtmuser 332800 Dec  2 17:56 gtm20141202175650.bck
-rw-rw-rw- 1 gtmuser gtmuser 320512 Dec  2 17:59 gtm20141202175946.bck
gtmuser@philadelphia:~/myApp/backup$ </pre><p>
Restore the first bytestream backup (with the since=database
qualifier), and check the values of ^a and ^b:</p>
<pre class="western">gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore aA.dat aA20141202175445.bck</font> 

RESTORE COMPLETED
14 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore others.dat gtm20141202175445.bck</font> 

RESTORE COMPLETED
14 blocks restored
gtmuser@philadelphia:~/myApp/backup$ </pre><p>
Confirm new values for <b>^a</b> and <b>^b</b>. Notice that the time
stamp is later than that of the database before the first bytestream
backup (with a <b>since=database</b> qualifier) was restored and the
values of the nodes in <b>^a</b> and <b>^b</b> still add up to zero.</p>
<pre class="western">gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64485</span> -1612950378 1612950378 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~/myApp/backup$ </pre><p>
Restore the second bytestream backup (the first with a
<b>since=bytestream</b> qualifier), and check the values. Repeat for
any additional bytestream backups. Notice that the final values are
the same as the final values in <b>myApp</b>.</p>
<pre class="western">gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore aA.dat aA20141202175610.bck</font> 

RESTORE COMPLETED
14 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore others.dat gtm20141202175610.bck</font> 

RESTORE COMPLETED
14 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64570</span> -1558529283 1558529283 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore aA.dat aA20141202175650.bck</font> 

RESTORE COMPLETED
16 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore others.dat gtm20141202175650.bck</font> 

RESTORE COMPLETED
16 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64610</span> -2074012206 2074012206 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore aA.dat aA20141202175946.bck</font> 

RESTORE COMPLETED
13 blocks restored
gtmuser@philadelphia:~/myApp/backup$ <font color="#ff0000">mupip restore others.dat gtm20141202175946.bck</font> 

RESTORE COMPLETED
13 blocks restored
gtmuser@philadelphia:~$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,<span style="background: #ffff00">64737</span> -778521900 778521900 <span style="background: #ffff00">0</span>
gtmuser@philadelphia:~$ </pre><p>
Note that ending values of ^a and ^b in the environment with the
restored backups is exactly the same as in the original database.
Also, the values of ^a and ^b always add to zero even though the
global variables reside in different databases, demonstrating
transaction processing.</p>
<h2><a name="ReplicationR"></a>Replication Briefly Revisited</h2>
<p>We have been ignoring Cape Town and Shanghai during the backup
exercise, and we have created quite a backlog. Here is the backlog
report in the myApp environment in Philadelphia. [If you are using
the same shell session to restore backups, you will need to <b>source
myApp/gtmenv</b> to get the environment variables for the original
environment, and restart Source Servers if they are not running.]</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000"><span style="background: transparent">mupip replicate -source -showbacklog</span></font>
Fri Dec  5 04:50:18 2014 : Initiating SHOWBACKLOG operation on source server pid [1068] for secondary instance [CapeTown]
<span style="background: #ffff00">1860</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
1866 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server
Fri Dec  5 04:50:18 2014 : Initiating SHOWBACKLOG operation on source server pid [1064] for secondary instance [Shanghai]
<span style="background: #ffff00">1860</span> : backlog number of transactions written to journal pool and yet to be sent by the source server
1866 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server
gtmuser@philadelphia:~/myApp$ </pre><p>
Boot Shanghai and check the state of the database with respect to <b>^a</b>
and <b>^b</b> – notice the error because no node of ^a is defined. 
</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">source gtmenv</font>
gtmuser@shanghai:~/myApp$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
 %GTM-E-NULSUBSC, Null subscripts are not allowed for region: A
%GTM-I-GVIS,            Global variable: ^a(&quot;&quot;)
gtmuser@shanghai:~/myApp$ </pre><p>
Then execute the myApp/replicating_start script and notice that
Shanghai catches up.</p>
<pre class="western">gtmuser@shanghai:~/myApp$ <font color="#ff0000">./replicating_start</font> 
Fri Nov 11 07:12:07 2011 : Initiating START of source server for secondary instance [dummy]
gtmuser@shanghai:~/myApp$ <font color="#ff0000">mumps -run %XCMD 'set x=$order(^a(&quot;&quot;),-1) write x,&quot; &quot;,^a(x),&quot; &quot;,^b(x),&quot; &quot;,^a(x)+^b(x),!'</font>
63523,64737 -778521900 778521900 0
gtmuser@shanghai:~/myApp$</pre><p>
Notice that Philadelphia now shows a zero backlog for Shanghai, but
still has a large backlog for CapeTown.</p>
<pre class="western">gtmuser@philadelphia:~/myApp$ <font color="#ff0000">mupip replicate -source -showbacklog</font>
Fri Dec  5 05:05:04 2014 : Initiating SHOWBACKLOG operation on source server pid [1068] for secondary instance [CapeTown]
1860 : backlog number of transactions written to journal pool and yet to be sent by the source server
1866 : sequence number of last transaction written to journal pool
6 : sequence number of last transaction sent by source server
Fri Dec  5 05:05:04 2014 : Initiating SHOWBACKLOG operation on source server pid [1064] for secondary instance [Shanghai]
0 : backlog number of transactions written to journal pool and yet to be sent by the source server
1866 : sequence number of last transaction written to journal pool
1866 : sequence number of last transaction sent by source server
gtmuser@philadelphia:~/myApp$ </pre><p>
If you like, you can similarly boot CapeTown and show that it also
clears the backlog automatically. Shut down the instances when you
are done.</p>
<h2><a name="Unicode"></a>Unicode (ISO/IEC-10646)</h2>
<p>GT.M supports international character sets using Unicode. A mumps
process can operate in one of two modes: M mode and UTF-8 mode, which
is specified by the environment variable <b>gtm_chset</b> at process
startup and which is immutable for the life of the process.</p>
<p>In M mode, the process interprets strings as single byte
characters with characters from $Char(0) through $Char(127) encoded
as ASCII (M mode). A GT.M process in M mode places no interpretation
on characters $Char(128) through $Char (255) – the application is
free to use any interpretation it chooses, and ISO-8859 variants are
commonly used. There is no distinction between a string of bytes and
a string of characters and all bytes are valid characters – the
concept of an illegal or a non-canonical character is a non-sequitur
in M mode.</p>
<p>In UTF-8 mode, the process by default interprets strings as
multi-byte characters encoded using UTF-8 (UTF-8 mode). Some
sequences of bytes are not defined by the standard, and are
considered illegal characters – for example $char(55296), U+D800,
is an illegal character. The process can also interpret a string as a
sequence of bytes, and the same string can have different properties
(such as its length) when it is considered a sequence of bytes than
as a sequence of characters.</p>
<p>Except when triggers are used, this interpretation is at the level
of the process: the database treats strings as binary data and does
not care how they are encoded. So, it is possible for the same
database to be concurrently accessed by mumps processes operating in
both M mode and UTF-8 mode. Mupip and other processes are not
concerned with this distinction. If the database has triggers, since
triggers are compiled code, all proceses that use a database must
have the same mode.</p>
<p>The mode of a process is controlled by the environment variable
<b>gtm_chset</b>. If it is not set, or has a value other than
<b>&quot;UTF-8&quot;</b>, the process operates in M mode. Within a
process the ISV $ZCHset can be used to test the mode.</p>
<p>For a process to operate in UTF-8 mode requires:</p>
<ul>
	<li/>
<p>ICU with a level of 3.6 or higher packaged as libicu. GT.M
	may also require the environment variable <b>gtm_icu_version</b> to
	be defined (the <b>gtmprofile</b> script attempts to detect and set
	it, if it is not set, but is not guaranteed to succeed).</p>
	<li/>
<p>The environment variable <b>LC_CTYPE</b> (or the
	environment variable <b>LC_ALL</b>) to specify a UTF-8 locale
	available on the system.</p>
</ul>
<p>The <b>locale</b> command provides a list of available locales;
the locale-gen command generates additional locales. In the example
below, the <b>locale</b> command is used to list available locales,
and the <b>locale-gen</b> command is used to generate the ar_JO.utf8
locale for Arabic as used in Jordan:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">locale -a</font>
C
C.UTF-8
en_AG
en_AG.utf8
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_IN.utf8
en_NG
en_NG.utf8
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZM
en_ZM.utf8
en_ZW.utf8
POSIX
gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo locale-gen ar_JO.utf8</font>
Generating locales...
  ar_JO.UTF-8... done
Generation complete.
gtmuser@gtmworkshop:~$ <font color="#ff0000">locale -a | grep ar_JO.utf8</font>
ar_JO.utf8
gtmuser@gtmworkshop:~$  </pre><p>
For interactive usage, the terminal emulator <u>must</u> be
configured to display characters in UTF-8 mode; <span style="background: #ffff00">otherwise
you will become very confused</span>.</p>
<p>This exercise uses two sessions, one with a mumps process in UTF-8
mode and the other using a mumps process in M mode. Create a <span style="font-variant: normal"><span style="font-style: normal"><b>utf8demo</b></span></span>
directory and two environment files within it, <b>gtmenv_m</b> and
<b>gtmenv_utf8</b> as follows:</p>
<pre class="western">gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000">cd utf8demo; jed gtmenv_m ; cat gtmenv_m</font>
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/<span style="background: #ffff00">utf8demo/</span>gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/<span style="background: #ffff00">utf8demo/</span>gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$HOME/utf8demo* $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000">cp gtmenv_m gtmenv_utf8 ; jed gtmenv_utf8 ; cat gtmenv_utf8</font> 
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64<span style="background: #ffff00">/utf8</span>
export gtmgbldir=$HOME/utf8demo/gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/utf8demo/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$HOME/utf8demo* $gtm_dist/libgtmutil.so&quot;
export gtm_chset=UTF-8
export LC_CTYPE=en_US.utf8 # or other UTF-8 locale
export gtm_icu_version=5.2 # or other version that you are using
export gtm_prompt=&quot;UTF8&gt;&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~/utf8demo$ </pre><p>
Create a global directory and database file, as you did before. Only
now, do this in the UTF-8 session to so that you can see that the
operation of the GDE utility program is the same.</p>
<pre class="western">gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000"><span style="background: transparent">source gtmenv_UTF8</span></font>
gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-GDUSEDEFS, Using defaults for Global Directory 
        /home/gtmuser/utf8demo/gtm.gld

GDE&gt; <font color="#0000ff">@/usr/lib/fis-gtm/V6.2-000_x86_64/utf8/gdedefaults</font>
%GDE-I-EXECOM, Executing command file /usr/lib/fis-gtm/V6.2-000_x86_64/utf8/gdedefaults

GDE&gt; <font color="#0000ff">show -segment</font>

                                <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">*** SEGMENTS ***</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">-------------------------------------------------------------------------------------------</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.dat</font>
                                                     <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">BG  DYN  4096       5000 10000 GLOB=1000</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">LOCK=  40</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">RES =   0</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">ENCR=OFF</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">MSLT=1024</font>
GDE&gt; <font color="#0000ff">change -segment DEFAULT -file=$HOME/utf8demo/gtm.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                *** SEGMENTS ***
 Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options
 -------------------------------------------------------------------------------------------
 DEFAULT                         $HOME/utf8demo/gtm.dat
                                                     BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file 
        /home/gtmuser/utf8demo/gtm.gld
gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000"><span style="background: transparent">mupip create</span></font>
Created file /home/gtmuser/utf8demo/gtm.dat
gtmuser@gtmworkshop:~/utf8demo$ </pre><p>
We use the <b>gtm_prompt</b> environment variable to avoid confusion
as to which mode a direct mode prompt is in.</p>
<pre class="western">gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000">mumps -dir</font>

UTF8&gt;<font color="#0000ff">write $zchset</font>
UTF-8
UTF8&gt;<font color="#0000ff">for i=0:1:255 set ^Ch(i)=$char(i)</font>

UTF8&gt;<font color="#0000ff">for i=0:16:240 write ! for j=0:1:15 write ^Ch(i+j),&quot; : &quot;</font>

 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  : :        : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: </font>
    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  : ▒ :  : ▒ : :  :  :  :  : </font>
  <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: ! : &quot; : # : $ : % : &amp; : ' : ( : ) : * : + : , : - : . : / : </font>
0 : 1 : 2 : 3 : 4 : 5 : 6 : 7 : 8 : 9 : : : ; : &lt; : = : &gt; : ? : 
@ : A : B : C : D : E : F : G : H : I : J : K : L : M : N : O : 
P : Q : R : S : T : U : V : W : X : Y : Z : [ : \ : ] : ^ : _ : 
` : a : b : c : d : e : f : g : h : i : j : k : l : m : n : o : 
p : q : r : s : t : u : v : w : x : y : z : { : | : } : ~ :  : 
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  :  :  :  :  :  :  :  :  : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  :  :  :  : :  :  :  :  : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: ¡ : ¢ : £ : ¤ : ¥ : ¦ : § : ¨ : © : ª : « : ¬ :  : ® : ¯ : </font>
° : ± : ² : ³ : ´ : µ : ¶ : · : ¸ : ¹ : º : » : ¼ : ½ : ¾ : ¿ : 
À : Á : Â : Ã : Ä : Å : Æ : Ç : È : É : Ê : Ë : Ì : Í : Î : Ï : 
Ð : Ñ : Ò : Ó : Ô : Õ : Ö : × : Ø : Ù : Ú : Û : Ü : Ý : Þ : ß : 
à : á : â : ã : ä : å : æ : ç : è : é : ê : ë : ì : í : î : ï : 
ð : ñ : ò : ó : ô : õ : ö : ÷ : ø : ù : ú : û : ü : ý : þ : ÿ : 
UTF8&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~/utf8demo$ </pre><p>
Start a shell in M mode and display in M mode the characters that you
just set in UTF-8 mode (remember to set your terminal emulator to a
single-byte encoding such as ISO-8859-1, or use a different terminal
emulator, <span style="background: #ffff00">otherwise you will get
confused</span>):</p>
<pre class="western">gtmuser@gtmworkshop:~/utf8demo$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">write $zchset</font>
M
GTM&gt;<font color="#0000ff">for i=0:16:240 write ! for j=0:1:15 write ^Ch(i+j),&quot; : &quot;</font>

 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  : :        : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: </font>
    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  : </font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">:  :  :  :  :  :  :  : ▒ :  : ▒ : :  :  :  :  : </font>
  <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">: ! : &quot; : # : $ : % : &amp; : ' : ( : ) : * : + : , : - : . : / : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">0 : 1 : 2 : 3 : 4 : 5 : 6 : 7 : 8 : 9 : : : ; : &lt; : = : &gt; : ? : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">@ : A : B : C : D : E : F : G : H : I : J : K : L : M : N : O : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">P : Q : R : S : T : U : V : W : X : Y : Z : [ : \ : ] : ^ : _ : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">` : a : b : c : d : e : f : g : h : i : j : k : l : m : n : o : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">p : q : r : s : t : u : v : w : x : y : z : { : | : } : ~ :  : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â : Â: Â : Â : Â : Â : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Â : Â¡ : Â¢ : Â£ : Â¤ : Â¥ : Â¦ : Â§ : Â¨ : Â© : Âª : Â« : Â¬ : Â : Â® : Â¯ : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Â° : Â± : Â² : Â³ : Â´ : Âµ : Â¶ : Â· : Â¸ : Â¹ : Âº : Â» : Â¼ : Â½ : Â¾ : Â¿ : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã : Ã: Ã : Ã : Ã : Ã : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Ã : Ã¡ : Ã¢ : Ã£ : Ã¤ : Ã¥ : Ã¦ : Ã§ : Ã¨ : Ã© : Ãª : Ã« : Ã¬ : Ã : Ã® : Ã¯ : </font>
<font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Ã° : Ã± : Ã² : Ã³ : Ã´ : Ãµ : Ã¶ : Ã· : Ã¸ : Ã¹ : Ãº : Ã» : Ã¼ : Ã½ : Ã¾ : Ã¿ :</font> 
GTM&gt; </pre><p>
Notice that the lengths of the strings are different – the process
in UTF-8 mode reports all as being of length 1, whereas the M mode
process reports some as being of length 2.</p>
<pre class="western">UTF8&gt;f<font color="#0000ff">or i=0:16:240 write ! for j=0:1:15 write $length(^Ch(i+j)),&quot; : &quot;</font>

1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
UTF8&gt;

GTM&gt;<font color="#0000ff">for i=0:16:240 write ! for j=0:1:15 write $length(^Ch(i+j)),&quot; : &quot;</font>

1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
GTM&gt;</pre><p>
However, both report the same string lengths in bytes using the
$Zlength() function instead of the $Length() function.</p>
<pre class="western">UTF8&gt;f<font color="#0000ff">or i=0:16:240 write ! for j=0:1:15 write $</font><font color="#0000ff"><span style="background: #ffff00">z</span></font><font color="#0000ff">length(^Ch(i+j)),&quot; : &quot;</font>

1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
UTF8&gt;</pre><p>
and</p>
<pre class="western">GTM&gt;f<font color="#0000ff">or i=0:16:240 write ! for j=0:1:15 write $</font><font color="#0000ff"><span style="background: #ffff00">z</span></font><font color="#0000ff">length(^Ch(i+j)),&quot; : &quot;</font>

1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 : 1 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 : 2 :
GTM&gt;</pre><p>
Remember that Unicode only provides a character encoding. The
ordering of strings encoded in UTF-8 may not be linguistically or
culturally correct for your language. For example, Chinese names may
be encoded in UTF-8 using characters in either the simplified or the
traditional Chinese script, but the linguistically and culturally
appropriate ordering of names (for example in the Beijing phone book)
is the order in pinyin, which uses the Latin script. In order to use
GT.M to store strings in the correct order, there may be an
additional requirement to provide a collation module.</p>
<h2><a name="Encryption"></a>Database Encryption</h2>
<p>Before proceeding with this exercise, it is important to
understand the limitations and architecture of GT.M database
encryption: <i><u>GT.M itself includes no cryptographic software
whatsoever and performs no encryption</u></i> – it has a plug-in
architecture with a reference plug-in that interfaces with GPG (GNU
Privacy Guard) and OpenSSL. Remember also that key management &amp;
distribution is a much harder problem than database encryption
itself.</p>
<p>The exercise below illustrates the reference implementation and
GPG more than it does GT.M's capabilities. Much of the exercises here
are scripted with the reference plugin – we go through them here in
detail so that you can understand what happens under the covers.
Remember that there are actually three layers of encryption, required
in order to manage &amp; distribute keys securely:</p>
<ul>
	<li/>
<p>The data in the database is encrypted using a symmetric
	cipher (AES).</p>
	<li/>
<p>The symmetric cipher itself, encrypted with the user's RSA
	public key, resides in a text file on disk. Text files containing
	encrypted database keys for the database files in the database are
	in a text file pointed to by the environment variable <b>$gtm_dbkeys</b>.</p>
	<li/>
<p>The user's RSA private key resides in a key ring encrypted
	with a symmetric cipher (also referred to as a passphrase or
	password). This password is entered by the user and is provided to
	child processes in an obfuscated form in the environment. When a
	mumps process at startup sees the null string as a value of the
	environment variable <b>$gtm_passwd</b>, it prompts for the password
	to the GPG keyring, and then places an obfuscated version of the
	password in the environment so that processes spawned by the Job and
	ZSYstem commands have access to the password (this is the only way
	to provide the password to a MUPIP or DSE process).</p>
</ul>
<p>There are two users, Helen, who administers and distributes keys,
and Phil, who is a normal database user. The private key needed by a
process to decrypt the file, and get access to the key to the
symmetric cipher is in the GPG keyring. Phil and Helen must each
generate a public-private key-pair and exchange their public keys.</p>
<p>The creation of keys requires a considerable amount of entropy
(randomness). This is problematic on virtual machines. You can either
create the keys on the host (which should have a source of entropy
from network traffic and disk activity) and ship them to the guest,
or you can install the haveged package (see
<a href="https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged">https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged</a>):
<font color="#ff0000"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><span style="background: transparent">sudo
aptitude install haveged</span></font></font></p>
<p>Note that owing to available functionality with GPG, since the
reference plug-in uses RSA exclusively as an asymmetric cipher, the
asymmetric keys have to be generated in two steps. First Helen.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">export GNUPGHOME=~/.helengnupg</font>
gtmuser@philadelphia:~$ <font color="#ff0000">mkdir $GNUPGHOME</font>
gtmuser@philadelphia:~$ <font color="#ff0000">chmod go-rwx $GNUPGHOME</font>
gtmuser@philadelphia:~$ <font color="#ff0000">gpg --gen-key</font>
gpg (GnuPG) 1.4.16; Copyright (C) 2013 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? <font color="#ff0000">4</font>
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 
Key does not expire at all
Is this correct? (y/N) <font color="#ff0000">y</font>

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    &quot;Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;&quot;

Real name: <font color="#ff0000">Helen Keymaster</font>
Email address: <font color="#ff0000">helen.keymaster@gt.m</font>
Comment: <font color="#ff0000">Demo for GT.M Workshop</font>
You selected this USER-ID:
    &quot;Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? <font color="#008000">O</font>
You need a Passphrase to protect your secret key.

Enter passphrase: <font face="DejaVu Serif, Bitstream Vera Serif, serif"><font size="2" style="font-size: 11pt"><i><span style="font-weight: normal">(use a passphrase of your choice)</span></i></font></font>
Repeat passphrase:

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 280 more bytes)
......+++++
..+++++
gpg: /home/gtmuser/.helengnupg/trustdb.gpg: trustdb created
gpg: key A863791B marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
pub   2048R/A863791B 2014-12-05
      Key fingerprint = 983C C19C 26F4 4188 FDEB  F20B DD6A 26FA A863 791B
uid                  Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;

Note that this key cannot be used for encryption.  You may want to use
the command &quot;--edit-key&quot; to generate a subkey for this purpose.
gtmuser@philadelphia:~$ <font color="#ff0000">gpg --edit-key helen.keymaster@gt.m</font>
gpg (GnuPG) 1.4.16; Copyright (C) 2013 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

pub  2048R/A863791B  created: 2014-12-05  expires: never       usage: SC  
                     trust: ultimate      validity: ultimate
[ultimate] (1). Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;

gpg&gt; <font color="#ff0000">addkey</font>
Key is protected.

You need a passphrase to unlock the secret key for
user: &quot;Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;&quot;
2048-bit RSA key, ID A863791B, created 2014-12-05

Please select what kind of key you want:
   (3) DSA (sign only)
   (4) RSA (sign only)
   (5) Elgamal (encrypt only)
   (6) RSA (encrypt only)
Your selection? <font color="#ff0000">6</font>
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 
Key does not expire at all
Is this correct? (y/N) <font color="#ff0000">y</font>
Really create? (y/N) <font color="#ff0000">y</font>
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
...+++++
......+++++

pub  2048R/A863791B  created: 2014-12-05  expires: never       usage: SC  
                     trust: ultimate      validity: ultimate
sub  2048R/6BB9EA62  created: 2014-12-05  expires: never       usage: E   
[ultimate] (1). Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;

gpg&gt; <font color="#ff0000">save</font>
gtmuser@philadelphia:~$</pre><p>
The Helen keyring now has RSA keys for both encryption and signing.
And now for the Phil keyring.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">export GNUPGHOME=~/.philgnupg</font>
gtmuser@philadelphia:~$ <font color="#ff0000">mkdir $GNUPGHOME</font>
gtmuser@philadelphia:~$ <font color="#ff0000">chmod go-rwx $GNUPGHOME</font>
gtmuser@philadelphia:~$ <font color="#ff0000">gpg --gen-key</font>
gpg (GnuPG) 1.4.16; Copyright (C) 2013 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

gpg: keyring `/home/gtmuser/.philgnupg/secring.gpg' created
gpg: keyring `/home/gtmuser/.philgnupg/pubring.gpg' created
Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? <font color="#ff0000">4</font>
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 
Key does not expire at all
Is this correct? (y/N) <font color="#ff0000">y</font>

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    &quot;Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;&quot;

Real name: <font color="#ff0000">Phil Keyuser</font>
Email address: <font color="#ff0000">phil.keyuser@gt.m</font>
Comment: <font color="#ff0000">Demo for GT.M Workshop</font>
You selected this USER-ID:
    &quot;Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? <font color="#ff0000">o</font>
You need a Passphrase to protect your secret key.

Enter passphrase: <font face="DejaVu Serif, Bitstream Vera Serif, serif"><font size="2" style="font-size: 11pt"><i><span style="font-weight: normal">(use a passphrase of your choice)</span></i></font></font>
Repeat passphrase:

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
..........+++++
..+++++
gpg: /home/gtmuser/.philgnupg/trustdb.gpg: trustdb created
gpg: key BDA0E521 marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
pub   2048R/BDA0E521 2014-12-05
      Key fingerprint = 472E C04A B22D F87C 9033  6D20 DFBF 318D BDA0 E521
uid                  Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;

Note that this key cannot be used for encryption.  You may want to use
the command &quot;--edit-key&quot; to generate a subkey for this purpose.
gtmuser@philadelphia:~$ <font color="#ff0000">gpg --edit-key phil.keyuser@gt.m</font>
gpg (GnuPG) 1.4.16; Copyright (C) 2013 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

pub  2048R/BDA0E521  created: 2014-12-05  expires: never       usage: SC  
                     trust: ultimate      validity: ultimate
[ultimate] (1). Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;

gpg&gt; <font color="#ff0000">addkey</font>
Key is protected.

You need a passphrase to unlock the secret key for
user: &quot;Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;&quot;
2048-bit RSA key, ID BDA0E521, created 2014-12-05

Enter passphrase:

Please select what kind of key you want:
   (3) DSA (sign only)
   (4) RSA (sign only)
   (5) Elgamal (encrypt only)
   (6) RSA (encrypt only)
Your selection? <font color="#ff0000">6</font>
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 
Key does not expire at all
Is this correct? (y/N) <font color="#ff0000">y</font>
Really create? (y/N) <font color="#ff0000">y</font>
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
....+++++
+++++

pub  2048R/BDA0E521  created: 2014-12-05  expires: never       usage: SC  
                     trust: ultimate      validity: ultimate
sub  2048R/6403B065  created: 2014-12-05  expires: never       usage: E   
[ultimate] (1). Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;

gpg&gt; <font color="#ff0000">save</font>
gtmuser@philadelphia:~$</pre><p>
Export the Helen public key. In practice, you would need to export it
and transfer it to Phil.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">gpg --armor --output helen.publickey.txt --export helen.keymaster@gt.m</font>
gtmuser@philadelphia:~$ <font color="#ff0000">ls -l helen.publickey.txt</font> 
-rw-rw-r-- 1 gtmuser gtmuser 1743 Dec  5 06:18 helen.publickey.txt
gtmuser@philadelphia:~$</pre><p>
Phil should similarly export his public key.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">gpg --armor --output phil.publickey.txt --export phil.keyuser@gt.m</font>
gtmuser@philadelphia:~$ <font color="#ff0000">ls -l phil.publickey.txt</font> 
-rw-rw-r-- 1 gtmuser gtmuser 1735 Dec  5 06:21 phil.publickey.txt
gtmuser@philadelphia:~$</pre><p>
Helen should import Phil's public key.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">gpg --import phil.publickey.txt</font> 
gpg: key BDA0E521: public key &quot;Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;&quot; imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
gtmuser@philadelphia:~$ </pre><p>
And Phil should likewise import Helen's public key.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">gpg --import helen.publickey.txt</font> 
gpg: key A863791B: public key &quot;Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;&quot; imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
gtmuser@philadelphia:~$</pre><p>
This completes the key exchange required for Helen to later securely
transmit to Phil the key to the symmetric cipher. Alternatively,
Helen and Phil may both also upload their public keys to a keyserver
such as pgp.mit.edu for anyone who might need their public keys. They
should directly exchange their public key fingerprints over a
different channel, such as a fax or phone call, in order to protect
themselves against “man in the middle” attacks.</p>
<p>Helen can now manually generate a 32-byte key for the symmetric
cipher, but it is better to use a truly random key using GPG or other
tool (for example, <a href="http://www.random.org/" target="_blank">http://www.random.org</a>).
If you have not installed the haveged package, you may want to use
<font color="#ff0000"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gpg
-gen-random 1 32</font></font> instead to avoid depleting the entropy
in your system. This key is then encrypted with the Phil public key
and signed with the Helen private key. Then push the key to the
guest.</p>
<pre class="western">gtmuser@philadelphia:~$ <font color="#ff0000">gpg --gen-random 2 32 | gpg --encrypt --recipient phil.keyuser@gt.m --sign --armor &gt;gtm_workshop_key.txt</font>

You need a passphrase to unlock the secret key for
user: &quot;Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;&quot;
2048-bit RSA key, ID 40736E89, created 2009-12-15

Enter passphrase:

gpg: 95884D50: There is no assurance this key belongs to the named user

pub  2048R/95884D50 2009-12-15 Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Primary key fingerprint: 6DDA 1679 8BE6 E3A3 67B7  16B7 6F1B DEC1 72DF CE93</font>
      <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Subkey fingerprint: 190E A578 8C8C 380E DEB1  7862 55B8 5E61 9588 4D50</font>

It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.

Use this key anyway? (y/N) <font color="#008000">y</font>
gtmuser@philadelphia:~$ </pre><p>
As the Phil user, create a directory <b>enc</b>, with a <b>gtmenv</b>
file to set the environment. You can copy the <b>gtmenv</b> file from
a directory such as myApp. Also, create a master key file for the
environment variable <b>gtm_dbkeys</b> to point to. Note that
libconfig file syntax needs to be just right.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mkdir enc</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">fte enc/env</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">cat enc/env</font>
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/<span style="background: #ffff00">enc/</span>gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_principal_editing=EDITING
export gtm_repl_instance=$HOME/<span style="background: #ffff00">enc/</span>gtm.repl
export gtm_repl_instname=Philadelphia
export gtmroutines=&quot;$HOME/<span style="background: #ffff00">enc</span>* $gtm_dist/libgtmutil.so&quot;
<span style="background: #ffff00">export gtmcrypt_config=$HOME/enc/gtmcrypt.cfg</span>
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupipexport gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
gtmuser@philadelphia:~/enc$ <font color="#ff0000"><span style="background: transparent">source gtmenv</span></font>
gtmuser@philadelphia:~/enc$ <font color="#ff0000">jed $gtmcrypt_config # create file to link database files to encryption keys</font>
gtmuser@philadelphia:~/enc$ <font color="#ff0000">cat $gtmcrypt_config</font>
database: {
    keys:   (
              {
              dat: &quot;/home/gtmuser/enc/gtm.dat&quot; ;
              key: &quot;/home/gtmuser/enc/gtm.key&quot; ;
              }
            );
          }
gtmuser@philadelphia:~/enc$ </pre><p>
Create the database key file from the gtm_workshop_key.txt file from
Helen.</p>
<pre class="western">gtmuser@philadelphia:~/enc$ <font color="#ff0000">gpg --decrypt &lt;../gtm_workshop_key.txt | gpg --encrypt --armor --default-recipient-self --output gtm.key</font> 
You need a passphrase to unlock the secret key for
user: &quot;Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;&quot;
2048-bit RSA key, ID 6403B065, created 2014-12-05 (main key ID BDA0E521)

gpg: encrypted with 2048-bit RSA key, ID 6403B065, created 2014-12-05
      &quot;Phil Keyuser (Demo for GT.M Workshop) &lt;phil.keyuser@gt.m&gt;&quot;
gpg: Signature made Fri 05 Dec 2014 06:28:30 AM EST using RSA key ID A863791B
gpg: Good signature from &quot;Helen Keymaster (Demo for GT.M Workshop) &lt;helen.keymaster@gt.m&gt;&quot;
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 983C C19C 26F4 4188 FDEB  F20B DD6A 26FA A863 791B
gtmuser@philadelphia:~/enc$ <font color="#ff0000">cat gtm.key</font>
-----BEGIN PGP MESSAGE-----
Version: GnuPG v1

hQEMA3tOq75kA7BlAQf8CnCY3+tV8ZOTHtXWR9Ph6Ce1bBWvCLolBw6x2omIQ2f2
ewFXGBirbwRCC7RvADVHwrAalGajlgv52vYqK7fhD1Q4lImel6puTy+ZZOoXGrgO
x+fisNNqC6rFywuF1B3eYBZHoDK2tJDuYdcpmz0filqfXd5pKrZGPsY+SbFxrNUT
6JhhDFD8B7qU8KXXI5hjdReh1YLRxEt3YOH5HohRV913ebuLppxbq7JFl/5Z98Jj
LkU/PROkB1smDQcLFO8I19QIE0TgtmpCk410CzUb/cxJ42cKJYaRTGJVOiDOD9Er
ktktlcGr3V74d3RV1UKQ899hhuw5t5SDLuC5PlYFBNJeAfnBXRMEEI5/y+nnA6Zd
58iJt8T2FjLspm+JnCpyp3mff3NzLgxJusKrEHjgIUscmxx41axGDxq/+Z1qSyHn
IV5Pg3eIpJdkM/PjDvxx1umob8N+Rr6CsfbDYuUG5w==
=uGve
-----END PGP MESSAGE-----
gtmuser@philadelphia:~/enc$ </pre><p>
Now create a global directory that specifies that the database file
is encrypted.</p>
<pre class="western">gtmuser@gtmworkshop:~/enc$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-GDUSEDEFS, Using defaults for Global Directory
        <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">/home/gtmuser/enc/gtm.gld</font>

GDE&gt; <font color="#0000ff">change -segment default -encryption -file=$HOME/enc/gtm.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                *** SEGMENTS ***
 Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options
 -------------------------------------------------------------------------------------------
 DEFAULT                         $HOME/enc/gtm.dat   BG  DYN  1024        100   100 GLOB=1024
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=ON
                                                                                    MSLT=1024
GDE&gt; <font color="#0000ff">change -region DEFAULT -journal=(before,file=&quot;$HOME/enc/gtm.mjl&quot;)</font>
GDE&gt; <font color="#0000ff">show -region</font>

                                *** REGIONS ***
                                                                                                Std      Inst
                                 Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb
 Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn
 --------------------------------------------------------------------------------------------------------------------------
 DEFAULT                         DEFAULT                            0      256    64 NEVER      N    Y   DISABLED DISABLED

                          *** JOURNALING INFORMATION ***
 Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch
 --------------------------------------------------------------------------------------------------------
 DEFAULT                         $HOME/enc/gtm.mjl         Y      2308       2048       2048      8386560

GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file 
        /home/gtmuser/enc/gtm.gld
gtmuser@philadelphia:~/enc$ </pre><p>
Now create the database file. Notice that in order to supply mupip
create with the obfuscated GPG keyring password in the environment,
we have to invoke mupip through an intermediary mumps process that
prompts for the password and places and obfuscated password in the
environment.</p>
<pre class="western">gtmuser@philadelphia:~/enc$ <font color="#ff0000">gtm_passwd=&quot;&quot; mumps -dir</font>
Enter Passphrase: 
GTM&gt;<font color="#0000ff">zsystem &quot;$gtm_dist/mupip create&quot;</font>
Created file /home/gtmuser/enc/gtm.dat

GTM&gt;<font color="#0000ff">halt</font>
gtmuser@philadelphia:~/enc$</pre><p>
You can use DSE to verify that the file is encrypted. Note the
warning from DSE which means that it can only access unencrypted
parts of the database file, 
</p>
<pre class="western">gtmuser@philadelphia:~/enc$ <font color="#ff0000">$gtm_dist/dse dump -fileheader</font>
%GTM-W-CRYPTINIT, Could not initialize encryption library while opening encrypted file /home/gtmuser/enc/gtm.dat. Environment variable gtm_passwd not set

File    /home/gtmuser/enc/gtm.dat
Region  DEFAULT


File            /home/gtmuser/enc/gtm.dat
Region          DEFAULT
Date/Time       05-DEC-2014 20:55:40 [$H = 63526,75340]
  Access method                          BG  Global Buffers                1024
  Reserved Bytes                          0  Block size (in bytes)         1024
  Maximum record size                   256  Starting VBN                   513
  Maximum key size                       64  Total blocks            0x00000065
  Null subscripts                     NEVER  Free blocks             0x00000062
  Standard Null Collation             FALSE  Free space              0x00000000
  Last Record Backup     0x0000000000000001  Extension Count                100
  Last Database Backup   0x0000000000000001  Number of local maps             1
  Last Bytestream Backup 0x0000000000000001  Lock space              0x00000028
  In critical section            0x00000000  Timers pending                   0
  Cache freeze id                0x00000000  Flush timer            00:00:01:00
  Freeze match                   0x00000000  Flush trigger                  960
  Current transaction    0x0000000000000001  No. of writes/flush              7
  Maximum TN             0xFFFFFFFF83FFFFFF  Certified for Upgrade to        V6
  Maximum TN Warn        0xFFFFFFFD93FFFFFF  Desired DB Format               V6
  Master Bitmap Size                    496  Blocks to Upgrade       0x00000000
  Create in progress                  FALSE  Modified cache blocks            0
  Reference count                         1  Wait Disk                        0
  Journal State                         OFF  Journal Before imaging        TRUE
  Journal Allocation                   2048  Journal Extension             2048
  Journal Buffer Size                  2308  Journal Alignsize             4096
  Journal AutoSwitchLimit           8386560  Journal Epoch Interval         300
  Journal Yield Limit                     8  Journal Sync IO              FALSE
  Journal File: /home/gtmuser/enc/gtm.mjl
  Mutex Hard Spin Count                 128  Mutex Sleep Spin Count         128
  Mutex Queue Slots                    1024  KILLs in progress                0
  Replication State                     OFF  Region Seqno    0x0000000000000001
  Zqgblmod Seqno         0x0000000000000000  Zqgblmod Trans  0x0000000000000000
  Endian Format                      LITTLE  Commit Wait Spin Count          16
  <span style="background: #ffff00">Database file encrypted              TRUE</span>  Inst Freeze on Error         FALSE
  Spanning Node Absent                 TRUE  Maximum Key Size Assured      TRUE
gtmuser@philadelphia:~/enc$ </pre><p>
Now turn on journaling, and attempt to make some updates without
setting the gtm_passed environment variable. This fails. Now, invoke
GT.M with the environment variable set, and make an update.</p>
<pre class="western">gtmuser@philadelphia:~/enc$ <font color="#ff0000">mupip set -journal=&quot;before,on&quot; -region &quot;*&quot;</font>
%GTM-W-CRYPTINIT, Could not initialize encryption library while opening encrypted file /home/gtmuser/enc/gtm.dat. Environment variable gtm_passwd not set
%GTM-I-JNLCREATE, Journal file /home/gtmuser/enc/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
gtmuser@philadelphia:~/enc$ <font color="#ff0000"><span style="background: transparent">mumps -dir</span></font>

GTM&gt;<font color="#0000ff">set ^X=&quot;The quick brown fox&quot;</font>
%GTM-E-CRYPTINIT, Could not initialize encryption library while opening encrypted file /home/gtmuser/enc/gtm.dat. Environment variable gtm_passwd not set

GTM&gt;<font color="#0000ff">halt</font>
gtmuser@philadelphia:~/enc$ <font color="#ff0000"><span style="background: transparent">gtm_passwd=&quot;&quot; mumps -dir</span></font>
Enter Passphrase: 
GTM&gt;<font color="#0000ff">set ^X=&quot;This string should be encrypted in the database&quot;</font>

GTM&gt;<font color="#0000ff">halt</font>
gtmuser@philadelphia:~/enc$ </pre><p>
Confirm that the data is indeed visible in neither the database file
nor the journal file.</p>
<pre class="western">gtmuser@philadelphia:~/enc$ <font color="#ff0000">strings gtm.dat</font>
GDSDYNUNX03
/home/gtmuser/enc/gtm.mjl
TUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU
4y(q.
gtmuser@philadelphia:~/enc$ <font color="#ff0000">strings gtm.mjl</font>
GDSJNL24
philadelphia
gtmuser
gtmuser
philadelphia
gtmuser
gtmuser
/home/gtmuser/enc/gtm.dat
philadelphia
gtmuser
gtmuser
TO4&lt;
philadelphia
gtmuser
gtmuser
@UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU
gtmuser@philadelphia:~/enc$ </pre><h2>
<a name="Pulling"></a>Pulling it together</h2>
<p>Thus far, the Acculturation Workshop has taken you through core
concepts. Now, it is time to pull the concepts together. In order to
do that, we will go through a series of installations, each more
sophisticated than its predecessor, of the VistA application on GT.M.</p>
<p><u>No knowledge of VistA is assumed or required for the
Acculturation Workshop</u> – VistA is simply used as a freely
usable sample application to explore configuring an application on
GT.M.</p>
<h3>About VistA</h3>
<p>The <a href="http://va.gov/" target="_blank">US Department of
Veterans Affairs (VA)</a> operates one of the largest integrated
healthcare networks in the world. Delivering legally mandated high
quality care to veterans of the US armed forces, it has repeatedly
been recognized not only for the quality, but also for the
cost-effectiveness, of the care that it provides. VistA is a
healthcare information system (HIS) developed and maintained by the
VA. The software is in the public domain and freely available. Many
providers support VistA on a commercial basis, and there is an <a href="http://groups.google.com/group/hardhats" target="_blank">active
online VistA community</a>.</p>
<p>For all healthcare organizations, VistA can provide a
cost-effective enterprise resource planning (ERP) system. It is
written in the ANSI/ISO standard programming language M (also known
as MUMPS), With origins in the field of healthcare informatics, M is
the de facto standard for healthcare software.</p>
<p>The GT.M Acculturation Workshop uses the <a href="http://worldvista.org/World_VistA_EHR" target="_blank">WorldVistA
EHR<sup>®</sup></a> flavor of VistA as a sample GT.M application,
and can be downloaded from the <a href="http://sourceforge.net/projects/worldvista" target="_blank">WorldVistA
project at Source Forge</a>.</p>
<h3>Download VistA</h3>
<p>To get VistA, you will need to download two archive files, the
routines and the global variables. First, create a directory to store
the archive files, then download the files into that directory.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo mkdir -p /Distrib/VistA</font>
[sudo] password for gtmuser:
gtmuser@gtmworkshop:~$ <font color="#ff0000">sudo chown gtmuser.gtmuser /Distrib/VistA/</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">wget -P /Distrib/VistA/ </font><font color="#ff0000"><b>http://tinyurl.com/WVEHRVOE10Routines</b></font>

…

Length: 33432464 (32M) [application/octet-stream]
Saving to: ‘/Distrib/VistA/WVEHRVOE10Routines’

100%[========================================================================================&gt;] 33,432,464   970KB/s   in 36s    

2014-12-15 15:05:10 (895 KB/s) - ‘/Distrib/VistA/WVEHRVOE10Routines’ saved [33432464/33432464]

gtmuser@gtmworkshop:~$ <font color="#ff0000">wget -P /Distrib/VistA/ </font><font color="#ff0000"><b>http://tinyurl.com/WVEHRVOE10Globals</b></font>

…

Length: 140631465 (134M) [application/x-gzip]
Saving to: ‘/Distrib/VistA/WVEHRVOE10Globals’

100%[========================================================================================&gt;] 140,631,465  690KB/s   in 2m 49s 

2014-12-15 15:10:08 (813 KB/s) - ‘/Distrib/VistA/WVEHRVOE10Globals’ saved [140631465/140631465]

gtmuser@gtmworkshop:~$ </pre><h3>
Simple Environment</h3>
<p>The very simplest environment is one where you put everything –
source, object, global directory, database and journal files – in
one directory (as you did for the environments in the exercises
above). But for any real application, this would rapidly become
unwieldy.</p>
<p>The first step up from that simplest environment is to have
separate sub-directories for the source files, object files,
database; with shell scripts in the parent directory. Note that in
production environments, you should consider putting the journal
files elsewhere, on a file system on disks different from the
database, and ideally even on a separate disk controller.</p>
<p>Create a VistA directory. Use a g subdirectory for global
variables, an o subdirectory for object files and an r subdirectory
for routines. Create a file to source to set up environment
variables. Create a global directory and a database file into which
to load the global variables. We will not set gtm_principal_editing
since VistA has a mode where it manages its own screen cursors
(Screenman) which requires VistA application code to receive terminal
escape sequences.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mkdir -p VistA/{g,o,r}</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">nano VistA/gtmenv ; cat VistA/gtmenv</font>
export gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64
export gtmgbldir=$HOME/VistA/g/gtm.gld
export gtm_log=/tmp/fis-gtm/V6.2-000_x86_64
export gtm_tmp=$gtm_log
export gtm_repl_instance=$HOME/VistA/g/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$HOME/VistA/o*($HOME/VistA/r) $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~$ <font color="#ff0000">source VistA/gtmenv</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-GDUSEDEFS, Using defaults for Global Directory 
        /home/gtmuser/VistA/g/gtm.gld

GDE&gt; <font color="#0000ff">@/usr/lib/fis-gtm/V6.2-000_x86_64/gdedefaults</font>
%GDE-I-EXECOM, Executing command file /usr/lib/fis-gtm/V6.2-000_x86_64/gdedefaults

GDE&gt; <font color="#0000ff">change -segment DEFAULT -file=$HOME/VistA/g/gtm.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                *** SEGMENTS ***
 Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options
 -------------------------------------------------------------------------------------------
 DEFAULT                         $HOME/VistA/g/gtm.dat
                                                     BG  DYN  4096       5000 10000 GLOB=1000
                                                                                    LOCK=  40
                                                                                    RES =   0
                                                                                    ENCR=OFF
                                                                                    MSLT=1024
GDE&gt; <font color="#0000ff">change -region DEFAULT -journal=(before,file=&quot;$HOME/VistA/g//gtm.mjl&quot;)</font>
GDE&gt; <font color="#0000ff">show -region </font>

                                *** REGIONS ***
                                                                                                Std      Inst
                                 Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb
 Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn
 --------------------------------------------------------------------------------------------------------------------------
 DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED

                          *** JOURNALING INFORMATION ***
 Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch
 --------------------------------------------------------------------------------------------------------
 DEFAULT                         $HOME/VistA/g//gtm.mjl    Y      2308       2048       2048      8386560

GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file 
        /home/gtmuser/VistA/g/gtm.gld
gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip create</font>
Created file /home/gtmuser/VistA/g/gtm.dat
gtmuser@gtmworkshop:~$ </pre><p>
Load the global variables into the database.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">gzip -d &lt;/Distrib/VistA/WVEHRVOE10Globals | mupip load -stdin</font>
GT.M MUPIP EXTRACT
10-AUG-2010  14:38:37 ZWR
Beginning LOAD at record number: 3

LOAD TOTAL              Key Cnt: 20337342  Max Subsc Len: 223  Max Data Len: 834
Last LOAD record number: 20337344

gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -lhR VistA/</font>
VistA/:
total 4.0K
drwxrwxr-x 2 gtmuser gtmuser  34 Dec 15 15:33 g
-rw-rw-r-- 1 gtmuser gtmuser 384 Dec 15 15:25 gtmenv
drwxrwxr-x 2 gtmuser gtmuser   6 Dec 15 15:17 o
drwxrwxr-x 2 gtmuser gtmuser   6 Dec 15 15:17 r

VistA/g:
total 421M
-rw-rw-rw- 1 gtmuser gtmuser 451M Dec 15 15:39 gtm.dat
-rw-rw-r-- 1 gtmuser gtmuser 1.5K Dec 15 15:33 gtm.gld

VistA/o:
total 0

VistA/r:
total 0
gtmuser@gtmworkshop:~$ </pre><p>
Notice that the database is 451MiB and contains 20,337,342 global
variable nodes. Now, we can unpack the routines into the r directory.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">tar zxf /Distrib/VistA/WVEHRVOE10Routines -C VistA/</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls VistA/r | wc</font>
25163 25163 251422
gtmuser@gtmworkshop:~$ </pre><p>
This tells us that WorldVistA EHR has 25,163 source code modules. Now
that the globals are loaded into the newly created database, we can
turn on journaling so that we can recover the database in the event
the system crashes. This is handy even for development environments –
developers don't like to be kept waiting to recover environments and
disk is inexpensive!</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -journal=&quot;before,on&quot; -region DEFAULT</font>
%GTM-I-JNLCREATE, Journal file /home/gtmuser/VistA/g/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l VistA/g</font>
total 430948
-rw-rw-rw- 1 gtmuser gtmuser 472228352 Dec 15 15:51 gtm.dat
-rw-rw-r-- 1 gtmuser gtmuser      1536 Dec 15 15:33 gtm.gld
-rw-rw-rw- 1 gtmuser gtmuser     69632 Dec 15 15:51 gtm.mjl
gtmuser@gtmworkshop:~$</pre><p>
You can now run VistA – just enough to convince yourself that it is
working, then exit.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">set DUZ=1 do P^DI</font>


VA FileMan 22.0


Select OPTION: <font color="#0000ff">^</font>
GTM&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~$ </pre><p>
Note that GT.M has dynamically compiled modules as needed.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l VistA/o</font>
total 456
-rw-rw-r-- 1 gtmuser gtmuser 25752 Dec 15 15:53 DIALOG.o
-rw-rw-r-- 1 gtmuser gtmuser 11784 Dec 15 15:53 DIARB.o
-rw-rw-r-- 1 gtmuser gtmuser 22520 Dec 15 15:53 DIB.o
-rw-rw-r-- 1 gtmuser gtmuser 21528 Dec 15 15:53 DIC0.o
-rw-rw-r-- 1 gtmuser gtmuser 13496 Dec 15 15:53 DIC11.o
-rw-rw-r-- 1 gtmuser gtmuser 33160 Dec 15 15:53 DIC1.o
-rw-rw-r-- 1 gtmuser gtmuser 22520 Dec 15 15:53 DIC2.o
-rw-rw-r-- 1 gtmuser gtmuser 21176 Dec 15 15:53 DICATT2.o
-rw-rw-r-- 1 gtmuser gtmuser 14616 Dec 15 15:53 DICL.o
-rw-rw-r-- 1 gtmuser gtmuser 28808 Dec 15 15:53 DIC.o
-rw-rw-r-- 1 gtmuser gtmuser 18552 Dec 15 15:53 DICRW.o
-rw-rw-r-- 1 gtmuser gtmuser 15800 Dec 15 15:53 DICUIX1.o
-rw-rw-r-- 1 gtmuser gtmuser 20520 Dec 15 15:53 DICUIX2.o
-rw-rw-r-- 1 gtmuser gtmuser 19336 Dec 15 15:53 DICUIX.o
-rw-rw-r-- 1 gtmuser gtmuser 22472 Dec 15 15:53 DII.o
-rw-rw-r-- 1 gtmuser gtmuser 10424 Dec 15 15:53 DILF.o
-rw-rw-r-- 1 gtmuser gtmuser 29848 Dec 15 15:53 DILIBF.o
-rw-rw-r-- 1 gtmuser gtmuser  2904 Dec 15 15:53 DI.o
-rw-rw-r-- 1 gtmuser gtmuser 14104 Dec 15 15:53 DIQGU.o
-rw-rw-r-- 1 gtmuser gtmuser 27240 Dec 15 15:53 _DTC.o
-rw-rw-r-- 1 gtmuser gtmuser 23176 Dec 15 15:53 _ZOSV.o
gtmuser@gtmworkshop:~$ </pre><h3>
Pre-compiled Routines</h3>
<p>VistA is written to be portable across different MUMPS
implementations. This means that it is guaranteed to contain code
that is syntactically incorrect for every every MUMPS implementation.
As modules are dynamically compiled, they will generate compilation
errors that are sent to STDERR. Since you may find these
disconcerting, you can prevent them by dynamically compiling all the
modules.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cd VistA/o</font>
gtmuser@gtmworkshop:~/VistA/o$ <font color="#ff0000">find ../r -name \*.m -print -exec $gtm_dist/mumps {} \;</font>

…

gtmuser@gtmworkshop:~/VistA/o$</pre><p>
Ideally, we would simply compile with a <b>mumps *.m</b> command, but
25,163 routines would make for a command line longer than the shell
can handle. So, we use the find command; you can also compile using
the xargs command. You should also confirm that all routines were
compiled by counting the number of source modules and the number of
object modules.</p>
<pre class="western">gtmuser@gtmworkshop:~/VistA/o$ <font color="#ff0000">ls |wc</font>
  <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="background: #ffff00">25163</span></font>   <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">25163  251422</font>
gtmuser@gtmworkshop:~/VistA/o$ <font color="#ff0000">ls ../r|wc</font>
  <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="background: #ffff00">25163</span></font>   <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">25163  251422</font>
gtmuser@gtmworkshop:~/VistA/o$ </pre><p>
Make sure you can start and run VistA after recompiling the modules.</p>
<h3>Multiple GT.M versions</h3>
<p>GT.M object files are specific to each release of GT.M – so
V6.2-000 cannot use object files generated by V5.4-000A, for example.
Although the database format is more stable, a database file can only
be concurrently open only by processes of one GT.M. The same source
code, however, can be used by an unlimited number of GT.M releases.
Also, even within a single GT.M release, the same source code can be
used by processes running in M mode and UTF-8 mode – but the object
files are different. The directory tree structure implemented in the
simple environment allows only processes of only one GT.M release
operating in only one mode to use a set of GT.M source modules.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">tree -d VistA/</font>
VistA/
├── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">g</font>
├── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">o</font>
└── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">r</font>

3 directories
gtmuser@gtmworkshop:~$ </pre><p>
By creating another layer in the directory structure, the same VistA
routines can be made to work in multiple GT.M releases, for example,
if we had:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mkdir VistA/V6.2-000_x86_64</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -journal=disable -region DEFAULT</font>
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now DISABLED
gtmuser@gtmworkshop:~$ <font color="#ff0000">mv VistA/{g,o} VistA/V6.2-000_x86_64/</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">tree -d VistA/</font>
VistA/
├── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">r</font>
└── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">V6.2-000_x86_64</font>
    ├── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">g</font>
    └── <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">o</font>

4 directories
gtmuser@gtmworkshop:~$ </pre><p>
Notice that we simply moved the object, journal, global directory and
database files from one location to another, after disabling
journaling. Here are some rules for when you move files:</p>
<ul>
	<li/>
<p>GT.M assumes that source files have no embedded location
	information within (of course the programmer may make assumptions)</p>
	<li/>
<p>Object files include the absolute paths to the source files
	they were compiled from (in order to implement the $text()
	function). So, although you can move object files freely without
	impacting functionality, if you move a source file, you should
	recompile object files compiled from it.</p>
	<li/>
<p>Database files have pointers to their current journal files
	and journal files have pointers to their database files and prior
	generation journal files. The safe way to move database and journal
	files is to disable journaling, move the files, and re-enable them.
	This must be corrected.</p>
	<li/>
<p>Global directories have pointers to database files. The
	global directory should be edited with GDE to correct this. Also,
	although the journal file information in the DEFAULT region is not
	meaningful once the database is created, it should be edited since
	it may be used in the future to create a database file, and the
	journal file name from the global is placed in the database file
	header when a new database file is created.</p>
	<li/>
<p>Environment setup should be updated. Although our env file
	can exist anywhere, since it sets environment variables that include
	path information, it is probably best to move it to the
	V6.2-000_x86_64 directory.</p>
</ul>
<p>Fixing the above (starting with the environment file, since it
points to the global directory, and then the global directory, since
it points to the database file):</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mv VistA/gtmenv VistA/V6.2-000_x86_64/</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">nano VistA/V6.2-000_x86_64/gtmenv ; </font> <font color="#ff0000">cat VistA/V6.2-000_x86_64/gtmenv</font>
export gtmdir=$HOME/VistA
export gtmver=V6.2-000_x86_64
export gtm_dist=/usr/lib/fis-gtm/$gtmver
export gtmgbldir=$gtmdir/$gtmver/g/gtm.gld
export gtm_log=/tmp/fis-gtm/$gtmver
export gtm_tmp=$gtm_log
export gtm_repl_instance=$gtmdir/$gtmver/g/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$gtmdir/$gtmver/o*($gtmdir/r) $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~$ </pre><p>
Notice that since the GT.M version occurs in multiple locations, it
has been abstracted to the environment variable $gtmver. Also,
/home/gtmuser/VistA can be abstracted into an environment variable
$gtmdir. By modifying the global directory to use the environment
variables, the global directory becomes more portable.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">source VistA/V6.2-000_x86_64/gtmenv</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -run GDE</font>
%GDE-I-LOADGD, Loading Global Directory file
        <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">/home/gtmuser/VistA/V6.2-000_x86_64/g/gtm.gld</font>
%GDE-I-VERIFY, Verification OK


GDE&gt; <font color="#0000ff">change -segment DEFAULT -file=$gtmdir/$gtmver/g/gtm.dat</font>
GDE&gt; <font color="#0000ff">show -segment</font>

                                <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">*** SEGMENTS ***</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">-------------------------------------------------------------------------------------------</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.dat</font>
                                                     <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">BG  DYN  4096       5000 10000 GLOB=1000</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">LOCK=  40</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">RES =   0</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">ENCR=OFF</font>
                                                                                    <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">MSLT=1024</font>
GDE&gt; <font color="#0000ff">change -region DEFAULT -journal=file=$gtmdir/$gtmver/g/gtm.mjl</font>
GDE&gt; <font color="#0000ff">show -region</font>

                                <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">*** REGIONS ***</font>
                                                                                                <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Std      Inst</font>
                                 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Dynamic                          Def      Rec   Key Null       Null     Freeze   Qdb</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Region                          Segment                         Coll     Size  Size Subs       Coll Jnl on Error Rndwn</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">--------------------------------------------------------------------------------------------------------------------------</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">DEFAULT                         DEFAULT                            0     4080   255 NEVER      Y    Y   DISABLED DISABLED</font>

                          <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">*** JOURNALING INFORMATION ***</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Region                          Jnl File (def ext: .mjl)  Before Buff      Alloc      Exten   AutoSwitch</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">--------------------------------------------------------------------------------------------------------</font>
 <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.mjl</font>
                                                           <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">Y      2308       2048       2048      8386560</font>

GDE&gt; <font color="#0000ff">exit</font>
%GDE-I-VERIFY, Verification OK

%GDE-I-GDUPDATE, Updating Global Directory file 
        /home/gtmuser/VistA/V6.2-000_x86_64/g/gtm.gld
gtmuser@gtmworkshop:~$ </pre><p>
Now re-enable journaling so that the database and journal pointers
are correct. You will need to delete the prior journal file, because
the database file does not have a pointer to it, and GT.M will refuse
to create a new journal file where a file already exists that is not
pointed to by the database file.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">rm /home/gtmuser/VistA/V6.2-000_x86_64/g/gtm.mjl</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mupip set -journal=&quot;enable,on,before,file=$gtmdir/$gtmver/g/gtm.mjl&quot; -region DEFAULT</font>
%GTM-I-JNLCREATE, Journal file /home/gtmuser/VistA/V6.2-000_x86_64/g/gtm.mjl created for region DEFAULT with BEFORE_IMAGES
%GTM-W-JNLBUFFREGUPD, Journal file buffer size for region DEFAULT has been adjusted from 2308 to 2312.
%GTM-I-JNLSTATE, Journaling state for region DEFAULT is now ON
gtmuser@gtmworkshop:~$ </pre><p>
And now VistA is again ready for use with the new directory
structure:</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">set DUZ=1 do P^DI</font>


VA FileMan 22.0


Select OPTION: <font color="#0000ff">^</font>
GTM&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~$ </pre><p>
We can add additional directories for other versions of GT.M. e.g.,</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">mkdir -p VistA/V6.2-001_x86_64/{g,o}</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">tree -d VistA</font>
VistA
├── r
├── V6.2-000_x86_64
│   ├── g
│   └── o
└── V6.2-001_x86_64
    ├── g
    └── o

7 directories
gtmuser@gtmworkshop:~$ </pre><p>
This facilitates simple upgrades. For example, if you wanted to
migrate from V6.2-000 to (an as yet unreleased as of this writing)
V5.4-003, you could effect a rolling upgrade using replicating
between the V6.2-000 and V5.4-003 sub-directories within the same
directory.</p>
<h4>A Minor Refinement – GT.M Version Dependent Source</h4>
<p>In general, program source code is independent of the GT.M
version. On occasion, you may want to take advantage of an
enhancement in a GT.M version, with modified source code. You can
augment the g and o subdirectories with an r subdirectory for such
version specific source code modules. Of course, unless the env file
is updated accordingly, GT.M will never find the version specific
routines.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">for i in VistA/V* ; do mkdir $i/r ; done</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">tree -d VistA/</font>
VistA
├── r
├── V6.2-000_x86_64
│   ├── g
│   ├── o
│   └── <span style="background: #ffff00">r</span>
└── V6.2-001_x86_64
    ├── g
    ├── o
    └── <span style="background: #ffff00">r</span>

9 directories
gtmuser@gtmworkshop:~$ <font color="#ff0000">fte VistA/V6.2-000_x86_64/env</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">cat VistA/V6.2-000_x86_64/env</font>
export gtmdir=$HOME/VistA
export gtmver=V6.2-000_x86_64
export gtm_dist=/usr/lib/fis-gtm/$gtmver
export gtmgbldir=$gtmdir/$gtmver/g/gtm.gld
export gtm_log=/tmp/fis-gtm/$gtmver
export gtm_tmp=$gtm_log
export gtm_repl_instance=$gtmdir/$gtmver/g/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$gtmdir/$gtmver/o*(<span style="background: #ffff00">$gtmdir/$gtmver/r</span> $gtmdir/r) $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~$ <font color="#ff0000">source VistA/V6.2-000_x86_64/gtmenv</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">write $zroutines</font>
/home/gtmuser/VistA/V6.2-000_x86_64/o*(<span style="background: #ffff00">/home/gtmuser/VistA/V6.2-000_x86_64/r</span> /home/gtmuser/VistA/r) /usr/lib/fis-gtm/V6.2-000_x86_
64/libgtmutil.so
GTM&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~$ </pre><h3>
Segregating local modifications</h3>
<p>Installations of large applications often have local or
modifications. In such cases, it is important to be able to segregate
the local patches from the standard application distribution. This
can be effected by placing these routines in p subdirectories, and
placing the p subdirectories ahead of the r subdirectories where the
standard routines remain untouched.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">for i in VistA/V* ; do mkdir $i/p ; done</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000"><span style="background: transparent">mkdir $gtmdir/p</span></font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">tree -d VistA\</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">VistA</font>
├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">p</font>
├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">r</font>
├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">V6.2-000_x86_64</font>
│   ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">g</font>
│   ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">o</font>
│   ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">p</font>
│   └── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">r</font>
└── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">V6.2-001_x86_64</font>
    ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">g</font>
    ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">o</font>
    ├── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">p</font>
    └── <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">r</font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">12 directories</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">nano VistA/V6.2-000_x86_64/gtmenv ;  cat VistA/V6.2-000_x86_64/gtmenv</font></font>
export gtmdir=$HOME/VistA
export gtmver=V6.2-000_x86_64
export gtm_dist=/usr/lib/fis-gtm/$gtmver
export gtmgbldir=$gtmdir/$gtmver/g/gtm.gld
export gtm_log=/tmp/fis-gtm/$gtmver
export gtm_tmp=$gtm_log
export gtm_repl_instance=$gtmdir/$gtmver/g/gtm.repl
export gtm_repl_instname=dummy
export gtmroutines=&quot;$gtmdir/$gtmver/o*(<span style="background: #ffff00">$gtmdir/$gtmver/p</span> $gtmdir/$gtmver/r <span style="background: #ffff00">$gtmdir/p</span> $gtmdir/r) $gtm_dist/libgtmutil.so&quot;
mkdir -p $gtm_tmp
alias mumps=$gtm_dist/mumps
alias mupip=$gtm_dist/mupip
gtmuser@gtmworkshop:~$ </pre><p>
Now you can look at this in operation by applying some modifications
to VistA that allow it to operate better with GT.M to the
<b>/home/gtmuser/VistA/p</b> directory. Download the file
<b>KSBVistAPatches.zip</b> from the same location that you obtained
the GT.M Acculturation Workshop, and put it in the <b>/Distrib/VistA</b>
directory. Then unpack it to <b>/home/gtmuser/VistA/p</b> directory.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l /Distrib/VistA/KSBVistAPatches.zip</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-rw-r--r-- 1 gtmuser gtmuser 20530 Dec 15 17:49 /Distrib/VistA/KSBVistAPatches.zip</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000">unzip -d VistA/p /Distrib/VistA/KSBVistAPatches.zip</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Archive:  /Distrib/VistA/KSBVistAPatches.zip</font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/XPDR.m          </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/XWBTCPM.m       </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/ZOSV2GTM.m      </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/_ZOSV2.m        </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/ZOSVGUX.m       </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/_ZOSV.m         </font>
  <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">inflating: VistA/p/ZTMGRSET.m </font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$</font></pre><p>
Then compile it with the object files in the VistA/V6.2-000_x86_64/o
directory</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">cd VistA/V6.2-000_x86_64/o</font>
gtmuser@gtmworkshop:~/VistA/V6.2-000_x86_64/o$ <font color="#ff0000">mumps ../../p/*.m</font>
gtmuser@gtmworkshop:~/VistA/V6.2-000_x86_64/o$</pre><p>
Now, you can run VistA with the local modifications. In this case,
one of the modifications is a fix to a minor bug in VistA: it treats
spaces separating source directories in a parenthesized list as part
of the directory name, rather than as a separator. With the change,
when you run a function for example to apply a patch, it correctly
puts the new routine in the first source directory even if it is
within a parenthesized list of directories. In this example, you will
run the ^ZTMGRTSET function. Notice that the VistA/V6.2-000/p
directory is initially empty, but has some tens of files afterwards.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l VistA/V6.2-000_x86_64/p</font>
total 0
gtmuser@gtmworkshop:~$ <font color="#ff0000">mumps -dir</font>

GTM&gt;<font color="#0000ff">do ^ZTMGRSET</font>


ZTMGRSET Version 8.0 Patch level **34,36,69,94,121,127,136,191,275,355**
HELLO! I exist to assist you in correctly initializing the current account.

This is namespace or uci EHR,EHR.
Should I continue? N//<font color="#0000ff">y</font>
I think you are using GT.M (Unix)
Which MUMPS system should I install?

1 = VAX DSM(V6), VAX DSM(V7)
2 = MSM-PC/PLUS, MSM for NT or UNIX
3 = Cache (VMS, NT, Linux), OpenM-NT
4 = Datatree, DTM-PC, DT-MAX
5 =
6 =
7 = GT.M (VMS)
8 = GT.M (Unix)
System: 8//

I will now rename a group of routines specific to your operating system.
Routine: ZOSVGUX      Loaded, Saved as %ZOSV
Routine:
Routine: ZIS4GTM      Loaded, Saved as %ZIS4
Routine: ZISFGTM      Loaded, Saved as %ZISF
Routine: ZISHGTM      Loaded, Saved as %ZISH
Routine: XUCIGTM      Loaded, Saved as %XUCI
Routine: ZISETGUX     Missing
Routine: ZOSV2GTM     Loaded, Saved as %ZOSV2
Routine: ZISTCPS      Loaded, Saved as %ZISTCPS

NAME OF MANAGER'S UCI,VOLUME SET: EHR,EHR//
The value of PRODUCTION will be used in the GETENV api.
PRODUCTION (SIGN-ON) UCI,VOLUME SET: EHR,EHR//
The VOLUME name must match the one in PRODUCTION.
NAME OF VOLUME SET: EHR//
The temp directory for the system: '/tmp/'//
^%ZOSF setup


Now to load routines common to all systems.
Routine: ZTLOAD       Loaded, Saved as %ZTLOAD
Routine: ZTLOAD1      Loaded, Saved as %ZTLOAD1
Routine: ZTLOAD2      Loaded, Saved as %ZTLOAD2
Routine: ZTLOAD3      Loaded, Saved as %ZTLOAD3
Routine: ZTLOAD4      Loaded, Saved as %ZTLOAD4
Routine: ZTLOAD5      Loaded, Saved as %ZTLOAD5
Routine: ZTLOAD6      Loaded, Saved as %ZTLOAD6
Routine: ZTLOAD7      Loaded, Saved as %ZTLOAD7
Routine: ZTM          Loaded, Saved as %ZTM
Routine: ZTM0         Loaded, Saved as %ZTM0
Routine: ZTM1         Loaded, Saved as %ZTM1
Routine: ZTM2         Loaded, Saved as %ZTM2
Routine: ZTM3         Loaded, Saved as %ZTM3
Routine: ZTM4         Loaded, Saved as %ZTM4
Routine: ZTM5         Loaded, Saved as %ZTM5
Routine: ZTM6         Loaded, Saved as %ZTM6
Routine: ZTMS         Loaded, Saved as %ZTMS
Routine: ZTMS0        Loaded, Saved as %ZTMS0
Routine: ZTMS1        Loaded, Saved as %ZTMS1
Routine: ZTMS2        Loaded, Saved as %ZTMS2
Routine: ZTMS3        Loaded, Saved as %ZTMS3
Routine: ZTMS4        Loaded, Saved as %ZTMS4
Routine: ZTMS5        Loaded, Saved as %ZTMS5
Routine: ZTMS7        Loaded, Saved as %ZTMS7
Routine: ZTMSH        Loaded, Saved as %ZTMSH
Routine: ZTER         Loaded, Saved as %ZTER
Routine: ZTER1        Loaded, Saved as %ZTER1
Routine: ZIS          Loaded, Saved as %ZIS
Routine: ZIS1         Loaded, Saved as %ZIS1
Routine: ZIS2         Loaded, Saved as %ZIS2
Routine: ZIS3         Loaded, Saved as %ZIS3
Routine: ZIS5         Loaded, Saved as %ZIS5
Routine: ZIS6         Loaded, Saved as %ZIS6
Routine: ZIS7         Loaded, Saved as %ZIS7
Routine: ZISC         Loaded, Saved as %ZISC
Routine: ZISP         Loaded, Saved as %ZISP
Routine: ZISS         Loaded, Saved as %ZISS
Routine: ZISS1        Loaded, Saved as %ZISS1
Routine: ZISS2        Loaded, Saved as %ZISS2
Routine: ZISTCP       Loaded, Saved as %ZISTCP
Routine: ZISUTL       Loaded, Saved as %ZISUTL
Routine: ZTPP         Loaded, Saved as %ZTPP
Routine: ZTP1         Loaded, Saved as %ZTP1
Routine: ZTPTCH       Loaded, Saved as %ZTPTCH
Routine: ZTRDEL       Loaded, Saved as %ZTRDEL
Routine: ZTMOVE       Loaded, Saved as %ZTMOVE
Want to rename the FileMan routines: No//<font color="#0000ff">y</font>
Routine: DIDT         Loaded, Saved as %DT
Routine: DIDTC        Loaded, Saved as %DTC
Routine: DIRCR        Loaded, Saved as %RCR
Setting ^%ZIS('C')

Now, I will check your % globals...........
ALL DONE
GTM&gt;<font color="#0000ff">halt</font>
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l VistA/V6.2-000_x86_64/p|wc</font>
     <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace"><span style="background: #ffff00">57</span></font>     <font face="Inconsolata, DejaVu Sans Mono, Bitstream Vera Sans Mono, monospace">506    3132</font>
gtmuser@gtmworkshop:~$</pre><h3>
Creating a Development Environment</h3>
<p>When you work on an application, either to enhance it or to fix a
bug, you typically modify only a small part of the application. With
GT.M, you do not need to make a copy of an entire application
environment to work on your project. Nor do you need to work in the
same environment as other developers, with the risk of stepping on
one another's toes. All you need is to to set up your processes so
that their $ZROUTINES search path finds your development routines
before finding the main application routines. If your work involves
changes to global variables, you can set up your own copy of the
database – or, even, if it makes sense, a part of the database with
the remaining globals mapped to the parent environment. Of course, in
a large project, your environment's parent may itself have a parent.</p>
<p>Delete the V6.2-001_x86_64 subdirectory, and copy the files <span style="font-variant: normal"><span style="font-style: normal"><b>inc</b></span></span>
and <b>install</b> to the VistA environment from the same location as
this Acculturation Workshop, and make <b>install</b> executable.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -l VistA/</font>
total 872
-rw-r--r-- 1 gtmuser gtmuser    894 Dec 16 13:20 <span style="background: #ffff00">inc</span>
-rwxr-xr-x 1 gtmuser gtmuser   4416 Dec 16 13:20 <span style="background: #ffff00">install</span>
drwxrwxr-x 2 gtmuser gtmuser    114 Dec 15 17:54 p
drwxr-x--- 2 gtmuser gtmuser 606208 Feb  6  2009 r
drwxrwxr-x 6 gtmuser gtmuser    108 Dec 16 13:20 V6.2-000_x86_64
gtmuser@gtmworkshop:~$</pre><p>
Similarly, to <b>VistA/V6.2-000_x86_64</b> copy the files <b>wvehrstop</b>,
<b>wvehrstart</b>, <b>run</b>, <b>newjnls</b> and <b>gtmenv</b> (yes,
the latter overwrites the <b>gtmenv</b> file you already have there).
Make <b>wvehrstop</b>, <b>wvehrstart</b>, <b>run</b> and <b>newjnls</b>
executable. Also, replace the <b>env</b> in <b>VistA/V6.2-000_x86_64</b>
with the new <b>env</b> file. Create a symbolic link called <b>gtm</b>
to <b>/usr/lib/fis-gtm/V6.2-000_x86_64</b>.</p>
<pre class="western">gtmuser@gtmworkshop:~$ ls -l VistA/V6.2-000_x86_64/
total 896
drwxrwxr-x 2 gtmuser gtmuser     48 Dec 15 16:47 g
lrwxrwxrwx 1 gtmuser gtmuser     32 Dec 16 13:24 <span style="background: #ffff00">gtm</span> -&gt; /usr/lib/fis-gtm/V6.2-000_x86_64
-rw-rw-r-- 1 gtmuser gtmuser    735 Dec 16 13:20 <span style="background: #ffff00">gtmenv</span>
-rwxr-xr-x 1 gtmuser gtmuser    181 Dec 16 13:20 <span style="background: #ffff00">newjnls</span>
drwxrwxr-x 2 gtmuser gtmuser 610304 Dec 16 11:57 o
drwxrwxr-x 2 gtmuser gtmuser   4096 Dec 16 12:01 p
drwxrwxr-x 2 gtmuser gtmuser   4096 Dec 16 11:59 r
-rwxr-xr-x 1 gtmuser gtmuser    340 Dec 16 13:20 run
-rwxr-xr-x 1 gtmuser gtmuser    277 Dec 16 13:20 <span style="background: #ffff00">wvehrstart</span>
-rwxr-xr-x 1 gtmuser gtmuser    161 Dec 16 13:20 <span style="background: #ffff00">wvehrstop</span>
gtmuser@gtmworkshop:~$</pre><p>
Starting with a clean environment (no gtm* environment variables
defined), create a child environment of VistA called <b>dev</b> using
the install script.</p>
<pre class="western">gtmuser@gtmworkshop:~$ <font color="#ff0000">VistA/install dev</font>
Creating environment in dev as child of environment in /home/gtmuser/VistA
Default permission for development environment is for all to read and group to write - please alter as needed
gtmuser@gtmworkshop:~$ <font color="#ff0000">ls -lR dev</font>
dev:
total 16
-r--r--r-- 1 gtmuser gtmuser  894 2010-09-14 17:33 inc
-r-xr-x--x 1 gtmuser gtmuser 4416 2010-09-14 17:33 install
drwxrwxr-x 2 gtmuser gtmuser    1 2010-09-14 17:33 p
lrwxrwxrwx 1 gtmuser gtmuser   19 2010-09-14 17:33 <span style="background: #ffff00">parent</span> -&gt; /home/gtmuser/VistA
drwxrwxr-x 2 gtmuser gtmuser    1 2010-09-14 17:33 r
drwxrwxr-x 7 gtmuser gtmuser   88 2010-09-14 17:33 V6.2-000_x86_64

dev/p:
total 0

dev/r:
total 0

dev/V6.2-000_x86_64:
total 20
-r--r--r-- 1 gtmuser gtmuser 731 2010-09-14 17:33 env
drwxrwxr-x 2 gtmuser gtmuser   8 2010-09-14 17:33 g
lrwxrwxrwx 1 gtmuser gtmuser  36 2010-09-14 17:33 gtm -&gt; /home/gtmuser/VistA/V6.2-000_x86_64/gtm
-r-xr-xr-x 1 gtmuser gtmuser 181 2010-09-14 17:33 newjnls
drwxrwxr-x 2 gtmuser gtmuser   1 2010-09-14 17:33 o
drwxrwxr-x 2 gtmuser gtmuser   1 2010-09-14 17:33 p
drwxrwxr-x 2 gtmuser gtmuser   1 2010-09-14 17:33 r
-r-xr-x--x 1 gtmuser gtmuser 343 2010-09-14 17:33 run
drwxrwxr-x 2 gtmuser gtmuser   1 2010-09-14 17:33 tmp
-r-xr-xr-x 1 gtmuser gtmuser 277 2010-09-14 17:33 wvehrstart
-r-xr-xr-x 1 gtmuser gtmuser 161 2010-09-14 17:33 wvehrstop

dev/V6.2-000_x86_64/g:
total 4
-r--r--r-- 1 gtmuser gtmuser 1536 2010-09-13 18:22 gtm.gld

dev/V6.2-000_x86_64/o:
total 0

dev/V6.2-000_x86_64/p:
total 0

dev/V6.2-000_x86_64/r:
total 0

dev/V6.2-000_x86_64/tmp:
total 0
gtmuser@gtmworkshop:~$</pre><p>
Now run the <b>dev</b> environment and notice the values of the
environment variables. In particular notice how the database used is
that of the parent.</p>
<pre class="western"><font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$ <font color="#ff0000"><span style="background: transparent">dev/V6.2-000_x86_64/run</span></font></font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">write $zgbldir</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/dev/V6.2-000_x86_64/g/gtm.gld</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">write $zroutines</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace"><font color="#ff8080">/home/gtmuser/dev/V6.2-000_x86_64/o(/home/gtmuser/dev/V6.2-000_x86_64/p /home/gtmuser/dev/V6.2-000_x86_64/r /home/gtmuser/dev/p /home/gtmuser/dev/r)</font> <font color="#660066">/home/gtmuser/dev/parent/V6.2-000_x86_64/o(/home/gtmuser/dev/parent/V6.2-000_x86_64/p /home/gtmuser/dev/parent/V6.2-000_x86_64/r /home/gtmuser/dev/parent/p /home/gtmuser/dev/parent/r)</font> <font color="#9999ff">/home/gtmuser/dev/V6.2-000_x86_64/gtm/libgtmutil.so</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">zsystem &quot;env | grep ^gtm&quot;</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_repl_instance=/home/gtmuser/dev/parent/V6.2-000_x86_64/g/gtm.repl</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_log=/tmp/fis-gtm/V6.2-000_x86_64</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_prompt=GTM&gt;</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_retention=42</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmver=V6.2-000_x86_64</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_icu_version=5.2</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmgbldir=/home/gtmuser/dev/V6.2-000_x86_64/g/gtm.gld</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmroutines=/home/gtmuser/dev/V6.2-000_x86_64/o*(/home/gtmuser/dev/V6.2-000_x86_64/p /home/gtmuser/dev/V6.2-000_x86_64/r /home/gtmuser/dev/p /home/gtmuser/dev/r) /home/gtmuser/dev/parent/V6.2-000_x86_64/o*(/home/gtmuser/dev/parent/V6.2-000_x86_64/p /home/gtmuser/dev/parent/V6.2-000_x86_64/r /home/gtmuser/dev/parent/p /home/gtmuser/dev/parent/r) /home/gtmuser/dev/V6.2-000_x86_64/gtm/libgtmutil.so</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmdir=/home/gtmuser/dev/parent</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_etrap=Write:(0=$STACK) &quot;Error occurred: &quot;,$ZStatus,!</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_principal_editing=EDITING</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_tmp=/tmp/fis-gtm/V6.2-000_x86_64</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtm_dist=/usr/lib/fis-gtm/V6.2-000_x86_64</font>


<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">do ^GDE</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GDE-I-LOADGD, Loading Global Directory file</font>
        <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">/home/gtmuser/dev/V6.2-000_x86_64/g/gtm.gld</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GDE-I-VERIFY, Verification OK</font>


<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">show -segment</font></font>

                                <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">*** SEGMENTS ***</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">Segment                         File (def ext: .dat)Acc Typ Block      Alloc Exten Options</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">-------------------------------------------------------------------------------------------</font>
 <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">DEFAULT                         $gtmdir/$gtmver/g/gtm.dat</font>
                                                     <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">BG  DYN  4096       5000 10000 GLOB=1000</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">LOCK=  40</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">RES =   0</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">ENCR=OFF</font>
                                                                                    <font face="Ubuntu Mono, Inconsolata, Consolas, monospace">MSLT=1024F</font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GDE&gt; <font color="#0000ff">quit</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">%GDE-I-NOACTION, Not updating Global Directory /home/gtmuser/dev/V6.2-000_x86_64/g/gtm.gld</font>

<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">GTM&gt;<font color="#0000ff">halt</font></font>
<font face="Ubuntu Mono, Inconsolata, Consolas, monospace">gtmuser@gtmworkshop:~$</font></pre><h4>
Further Investigation on Your Own</h4>
<p>Use the ZEDIT command in the dev environment to create a “Hello,
world” program and show that you can run it. Now, try executing
that program in the parent VistA environment, and notice that it does
not exist.</p>
<p>Investigate what happens if you use the <b>--separate-globals</b>
flag of the install script. Work through the scripts to see how the
environment variables are set up.</p>
<p>Examine the install script and see how it sets up a child
environment.</p>
</body>
</html>